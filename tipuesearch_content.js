var tipuesearch = {"pages":[{"title":"Chyba ğŸ›","text":"NaÅ¡li jste chybu? Nebo pÅ™eklep? Budu velmi rÃ¡d, kdyÅ¾ mÄ› na to upozornÃ­te. VÅ¡echny zdrojovÃ© texty tohoto webu jsou v repositÃ¡Å™i na GitHubu . NejjednoduÅ¡Å¡Ã­ zpÅ¯sob jak nahlÃ¡sit chybu je zaloÅ¾it Issue . Pokud se vÃ¡m chce, mÅ¯Å¾eteâ€¦ forknout repositÃ¡Å™i opravit chybu udÄ›lat pull request DÃ­ky :-)","tags":"pages","url":"pages/chyba.html","loc":"pages/chyba.html"},{"title":"O mnÄ›","text":"NachÃ¡zÃ­te se na webovÃ½ch strÃ¡nkÃ¡ch jednoho Å¡Ã­lenÃ©ho uÄitele z VOÅ  a SPÅ E Olomouc . Tyto strÃ¡nky jsou urÄeny pro podporu mojÃ­ vÃ½uky. KaÅ¾dÃ© tÃ©ma, kterÃ© aktuÃ¡lnÄ› vyuÄuji, tady mÃ¡ svou strÃ¡nku. NÄ›kterÃ© strÃ¡nky podÃ¡vajÃ­ souhrnnÃ© informace, nÄ›kterÃ© jsou jen sbÃ­rkou odkazÅ¯ na jinÃ¡ mÃ­sta na Internetu. Pokud vÃ¡m tu nÄ›co chybÃ­, napiÅ¡te mi. Pokud najdete chybu , napiÅ¡te mi. Motto Nikdo nevÄ›dÄ›l, odkud pÅ™iÅ¡li, ale najednou byli v Lese: Klokanice a KlokÃ¡nek. KdyÅ¾ se PÃº zeptal KryÅ¡tÅ¯fka Robina: â€Jak se sem dostali?\", KryÅ¡tÅ¯fek Robin Å™ekl: â€ObvyklÃ½m zpÅ¯sobem, jestli vÃ­Å¡, jak to myslÃ­m, PÃº,\" a PÃº, kterÃ½ to nevÄ›dÄ›l, Å™ekl: â€Aha!\" Pak dvakrÃ¡t kÃ½vl hlavou a Å™ekl: â€ObvyklÃ½m zpÅ¯sobem. Ach tak!\" Marek NoÅ¾ka","tags":"pages","url":"pages/o-mne.html","loc":"pages/o-mne.html"},{"title":"VÃ½voj STM8 s OpenSource nÃ¡stroji","text":"VÃ½vojovÃ© nÃ¡stroje jsou asi nejvÄ›tÅ¡Ã­ slabinou celÃ©ho ekosystÃ©mu STM8 . VÃ½robce dodÃ¡vÃ¡ vÃ½vojovÃ© prostÅ™edÃ­ STVD ( nÃ¡vod zde ), kterÃ© je sice dostaÄujÃ­cÃ­, ale starÃ© a jiÅ¾ nevyvÃ­jenÃ©. NavÃ­c se obÄas stane, Å¾e na nÄ›jakÃ©m PC je problÃ©m to rozjet. KompilÃ¡tor Cosmic sice funguje, ale ta neustÃ¡lÃ¡ kontrola licence, je fakt opruz; â€¦ a jeho chybovÃ¡ hlÃ¡Å¡enÃ­ mi taky nepÅ™iÅ¡ly ÃºplnÄ› srozumitelnÃ¡. A to jsem jeÅ¡tÄ› nezmÃ­nil to hlavnÃ­: Na Linuxu to nejede! TakÅ¾e, co s tÃ­m? PouÅ¾ijeme OpenSource nÃ¡stroje! Co je potÅ™eba? VÃ½vojovÃ© prostÅ™edÃ­ KompilÃ¡tor ProgramÃ¡tor/Flasher â€“ software, kterÃ½m program do Äipu nahraju Debuger KdyÅ¾ jsem to celÃ© tvoÅ™il hodnÄ› mi pomohla tato strÃ¡nka, tak se tam mÅ¯Å¾ete mrknout: https://github.com/hbendalibraham/stm8_started . PÅ™edpÅ™ipravenÃ¡ instalace PÅ™ipravil jsem pro vÃ¡s vÃ½ukovou image systÃ©mu Devuan Linux , kde je vÅ¡e jiÅ¾ nastaveno a nainstalovÃ¡no. NemusÃ­te tedy vÅ¡e ruÄnÄ› instalovat, staÄÃ­ nainstalovat VirtualBox â€“ vÄetnÄ› Extension Pack a stÃ¡hnout si image: Devuan-X- MIT .ova . I tak si ale pÅ™eÄtÄ›te nÃ¡sledujÃ­cÃ­ text aÅ¥ vÃ­te, jak to mÃ¡te pouÅ¾Ã­t. https://mamut.spseol.cz/nozka/public/site+VirtuaBox/000-obrazy- OVA /Devuan-X- MIT .ova RychlÃ¡ instalace DÃ¡le v textu jsou popsÃ¡ny detaily. Zde je na jednom mÃ­stÄ› sepsÃ¡na rychlÃ¡ instalace nÃ¡strojÅ¯, kterÃ© budete potÅ™ebovat. Windows Nejprve nainstalujte Chocolatye . Tedy: PomocÃ­ Win+X a spustÃ­te PowerShell jako AdministrÃ¡tor a zadÃ¡te pÅ™Ã­kaz: Set - ExecutionPolicy Bypass - Scope Process - Force ; [ System . Net . ServicePointManager ]:: SecurityProtocol = [ System . Net . ServicePointManager ]:: SecurityProtocol - bor 3072 ; iex (( New - Object System . Net . WebClient ) . DownloadString ( 'https://community.chocolatey.org/install.ps1' )) Potom doinstalujte dalÅ¡Ã­ potÅ™ebnÃ© nÃ¡stroje: choco install vscodium git make mingw openocd Pokud jeÅ¡tÄ› nemÃ¡te Python, mÅ¯Å¾ete i Python: choco install python Instalace SDCC se musÃ­ naklikat. InstalÃ¡tor stÃ¡hnete zde: https://sourceforge.net/projects/sdcc/files/sdcc-win64/ Linux sudo apt install sdcc sdcc-libraries git make openocd StartovacÃ­ toolchain PÅ™ipravil jsem startovacÃ­ strom zdrojovÃ½ch kÃ³dÅ¯ a Makefile . https://github.com/spseol/ STM8 -start-toolchain Tento toolchain se dÃ¡ pouÅ¾Ã­t jak v Linuxu tak ve Windows. StaÄÃ­ nainstalovat Make , Bash a/takÃ© Git . V Linuxu zavolÃ¡te nÄ›co jako: apt install make git Ve Windows je nejsnadnÄ›jÅ¡Ã­ instalovat pomocÃ­ Chocolatye : choco install make choco install git (Bash je souÄÃ¡sti balÃ­Äku Git.) AdresÃ¡Å™ovÃ¡ struktura jednotlivÃ½ch projektÅ¯ vypadÃ¡ takto: MIT â”œâ”€â”€ Projekt-1 â”‚ â”œâ”€â”€ inc â”‚ â”œâ”€â”€ lib â”‚ â””â”€â”€ src â”œâ”€â”€ Projekt-2 â”‚ â”œâ”€â”€ inc â”‚ â”œâ”€â”€ lib â”‚ â””â”€â”€ src â”œâ”€â”€ SPL-STM8S103 â”‚ â”œâ”€â”€ inc â”‚ â””â”€â”€ src â”œâ”€â”€ SPL-STM8S105 â”‚ â”œâ”€â”€ inc â”‚ â””â”€â”€ src â””â”€â”€ SPL-STM8S208 â”œâ”€â”€ inc â””â”€â”€ src UdÄ›lejte si adresÃ¡Å™, kde budou vÅ¡echny vaÅ¡e projekty. V tom stejnÃ©m adresÃ¡Å™i budou i adresÃ¡Å™e nazvanÃ© SPL . V SPL adresÃ¡Å™Ã­ch je Standard peripheral library od firmy ST . Tato knihovna mÃ¡ dost divnou licenci a proto vÃ¡m ji nemÅ¯Å¾u jen tak dÃ¡t. MÄ›li byste si ji najÃ­t a stÃ¡hnout . Pak je tÅ™eba jeÅ¡tÄ› aplikovat patch , kterÃ½ knihovnu pÅ™edÄ›lÃ¡ tak, aby se dala pouÅ¾Ã­t s naÅ¡Ã­m SDCC kompilÃ¡torem. No prostÄ›: ve svÃ©m prvnÃ­m projektu zadÃ¡te pÅ™Ã­kaz: make spl VÃ½vojovÃ© prostÅ™edÃ­ Jako editor a vÃ½vojovÃ© prostÅ™edÃ­ doporuÄuji VScodium/VScode . Instalace je popsÃ¡na zde Kompilace PopÃ­Å¡u tu celkem tÅ™i rÅ¯znÃ¡, mezi sebou se prolÃ­najÃ­cÃ­ Å™eÅ¡enÃ­. Å patnÃ¡ zprÃ¡va je, Å¾e ani jedno z nich nenÃ­ 100%. DobrÃ¡ zprÃ¡va je, Å¾e pÅ™i troÅ¡e snahy se tÄ›m 100% mÅ¯Å¾eme hodnÄ› pÅ™iblÃ­Å¾it. Mezi jednotlivÃ½mi Å™eÅ¡enÃ­mi se mÅ¯Å¾ete snadno pÅ™epnout: make switch-sdcc respektive make switch-sdccrm respektive make switch-sdcc-gas K dispozici jsou tedy celkem tÅ™i Makefile v adresÃ¡Å™i .make . PÅ™epnutÃ­ jen znamenÃ¡, Å¾e se udÄ›lÃ¡ symlink do root-adresÃ¡Å™e projektu. Na divnÃ½ch systÃ©mech, kterÃ© symlink neumÃ­ (napÅ™Ã­klad Windows) se natvrdo kopÃ­ruje, takÅ¾e tato operace mÅ¯Å¾e bÃ½t ztrÃ¡tovÃ¡. Å˜eÅ¡enÃ­ 1: sdcc SDCC - Small Device C Compiler je kompilÃ¡tor pro rÅ¯znÃ©, vÃ­ce Äi mÃ©nÄ› znÃ¡mÃ© 8-bitovÃ© architektury. Z hlediska STM8 mÃ¡ jednu zÃ¡sadnÃ­ nevÃ½hodu: nedokÃ¡Å¾e odstranit nepouÅ¾Ã­vanÃ½ kÃ³d . Co to znamenÃ¡? Noâ€¦ pokud si vÅ¡echno pÃ­Å¡ete sami, tak to prakticky neznamenÃ¡ nic. Pokud ovÅ¡em pouÅ¾ijete nÄ›jakou knihovnu (jako napÅ™Ã­klad SPL ), tak uÅ¾ vÃ¡m to zaÄne hodnÄ› vadit, protoÅ¾e vÃ½slednÃ½ strojovÃ½ kÃ³d obsahuje spoustu funkcÃ­, kterÃ© jste kompilovali jen proto, Å¾e byli souÄÃ¡stÃ­ knihovny a ne proto, Å¾e jste je chtÄ›li pouÅ¾Ã­t. Tyto funkce nejsou nikde volÃ¡ny a proto by je mÄ›l linker odstranit. No a to je pÅ™esnÄ› to, co se nestane :-( . Ve vÃ½sledku program, kterÃ½ by mohl mÃ­t cca 2-3 kB mÃ¡ 30 kB. To se dÃ¡ ÄÃ¡steÄnÄ› vyÅ™eÅ¡it tÃ­m, Å¾e budete kompilovat jen ty ÄÃ¡sti SPL , kterÃ© prÃ¡vÄ› v tomto projektu potÅ™ebujete. Velikost vÃ½slednÃ©ho binÃ¡rnÃ­ho souboru se tak rapidnÄ› zmenÅ¡Ã­, ale pokud budete pracovat s Äipem, kterÃ½ mÃ¡ jen 8 kB pamÄ›ti programu, obÃ¡vÃ¡m se, Å¾e to nemusÃ­ staÄitâ€¦. V Makefile nÄ›kde kolem Å™Ã¡dku 77 najdete toto: SPL_SOURCE = stm8s_gpio.c stm8s_clk.c stm8s_tim4.c stm8s_itc.c #SPL_SOURCE += stm8s_uart1.c SPL_SOURCE += stm8s_adc2.c #SPL_SOURCE += stm8s_flash.c #SPL_SOURCE += stm8s_tim1.c #SPL_SOURCE += stm8s_tim2.c #SPL_SOURCE += stm8s_tim3.c â€¦ mÄ›li byste zakomentovat to, co nepotÅ™ebujete a odkomentovat jen to, co potÅ™ebujete. Instalace v Linuxu je pomÄ›rnÄ› snadnÃ¡, protoÅ¾e SDCC je souÄÃ¡sti vÄ›tÅ¡iny LinuxovÃ½ch distribucÃ­; takÅ¾e zavolÃ¡te nÄ›co jako: apt install sdcc sdcc-libraries Ve Windows si stÃ¡hnete instalÃ¡tor a pokraÄujte, ve Windows oblÃ­benÃ½m klikÃ¡nÃ­m. Å˜eÅ¡enÃ­ 2: sdccrm sdccrm je nÃ¡stroj pro optimalizaci mrtvÃ©ho kÃ³du pro port stm8 SDCC , kterÃ½ odstraÅˆuje nepouÅ¾Ã­vanÃ© funkce. https://github.com/XaviDCR92/sdccrm Je to Å™eÅ¡enÃ­ tak nÄ›jak na pÅ¯l cesty: Funguje, kÃ³d je opravdu menÅ¡Ã­, ale tato moÅ¾nost vyluÄuje pouÅ¾itÃ­ debugeru . To nÄ›kdy, nÄ›komu vadit mÅ¯Å¾e, jindy jinÃ©mu to vadit nemusÃ­. DÃ¡le je nutnÃ© ruÄnÄ› zadat funkce, kterÃ© nechcete \"optimalizovat\" â€“ tedy vyhodit. Proto je tÅ™eba sledovat chybovÃ¡ hlÃ¡Å¡enÃ­ a nÃ¡zev chybÄ›jÃ­cÃ­ funkce zadat do souboru .make/exclude_reference uvnitÅ™ projektovÃ©ho adresÃ¡Å™e. sdccrm si musÃ­te buildnout ze zdrojovÃ½ch kÃ³dÅ¯. PomocÃ­ Chocolatye nainstalujete gcc a v adresÃ¡Å™i se zdrojovÃ½mi soubory zavolÃ¡te make . sdccrm je celkem malÃ½ program bez zÃ¡vislostÃ­, takÅ¾e jde jednoduÅ¡e kompilovat v Linuxu i ve Windows â€“ nicmÃ©nÄ› pro jistotu je Windows binÃ¡rka souÄÃ¡stÃ­ startovacÃ­ho toolsetu a je v souboru .make/sdccrm.exe . choco install mingw a pak cd sdccrm make Å˜eÅ¡enÃ­ 3: sdcc-gas https://github.com/XaviDCR92/sdcc-gas Toto je asi nejlepÅ¡Ã­ Å™eÅ¡enÃ­. Vzniklo pÅ™idÃ¡nÃ­m podpory GNU Assembleru tedy -gas do SDCC 3.9.0; gas je vÃ½hodou i nevÃ½hodou tohoto Å™eÅ¡enÃ­. Na jednu stranu to znamenÃ¡, Å¾e mÅ¯Å¾eme pouÅ¾Ã­vat klasickÃ© nÃ¡stroje z GNU binutils , na druhou stranu to znamenÃ¡, Å¾e nelze pouÅ¾Ã­t ty ÄÃ¡sti sdcc-libraries , kterÃ© jsou napsanÃ© v STM8 assembleru a je nutnÃ© pouÅ¾Ã­t mÃ©nÄ› optimÃ¡lnÃ­ kÃ³d napsanÃ½ v C. â€¦no a zÅ™Ã­dka se stane, Å¾e nÄ›jakÃ¡ vnitÅ™nÃ­ funkcionalita (napÅ™Ã­klad nÃ¡sobenÃ­ 64-bitovÃ½ch integerÅ¯) je napsanÃ¡ jen v STM8 assembleru a vÃ¡m nezbude, neÅ¾ to nÄ›jak obejÃ­t nebo danou funkci pÅ™epsat do GNU assembleru. Pokud vÃ¡s to zajÃ­mÃ¡ vÃ­ce mÅ¯Å¾ete si poÄÃ­st zde a zde Toto je dÅ¯vod proÄ v Makefile sdcc-gas jsou tyto Å™Ã¡dky: SDCC_LIB_SRC_DIR = /usr/local/stow/sdcc-gas/share/sdcc/lib/src/ SDCC_LIB_SOURCE = _mullong.c _divulong.c _mulint.c _modsint.c #SDCC_LIB_SOURCE = $(notdir $(wildcard /usr/local/stow/sdcc-gas/share/sdcc/lib/src/_*.c)) SDCC_LIB_OBJECTS := $( addprefix $( OUTPUT_DIR ) /, $( SDCC_LIB_SOURCE:.c = .o )) PÅ™Ã­padnÃ© problÃ©my chybÄ›jÃ­cÃ­ch funkcÃ­ lze tedy vyÅ™eÅ¡it doplnÄ›nÃ­m jmÃ©na souboru do promÄ›nnÃ© SDCC_LIB_SOURCE . Aby vÅ¡e fungovalo musÃ­te si stÃ¡hnout vÃ½Å¡e zmÃ­nÄ›nÃ© zdrojovÃ© kÃ³dy a buildnout je. JÃ¡ to dÄ›lÃ¡m takto (pouÅ¾Ã­vÃ¡m stow ): sudo apt install stow sudo apt build-dep sdcc cd sdcc-gas ./configure --prefix = /usr/local/stow/sdcc-gas make sudo make install cd /usr/local/stow sudo stow sdcc-gas PodobnÃ½ postup pouÅ¾ijete pro STM8 port GNU binutils, kterÃ½ je potÅ™eba pro linkovÃ¡nÃ­ a debug .: tar xzf stm8-binutils-gdb-sources-2021-07-18.tar.gz cd stm8-binutils-gdb-sources export PREFIX = /usr/local/stow/stm8-binutils-gdb ./patch_binutils.sh cd binutils-2.30 make sudo make install cd /usr/local/stow sudo stow stm8-binutils-gdb Tato vÃ½Å¡e popsanÃ¡ kompilace ze zdrojovÃ½ch kÃ³dÅ¯ je teoreticky moÅ¾nÃ¡ i na Windows, pomocÃ­ projektu Cygwin . Prakticky jsem to nikdy nezkouÅ¡el. OsobnÄ› bych Å¡el (tedy pokud by mÄ› nÄ›kdo donutil pouÅ¾Ã­vat Widows) spÃ­Å¡e cestou Windows Subsystem for Linux . Instalace WSL 2 je velice jednoduchÃ¡ . BohuÅ¾el do WSL se nativnÄ› nedÃ¡ pÅ™ipojit USB â€“ ale dÃ¡ se to Å™eÅ¡it . Flashing OpenOCD Open On-Chip Debugger je nÃ¡stroj pro debug a krokovÃ¡nÃ­ programu pÅ™Ã­mo na Äipu. openocd umÃ­ i nahrÃ¡t program do pamÄ›ti zaÅ™Ã­zenÃ­. Instalaci zajistÃ­ na Linuxu jednoduchÃ½ pÅ™Ã­kaz: sudo apt install openocd na Windows je to dÃ­ky Chocolatye podobnÄ› jednoduchÃ©. choco install openodc ZdÃ¡ se, Å¾e Chocolatye uÅ¾ nabÃ­zÃ­ verzi 0.11. DÅ™Ã­ve to bylo jen 0.10. Tyto verze pouÅ¾Ã­vajÃ­ trochu jinÃ© nÃ¡zvy souborÅ¯, proto i pÅ™Ã­kaz vypadÃ¡ jinak. Verze 0.10: openocd -f interface/stlink.cfg -f target/stm8s.cfg Verze 0.11: openocd -f interface/stlink-dap.cfg -f target/stm8s.cfg Toto se Å™eÅ¡Ã­ v Makefile pomocÃ­ promÄ›nnÃ© OPENOCD , takÅ¾e si ji pÅ™Ã­padnÄ› upravte. Aby openodc umÄ›lo i pouhÃ© flashovÃ¡nÃ­ je tÅ™eba pÅ™idat pÅ™idat skript, kterÃ½ to umÃ­. Ten je buÄ souÄÃ¡stÃ­ startovacÃ­ho toolsetu nebo ho mÅ¯Å¾ete pÅ™idat na konec konfiguraÄnÃ­ho souboru stm8s.cfg : proc program_device { filename flashstart } { halt wait_halt load_image $ filename $ flashstart sleep 10 reset halt resume sleep 10 shutdown } ; V Linuxu by celÃ¡ cesta mohla vypadat takto: /usr/share/openocd/scripts/target/stm8s.cfg . Pokud jste do Windows instalovali pomocÃ­ Chocolatye, bude to nejspÃ­Å¡ tato cesta: C:\\ProgramData\\chocolatey\\lib\\openocd\\tools\\OpenOCD-20190828-0.10.0\\share\\openocd\\scripts\\target\\stm8s.cfg . stm8flash DruhÃ¡ moÅ¾nost je program stm8flash . Ve vÄ›tÅ¡inÄ› linuxovÃ½ch distribucÃ­ je tÅ™eba ho ruÄnÄ› buildnout. https://github.com/vdudouyt/stm8flash Debug stm8-gdb STM8 Debugger for vsCode/Codium","tags":"MITka","url":"vyvoj-stm8-s-opensource-nastroji.html","loc":"vyvoj-stm8-s-opensource-nastroji.html"},{"title":"SÃ­tÄ›","text":"Videa","tags":"SÃTÄ›","url":"site.html","loc":"site.html"},{"title":"MIT","text":"Pro vÃ½uku mikroprocesorovÃ© techniky pouÅ¾Ã­vÃ¡me vÃ½vojovou desku Nucleo- 8S208RB s mikroprocesorem STM8S208RB . Dokumentace CelÃ¡ Å™ada STM8S pouÅ¾Ã­vÃ¡ stejnou sadu periferiÃ­. Jejich popis najdete v reference manuÃ¡lu zde . RÅ¯znÃ© Äipy pak obsahujÃ­ rÅ¯znou sadu tÄ›chto periferiÃ­. Co pÅ™esnÄ› se nachÃ¡zÃ­ na kterÃ©m Äipu (plus dalÅ¡Ã­ specifickÃ© vÄ›ci) lze najÃ­t v datasheetu: STM8S208 zde STM8S103 zde STM8S105 zde PÅ™ehled jednotlivÃ½ch ÄipÅ¯ jednotlivÃ½ch Å™ad rodiny STM8S pak najdete zde: Application Specific Line STM8S Value line STM8S103 /105 STM8S207 /208 NÃ¡vody Michal Dudka pÃ­Å¡e skvÄ›lÃ½ web o programovÃ¡nÃ­ mikrokontrokÃ©rÅ¯: http://elektromys.eu . V sekci STM8 najdete spoustu pro nÃ¡s zajÃ­mavÃ½ch vÄ›cÃ­: Vstupy a vÃ½stupy 1 â€“ zÃ¡klady Vstupy a vÃ½stupy 2 â€“ tlaÄÃ­tko Vstupy a vÃ½stupy 3 â€“ logickÃ© ÃºrovnÄ› Vstupy a vÃ½stupy 4 â€“ PullUp rezistory Vstupy a vÃ½stupy 5 â€“ Open-Drain OvlÃ¡dÃ¡nÃ­ displeje s MAX7219 Clock AlfanumerickÃ© LCD Knihovna milis â€“ \"Multitasking\" StavovÃ½ automat Pro potÅ™eby svojÃ­ vÃ½uky jsem napsal nÃ¡sledujÃ­cÃ­: GenerovÃ¡nÃ­ zvuku â€“ zÃ¡klady ZÃ¡kladnÃ­ pouÅ¾itÃ­ ÄasovaÄe PouÅ¾itÃ­ ÄasovaÄe jako generÃ¡toru PWM UltrazvukovÃ½ mÄ›Å™iÄ vzdÃ¡lenosti pomocÃ­ timeru TIM2 Ze dÃ­lny Michala Dudky najdete pochÃ¡zÃ­ tyto pro nÃ¡s zajÃ­mavÃ© ÄlÃ¡nky: IR senzor I2C â€“ RelativnÄ› jednoduÅ¡e DalÅ¡Ã­ velice cennÃ© informace nejdete v sekcÃ­ch: Elektro RÅ¯znÃ© krÃ¡tkÃ© poznÃ¡mky Projekty Toto by se vÃ¡m mohlo hodit: seznam na TME seznam na LaskArduno PodmÃ­nky a zadÃ¡nÃ­ najdete na Å¡kolnÃ­m drajvu . NÃ¡stroje VÃ½vojovÃ© nÃ¡stroje jsou IMHO nejvÄ›tÅ¡Ã­ slabina platformy STM8 , ale pÅ™i troÅ¡e snahy se to dÃ¡ :) . Co se ale ST povedlo, to je nÃ¡strtoj STM8CubeMX . DoporuÄuji si ho nainstalovat. NenÃ­ nijak klÃ­ÄovÃ½, ale hodÃ­ se. OpenSource nÃ¡stroje nejen pro Linux Celou problematiku jsem zpracoval v samostatnÃ©m nÃ¡vodu: VÃ½voj STM8 s OpenSource nÃ¡stroji . Ve zkratce to vypadÃ¡ takto: KompilÃ¡tor SDCC Jako vÃ½vojovÃ© prostÅ™edÃ­ doporuÄuji VSCodium StarÅ¡Ã­ anglickÃ½ nÃ¡vod s nÄ›kolika mouchama: https://github.com/hbendalibraham/stm8_started NÃ¡stroje pro Widle VÅ¡e velmi hezky zpracoval Michal Dudka na ElektromyÅ¡i . Jako vÃ½vojovÃ© prostÅ™edÃ­ leze pouÅ¾Ã­t STVD s komipilÃ¡torem Cosmic . Oba nÃ¡stroje je moÅ¾nÃ© bezplatnÄ› pouÅ¾Ã­vat, kdyÅ¾ se zaregistrujete. BohuÅ¾el nejsou ani jeden OpenSource . Å ablona pro zaloÅ¾enÃ­ projektu moje Å¡ablona pro vÃ½voj SDCC a GNU Make https://github.com/spseol/start-stm8 vzorovÃ½ projekt Michala Dudky ( STVD ) http://www.elektromys.eu/stm8s208_vzor.rar (pÅ™Ã­padnÄ› zip) http://www.elektromys.eu/stm8s105_vzor.rar (pÅ™Ã­padnÄ› zip) Odkazy http://www.fit.vutbr.cz/~martinek/clang/ http://jaknaprojekty.davidm.cz/ https://www.tutorialspoint.com/cprogramming/ Wikibook Programuje v jazyce C .","tags":"MITka","url":"mit.html","loc":"mit.html"},{"title":"Git","text":"Git najdete na https://git-scm.com/ . OvlÃ¡dÃ¡ se z pÅ™Ã­kazovÃ© Å™Ã¡dky. Pokud touÅ¾Ã­te po nÄ›jakÃ©m grafickÃ©m ovlÃ¡dÃ¡nÃ­ staÄÃ­ si vybrat z dlouhÃ©ho seznamu ten, co se vÃ¡m bude zdÃ¡t nejhezÄÃ­. GitHub mÃ¡ svou vlastnÃ­ grafickou aplikaci . VynikajÃ­cÃ­m zaÄÃ¡tkem s Gitem je volnÄ› Å¡iÅ™itelnÃ¡ kniha Pro Git , ve kterÃ© najdete vÅ¡e potÅ™ebnÃ© v ÄeÅ¡tinÄ›. Lze ÄÃ­st i na webu: prvnÃ­ vydÃ¡nÃ­ â€“ celÃ© v ÄeÅ¡tinÄ› druhÃ© vydÃ¡nÃ­ â€“ nenÃ­ pÅ™eloÅ¾eno celÃ©; mÅ¯Å¾ete se tedy zapojit do pÅ™ekladu . Pro efektivnÃ­ pouÅ¾Ã­vanÃ­ tohoto skvÄ›lÃ©ho nÃ¡stroje vÃ¡m staÄÃ­ pÅ™eÄÃ­st si prvnÃ­ tÅ™i kapitoly . Nenechte se tedy odradit, stojÃ­ to jistÄ› za to. Zde je jeÅ¡tÄ› malÃ½ rychlokurs (pokud nÄ›kdo nenÃ­ spokojen s knihou): Git Instalace gitu VÄ›tvenÃ­ v Gitu IgnorovÃ¡nÃ­ souborÅ¯ SpoluprÃ¡ce a Open source SpoluprÃ¡ce a Git JeÅ¡tÄ› jedna drobnost: pokud se vÃ¡m nechce poÅ™Ã¡d dokola zadÃ¡vat pÅ™i nahrÃ¡vÃ¡nÃ­ svÃ© prÃ¡ce na GitHub uÅ¾ivatelskÃ© jmÃ©no a heslo pouÅ¾ijte ssh klÃ­Äe . K tomu se dobÅ™e hodÃ­ napÅ™Ã­klad putty . Instalace DoporuÄuji pouÅ¾Ã­t Chocolatey choco install git PoÄÃ¡teÄnÃ­ nastavenÃ­ NeÅ¾ budete Git pouÅ¾Ã­vat, je tÅ™eba nakonfigurovat vaÅ¡e jmÃ©no a e-mail. Je to proto, jmÃ©no a e-mail autora je souÄÃ¡stÃ­ kaÅ¾dÃ©ho snÃ­mku â€“ commitu. git config --global user.name \"John Doe\" git config --global user.email john@doe.name Parametr --global Å™Ã­kÃ¡, Å¾e je to nastavenÃ­ pro celÃ½ uÅ¾ivatelskÃ½ ÃºÄet. Pokud ho nepouÅ¾ijete, bude se nastavenÃ­ tÃ½kat jen toho repositÃ¡Å™e, ve kterÃ©m pÅ™Ã­kaz spustÃ­te. SSH Pokud chcete (ano chcete) pouÅ¾Ã­vat nÄ›jakÃ© vzdÃ¡lenÃ© ÃºloÅ¾iÅ¡tÄ› (napÅ™. GitHub nebo GitLab ), je SSH jeden se zpÅ¯sobÅ¯ jak (pohodlnÄ›) pÅ™enÃ¡Å¡et data mezi lokÃ¡lnÃ­m a vzdÃ¡lenÃ½m repositÃ¡Å™em. Nejprve je tÅ™eba si vygenerovat key-pair . ssh-keygen nebo ssh-keygen -t ed25519 BÄ›hem generovÃ¡nÃ­ budete dotazovÃ¡nÃ­ na passphrase. Pokud tuto doplÅˆkovou ochranu nechcete pouÅ¾Ã­t a staÄÃ­ vÃ¡m utajenÃ­ klÃ­Äe, kterÃ½ bude leÅ¾et na vaÅ¡em disku, dejte jen dvakrÃ¡t Enter. PozornÄ› sledujte kam se klÃ­Äe uloÅ¾Ã­. TÅ™eba v Linuxu je to ~/.ssh/id_ed25519 pro tajnÃ½/privÃ¡tnÃ­ klÃ­Ä a ~/.ssh/id_ed25519.pub pro veÅ™ejnÃ½ klÃ­Ä. CelÃ¡ akce konÄÃ­ tÃ­m, Å¾e svÅ¯j veÅ™ejnÃ½ klÃ­Ä â€“ tedy obsah souboru s pÅ™Ã­ponou .pub , uloÅ¾Ã­te do svÃ©ho profilu na GitHub/GitLab: Settings -> SSH and GPG keys . DalÅ¡Ã­ detaily naleznete napÅ™Ã­klad v tomto ÄlÃ¡nku na AbcLinuxu . HTTPS DruhÃ½m, alternativnÃ­m zpÅ¯sobem pÅ™enosu dat je protokol HTTPS . Zde je tÅ™eba pÅ™i kaÅ¾dÃ©m pÅ™enosu zadÃ¡vat jmÃ©no a heslo. Pokud pouÅ¾Ã­vÃ¡te nÄ›jakou klÃ­Äenku pro uklÃ¡dÃ¡nÃ­ hesel mÅ¯Å¾ete to Gitu Å™Ã­ct takto: git config --global credential.helper klicenka_cmd Pokud klÃ­Äenku nepouÅ¾Ã­vÃ¡te nebo chcete, aby vaÅ¡e pÅ™ihlaÅ¡ovacÃ­ Ãºdaje uchovÃ¡val pÅ™Ã­mo Git v neÅ¡ifrovanÃ© podobÄ› , je to tento pÅ™Ã­kaz: git config --global credential.helper store Git se vÃ¡s pak na vaÅ¡e pÅ™ihlaÅ¡ovacÃ­ Ãºdaje zeptÃ¡ jen jednou a uloÅ¾Ã­ se je do souboru ~/.git-credentials . Ten mÅ¯Å¾e vypadat tÅ™eba takto: https://jmeno:personal_token@github.com https://jmeno:heslo_nebo_token@gitlab.com Pokud si mÃ¡ Git pÅ™ihlaÅ¡ovacÃ­ Ãºdaje pamatovat jen doÄasnÄ› nastavÃ­ se .helper na cache . Je jeÅ¡tÄ› dobrÃ© podotknout, Å¾e GitHub neumoÅ¾Åˆuje pÅ™ihlÃ¡Å¡enÃ­ pomocÃ­ hesla: je nutnÃ© si vygenerovat Personal access token . (AÅ¾ ho budete generovat, tak v prÃ¡vech odfajfkujte workflow .) VeÅ™ejnÃ¡ (webovÃ¡) ÃºloÅ¾iÅ¡tÄ› NejznÃ¡mÄ›jÅ¡Ã­ veÅ™ejnÃ¡ ÃºloÅ¾iÅ¡tÄ› pro Git jsou asi tyto: https://github.com https://gitlab.com https://bitbucket.org KromÄ› uklÃ¡danÃ­ repositÃ¡Å™Å¯ zde naleznete i rozmÄ›r sociÃ¡lnÃ­ sÃ­tÄ›. Asi se nedÃ¡ Å™Ã­ct, Å¾e jeden je lepÅ¡Ã­ a druhÃ½ horÅ¡Ã­. KaÅ¾dÃ½ mÃ¡ svÃ¡ pro a proti. Pokusy a hraÄiÄky https://learngitbranching.js.org/ Oh my Git: https://ohmygit.org/","tags":"ProgramovÃ¡nÃ­","url":"git.html","loc":"git.html"},{"title":"VSCode/Codium","text":"V poslednÃ­ dobÄ› se mi jako editor nejvÃ­c osvÄ›dÄil VSCode/Codium. JÃ¡ osobnÄ› sice pouÅ¾Ã­vÃ¡me VIm , ale ve vÃ½uce a se studenty pouÅ¾Ã­vÃ¡me VSCode/Codium. Visual Studio Code je brilantnÃ­ open-source editor z dÃ­lny firmy Microsoft s vestavÄ›nou podporou pro systÃ©m Git . Editor je multiplatformnÃ­, takÅ¾e je jedno jestli pouÅ¾Ã­vÃ¡te MacOS, Linux nebo (nechÃ¡pu proÄ by to nÄ›kdo nÄ›lalâ€¦) Windows. Pokud by vÃ¡m (stejnÄ› jako mnÄ›) vadilo, Å¾e Microsoft do balÃ­Äku s VSCode zabalÃ­ i telemetrii (dÅ™Ã­v se tomu Å™Ã­kalo Å¡pehovÃ¡nÃ­), tak existuje projekt Codium , kterÃ½ tÃ­mto neduhem netrpÃ­. Oba projekty pochÃ¡zÃ­ ze stejnÃ½ch zdrojovÃ½ch kÃ³dÅ¯. LiÅ¡Ã­ se pouze v tom, jak jsou zabaleny. Codium neobsahuje telemetrii a mÃ¡ marketplace nasmÄ›rovanÃ½ troÅ¡ku jinam . Z toho vyplÃ½vÃ¡, Å¾e mohou nastat problÃ©my pÅ™i instalaci nÄ›kterÃ½ch doplÅˆkÅ¯, protoÅ¾e na open-vsx.org nejsou vÅ¡echny doplÅˆky, kterÃ© najdete na oficiÃ¡lnÃ­m maktetplacu a naopak. Pokud se v tÃ©to situaci ocitnete a opravdu moc touÅ¾Ã­te po onom ÃºÅ¾asnÃ©m doplÅˆku, kterÃ½ na open-vsx.org prostÄ› nenÃ­, staÄÃ­ ho z oficiÃ¡lnÃ­m maktetplacu stÃ¡hnout a v Codiu ruÄnÄ› nainstalovat. Instalace V Linuxu zÃ¡visÃ­ instalace hodnÄ› na konkrÃ©tnÃ­ distribuci. NapÅ™Ã­klad na Ubuntu se to prÃ½ dÄ›lÃ¡ takto: sudo apt install snapd sudo snap install codium --classic Nebo mÅ¯Å¾ete pouÅ¾Ã­t napÅ™Ã­klad vscodium-deb-rpm-repo . â€¦ a nebo vÅ¡echno udÄ›lat rÅ¯Äo . NejjednoduÅ¡Å¡Ã­ zpÅ¯sob instalace ve Windows je pomocÃ­ Chocolatey . choco install vscodium choco install vscode Python Pokud si doinstalujete doplnÄ›k ms-python.python ( zde nebo zde ) zÃ­skÃ¡te vÃ½vojovÃ© prostÅ™edÃ­, ve kterÃ©m vÃ¡m s nejvÄ›tÅ¡Ã­ pravdÄ›podobnostÃ­ nebude nic chybÄ›t. Flask/Jinaja2 DalÅ¡Ã­m uÅ¾iteÄnÃ½m doplÅˆkem je Better Jinja ( samuelcolvin.jinjahtml respektive samuelcolvin.jinjahtml ). Zde je dobrÃ© jeÅ¡tÄ› Å™Ã­ct, Å¾e kdyÅ¾ pouÅ¾Ã­vÃ¡te Å¡ablony Jinja pro web, chcete vÄ›tÅ¡inou, aby vÃ¡m fungovalo napovÃ­dÃ¡nÃ­ jak HTML , tak Jinja. Toho docÃ­lÃ­te tak, Å¾e v nastavenÃ­ si pÅ™idÃ¡te do Include Languages : \"jinja-html\": \"html\" Git Git je v Codiu jiÅ¾ integrovÃ¡n v zÃ¡kladnÃ­ podobÄ›. VÅ¡e dalÅ¡Ã­ po Äem byste mohli v tÃ©to oblasti touÅ¾it dostanete instalacÃ­ doplÅˆku Git Extension Pack pinage404.git-extension-pack . Ten v instaluje sadu doplÅˆkÅ¯: GitLens eamodio.gitlens Git Graph mhutchie.git-graph Git Project Manager felipecaputo.git-project-manager Git Web Links reduckted.vscode-gitweblinks CÃ©Äko V souvislosti s jazykem C stojÃ­ za zmÃ­nku alespoÅˆ tyto dva doplÅˆky: C/C++ for Visual Studio Code ms-vscode.cpptools clangd llvm-vs-code-extensions.vscode-clangd respektive llvm-vs-code-extensions.vscode-clangd JÃ¡ pouÅ¾Ã­vÃ¡m ten druhÃ½, ale moÅ¾nÃ¡ si budete chtÃ­t vyzkouÅ¡et a nastavit ten prvnÃ­â€¦ STM8 OpÄ›t stojÃ­ za zmÃ­nku dva doplÅˆky. JÃ¡ mÃ¡m zkuÅ¡enost s tÃ­mto: STM8 Debugger CL .stm8-debug â€¦ ale jistÄ› stojÃ­ za zmÃ­nku i toto: Embedded IDE CL .eide respektive CL .eide","tags":"ProgramovÃ¡nÃ­","url":"vscodecodium.html","loc":"vscodecodium.html"},{"title":"Chocolatey","text":"Chocolatey je sprÃ¡vce balÃ­ÄkÅ¯ pro operaÄnÃ­ systÃ©m windows. DÃ¡ se Å™Ã­ct, Å¾e se snaÅ¾Ã­ o co nejjednoduÅ¡Å¡Ã­ instalaci software. PodobnÃ½ zpÅ¯sob instalace je znÃ¡m z linuxovÃ½ch distribucÃ­. JÃ¡ tento zpÅ¯sob instalace doporuÄuji a zatÃ­m se mi jen a jen osvÄ›dÄil. NemusÃ­te SW nikde dlouze hledat instalovat atd. NapÅ™Ã­klad instalaci VSCodia a Pythonu zajistÃ­ tyto dva pÅ™Ã­kazy: choco install vscodium choco install python Pokud vÃ¡s zajÃ­mÃ¡ co vÅ¡echno v repositÃ¡Å™i balÃ­ÄkÅ¯ najdete kouknÄ›te se na https://community.chocolatey.org/packages . Instalace chocolatey CelÃ½ projekt na jdete na strÃ¡nce https://chocolatey.org . Pokyny jak to celÃ¡ nainstalovat potom na https://chocolatey.org/install . KdyÅ¾ to hodnÄ› zjednoduÅ¡Ã­m: PomocÃ­ Win+X a spustÃ­te PowerShell jako AdministrÃ¡tor a zadÃ¡te pÅ™Ã­kaz: Set - ExecutionPolicy Bypass - Scope Process - Force ; [ System . Net . ServicePointManager ]:: SecurityProtocol = [ System . Net . ServicePointManager ]:: SecurityProtocol - bor 3072 ; iex (( New - Object System . Net . WebClient ) . DownloadString ( 'https://community.chocolatey.org/install.ps1' )) Pokud chcete nÄ›jakÃ© klikÃ¡tko tak ho doinstalujete pÅ™Ã­kazem: choco install chocolateygui Python Pokud pracujete s Pythonem staÄÃ­ nainstalovat VSCodium nebo VScodeâ€¦ a Python a taky asi Git choco install vscodium choco install vscode choco install python choco install git STM8 Pokud pracujete v MIT s STM8 nainstalujete VSCodium nebo VScodeâ€¦ a Git a GNU Make a OpenOCD. No a GCC a Python se taky docela hodÃ­. choco install vscodium choco install vscode choco install git choco install make choco install openocd choco install mingw choco install python","tags":"ProgramovÃ¡nÃ­","url":"chocolatey.html","loc":"chocolatey.html"},{"title":"pip","text":"pip je instalÃ¡tor balÃ­ÄkÅ¯ pro Python. KromÄ› toho, Å¾e umÃ­ nainstalovat balÃ­Äek, tak umÃ­ nainstalovat i vÅ¡echny jeho zÃ¡vislosti a umÃ­ tyto balÃ­Äky spravovat. To znamenÃ¡, Å¾e kromÄ› akce install existuje i akce unistall nebo list . NÄ›kdy se stane, Å¾e pÅ™i zadÃ¡nÃ­ pÅ™Ã­kazu pip obdrÅ¾Ã­te pouze hlÃ¡Å¡enÃ­, Å¾e pÅ™Ã­kaz neexistuje. BuÄ jste pÅ™i instalaci nezadali, Å¾e se mÃ¡ nainstalovat, nebo nejsou pÅ™Ã­sluÅ¡nÃ© cesty obsaÅ¾eny v promÄ›nnÃ© PATH . V obou dvou pÅ™Ã­padech doporuÄuji znovu spustit instalÃ¡tor a zaÅ¡krtnou pÅ™Ã­sluÅ¡nÃ¡ polÃ­Äka. V Linuxu potom staÄÃ­ nÄ›co jako: apt install python3-pip python3-venv Notice JeÅ¡tÄ› jedna poznÃ¡nka k Linuxu: V LinuxovÃ½ch distribucÃ­ch bÃ½vÃ¡ Python vÄ›tÅ¡inou uÅ¾ nainstalovÃ¡n â€“ a to dokonce dvakrÃ¡t. PÅ™Ã­kazem python spustÃ­te Python2 a pÅ™Ã­kazem python3 spustÃ­te Python3 . ObdobnÄ› to platÃ­ pro pÅ™Ã­kaz pip a pip3 . TakÃ© se mÅ¯Å¾e stÃ¡t, Å¾e modul pip nainstalovÃ¡n je, ale pÅ™Ã­kaz pip ne. Pro tyto pÅ™Ã­pady a takÃ© pro vysvÄ›tlenÃ­ nÄ›kterÃ½ch nejasnostÃ­: mÃ­sto pÅ™Ã­kazu pip mÅ¯Å¾ete zadat delÅ¡Ã­ pÅ™Ã­kaz python -m pip pÅ™Ã­padnÄ›â€¦ python3 -m pip celÃ½ pÅ™Ã­kaz mÅ¯Å¾e tedy vypadat napÅ™Ã­klad takto: python3 -m pip install -U --user flask namÃ­stoâ€¦ pip install -U --user flask JeÅ¡tÄ› neÅ¾ se dÃ¡te do instalace zvaÅ¾te zda instalovat pro celÃ½ systÃ©m, virtuÃ¡lnÃ­ prostÅ™edÃ­ nebo jen pro jednoho uÅ¾ivatele? DÃ¡le je dobrÃ© si vÅ¡Ã­mat Å¾lutÃ½ch varovnÃ½ch hlÃ¡Å¡enÃ­ a Å™Ã­dit se jejich radou: Warning WARNING : You are using pip version 21.2.4; however, version 21.3.1 is available. You should consider upgrading via the â€˜/usr/bin/python3.9 -m pip install â€“upgrade pip' command. HodnÄ› zÃ¡sadnÃ­ je chybovÃ© hlÃ¡Å¡enÃ­, kterÃ© mÅ¯Å¾e vypadat napÅ™Ã­klad takto: Warning WARNING : The scripts pip, pip3 and pip3.9 are installed in â€˜/home/marek/.local/bin' which is not on PATH . Consider adding this directory to PATH or, if you prefer to suppress this warning, use â€“no-warn-script-location. SpustitelnÃ½ skript se nainstaloval tam, kde ho vÃ¡Å¡ shell nenajde. Je tÅ™eba toto mÃ­sto pÅ™idat do promÄ›nnÃ© PATH . Ve Windows to musÃ­te naklikat, v Linuxu je to soubor ~/.profile nebo ~/.zprofile (podle toho, jakÃ½ pouÅ¾Ã­vÃ¡te shell). PATH=~.local/bin:$PATH GlobÃ¡lnÃ­ instalace Pokud budete balÃ­Äek instalovat globÃ¡lnÄ› pro celÃ½ systÃ©m potÅ™ebujete administrÃ¡torskÃ¡ prÃ¡va. Je tÅ™eba se ujistit, Å¾e si tÃ­m nepokazÃ­te nÄ›co, co uÅ¾ nainstalovanÃ© mÃ¡te. Mohlo by se stÃ¡t, Å¾e mÃ¡te nainstalovanou nÄ›jakou aplikaci, kterÃ¡ potÅ™ebuje knihovnu verze x.y a vy nynÃ­ nainstalujete tu stejnou knihovnu verze y.z . Na Windows toto vÄ›tÅ¡inou (nÄ›kdy tedy ano) Å™eÅ¡it nemusÃ­te, na Linuxu typicky ano. (Na druhou stranu v Linuxu mÅ¯Å¾ete spoustu knihoven nainstalovat i bez pip u z repositÃ¡Å™Å¯ vaÅ¡Ã­ distribuce: apt install pytho3-flask .) TakÅ¾e spustÃ­te si pÅ™Ã­kazovÃ½ Å™Ã¡dek a jako superuÅ¾ivatel a zadÃ¡te nÄ›co jako: pip install flask pip install pyglet pip install jmeno_balicku UÅ¾ivatelskÃ¡ instalace K uÅ¾ivatelskÃ© instalaci nepotÅ™ebujete administrÃ¡torskÃ¡ prÃ¡va, protoÅ¾e balÃ­Äky se instalujÃ­ do vaÅ¡eho domovskÃ©ho adresÃ¡Å™e (profilu). Na Linuxu je to typicky adresÃ¡Å™ ~/.local/lib/python3.X pro balÃ­Äky a ~/.local/bin pro spustitelnÃ© skripty. pip install --user flask pip install --user pyglet Pokud uÅ¾ je danÃ½ balÃ­Äek nainstalovÃ¡n v systÃ©mu a vy chcete novÄ›jÅ¡Ã­ verzi jen do uÅ¾ivatelskÃ©ho profilu, je tÅ™eba to vynutit parametrem -U , kterÃ½ Å™Ã­kÃ¡, Å¾e mÃ¡ balÃ­Äek povÃ½Å¡it/instalovat na nejnovÄ›jÅ¡Ã­ dostupnou verzi. pip install -U --user flask VirtuÃ¡lnÃ­ prostÅ™edÃ­? VirtuÃ¡lnÃ­ prostÅ™edÃ­ umoÅ¾Åˆuje mÃ­t instalaci Pythonu (jakoby) oddÄ›lenou od instalace v systÃ©mu. Pro kaÅ¾dÃ½ projekt si vytvoÅ™Ã­te vlastnÃ­ virtuÃ¡lnÃ­ prostÅ™edÃ­ a do nÄ›j instalujete potÅ™ebnÃ© balÃ­Äky v potÅ™ebnÃ© verzi. OstatnÃ­ systÃ©m a ostatnÃ­ balÃ­Äky si toho vÅ¯bec nevÅ¡imnou. VytvoÅ™enÃ­ Nejprve je tÅ™eba virtuÃ¡lnÃ­ prostÅ™edÃ­ vytvoÅ™it. NapÅ™. do adresÃ¡Å™e .venv-projekt1 : python3 -m venv .venv-projekt1 Aktivace PÅ™ed zaÄÃ¡tkem prÃ¡ce je tÅ™eba vÅ¾dy prostÅ™edÃ­ aktivovat. V Linuxu: source .venv-projekt1/bin/activate Ve Windows .venv-projekt1 \\ Scripts \\ activate.bat PrÃ¡ce ProstÅ™edÃ­ je aktivovÃ¡no a pokud tu pustÃ­te Python bude vidÄ›t jen to, co je zahrnuto v tomto virtuÃ¡lnÃ­m prostÅ™edÃ­. Pokud pustÃ­te pip , bude instalovat do tohoto prostÅ™edÃ­. pip install -U pip pip install flask Deaktivace deactivate Aktualizace BalÃ­ÄkÅ¯ Aktualizace balÃ­ÄkÅ¯ na nejnovÄ›jÅ¡Ã­ dostupnou verzi provedete parametrem -U . pip install -U pip pip install -U flask nebo pip install --user -U pip pip install --user -U pyglet","tags":"ProgramovÃ¡nÃ­","url":"pip.html","loc":"pip.html"},{"title":"DBI","text":"Python Programujeme v jazyce Python, proto zde platÃ­ prakticky vÅ¡e, co pro PRG . Instalace knihoven Budeme potÅ™ebovat modul Flask . Jeho instalaci zajistÃ­ pip . DoporuÄuji pÅ™eÄÃ­st si celÃ½ post vÄ›novanÃ½ pipu . Ve Windows to mÅ¯Å¾e vypadat tÅ™eba takto: pip install flask V Linuxu spÃ­Å¡ takto: pip3 install --user flask Git Pro sdÃ­lenÃ­ prÃ¡ce a odevzdÃ¡vÃ¡nÃ­ domÃ¡cÃ­ch ÃºkolÅ¯ pouÅ¾Ã­vÃ¡me systÃ©m Git a server GitHub . StojÃ­ takÃ© za to, zmÃ­nit se o GitHub programu pro vzdÄ›lÃ¡vÃ¡nÃ­ . Gitu se vÄ›nuji v samostatnÃ©m postu . Dokumentace Python: https://docs.python.org/ Flask: https://flask.palletsprojects.com/ Quickstart Message Flashing Incoming Request Data Patterns Jinja2: https://jinja.palletsprojects.com/templates/","tags":"ProgramovÃ¡nÃ­","url":"dbi.html","loc":"dbi.html"},{"title":"PRG","text":"TahÃ¡k VytvoÅ™il jsem tahÃ¡k, kde je z Pythonu vÃ­ce-mÃ©nÄ› vÅ¡e, co byste mÄ›li mÃ­t v pohotovostnÃ­ vÃ½bavÄ›. Tyto texty lze ÄÃ­st buÄ na Githubu nebo nbvieweru . Instalace nÃ¡vod zde . KlÃ­ÄovÃ© je nainstalovat i pip a pÅ™idat si Python do promÄ›nnÃ© prostÅ™edÃ­ PATH : Add Python to PATH , add Python to enviroment variables . Editor ZÃ¡kladnÃ­ instalace Pythonu uÅ¾ sama v sobÄ› obsahuje jednoduchÃ© vÃ½vojovÃ© prostÅ™edÃ­ a jednoduchou interaktivnÃ­ konzolu IDLE . Toto prostÅ™edÃ­ je pomÄ›rnÄ› jednoduchÃ©, ale rozhodnÄ› se nedÃ¡ Å™Ã­ct, Å¾e by se v nÄ›m nedalo pracovat. Existuje ale celÃ¡ Å™ada hezÄÃ­ch a propracovanÄ›jÅ¡Ã­ch vÃ½vojovÃ½ch prostÅ™edÃ­ . JÃ¡ doporuÄuji VSCode/Codium . Git Pro sdÃ­lenÃ­ prÃ¡ce a odevzdÃ¡vÃ¡nÃ­ domÃ¡cÃ­ch ÃºkolÅ¯ pouÅ¾Ã­vÃ¡me systÃ©m Git a server GitHub . StojÃ­ takÃ© za to, zmÃ­nit se o GitHub programu pro vzdÄ›lÃ¡vÃ¡nÃ­ . Gitu se vÄ›nuji v samostatnÃ©m postu Git . Dokumentace Naprostou vÄ›tÅ¡inu vÅ¡ech vaÅ¡ich dotazÅ¯ vyÅ™eÅ¡Ã­ KaÄer prostÃ½m dotazem . NicmÃ©nÄ› povaÅ¾uji za dobrÃ© zmÃ­nit, Å¾e Python mÃ¡ svou vlastnÃ­ â€“ docela dobrou â€“ dokumentaci . Knihovny Knihovny se nejlÃ©pe instalujÃ­ pomocÃ­ pip . TÃ©matu se vÄ›nuji v samostatnÃ©m postu Pip .","tags":"ProgramovÃ¡nÃ­","url":"prg.html","loc":"prg.html"},{"title":"PSK","text":"Linux ZÃ¡klady poÄÃ­taÄovÃ½ch sÃ­tÃ­","tags":"PSKÃ¡Äko","url":"psk.html","loc":"psk.html"},{"title":"UltrazvukovÃ½ mÄ›Å™iÄ vzdÃ¡lenosti pomocÃ­ timeru TIM2","text":"zde se Äasem objevÃ­ zajÃ­mavÃ½ text :) ZdrojovÃ© kÃ³dy KompletnÃ­ zdrojovÃ© kÃ³dy naleznete v repositÃ¡Å™i na GitHubu: zÃ¡kladnÃ­ princip â€“ vÄ›tev princip main.c Å™eÅ¡enÃ­ typu StavovÃ½ automat â€“ vÄ›tev stav_automat main.c","tags":"MITka","url":"ultrazvukovy-meric-vzdalenosti-pomoci-timeru-tim2.html","loc":"ultrazvukovy-meric-vzdalenosti-pomoci-timeru-tim2.html"},{"title":"PouÅ¾itÃ­ ÄasovaÄe jako generÃ¡toru PWM","text":"TIM2 a TIM3 zde se Äasem objevÃ­ zajÃ­mavÃ½ text :) ZdrojovÃ© kÃ³dy KompletnÃ­ zdrojovÃ© kÃ³dy naleznete v repositÃ¡Å™i na GitHubu: RGB LED â€“ RGB_LED main.c","tags":"MITka","url":"pouziti-casovace-jako-generatoru-pwm.html","loc":"pouziti-casovace-jako-generatoru-pwm.html"},{"title":"GenerovÃ¡nÃ­ zvuku â€” zÃ¡klady","text":"Zvuk je jak znÃ¡mo mechanickÃ© vlnÄ›nÃ­. Pro jeho vyloudÄ›nÃ­ tedy potÅ™ebujeme nÄ›jakÃ½ \"vlniÄ\" â€“ tedy elektro-akustickÃ½ mÄ›niÄ. NejjednoduÅ¡Å¡Ã­ je asi pouÅ¾Ã­t piezo mÄ›niÄ. Ten mÃ¡ ovÅ¡em ponÄ›kud omezenÃ½ frekvenÄnÃ­ rozsah. Jeho frekvenÄnÃ­ charakteristika mÅ¯Å¾e vypadat napÅ™Ã­klad takto: (Mimochodem prÃ½ existuje nÄ›jakÃ½ vÃ½zkum, podle kterÃ©ho optimÃ¡lnÃ­ frekvence pro budÃ­k je 100 Hz; nebo to bylo 300 Hz? ProstÄ› pomÄ›rnÄ› nÃ­zkÃ½ kmitoÄet. Ale levnÃ© bezporuchovÃ© piezo-mÄ›niÄe takto nÃ­zko prostÄ› nejdou. Tak na nÃ¡s ty budÃ­ky pÃ­skajÃ­ a pÃ­pajÃ­ a my vstÃ¡vÃ¡me potom naÅ¡tvanÃ­.) DalÅ¡Ã­ moÅ¾nostÃ­ je pouÅ¾Ã­t reproduktorek. V tomto pÅ™Ã­padÄ› je tÅ™eba posÃ­lit vÃ½stup tranzistorem. ZapojenÃ­ tedy mÅ¯Å¾e vypadat napÅ™Ã­klad takto: Tranzistor je ve spÃ­nacÃ­m reÅ¾imu a membrÃ¡na reproduktoru mÃ¡ pouze dvÄ› polohy. Tedy klidovou polohu (bez proudu) nebo vÃ½chylku odpovÃ­dajÃ­cÃ­ kladnÃ©mu proudu. Do vÃ½chylky odpovÃ­dajÃ­cÃ­ zÃ¡pornÃ©mu proudu se membrÃ¡na nedostane, protoÅ¾e proud protÃ©kÃ¡ vÅ¾dy jednÃ­m smÄ›rem. Dioda D1 vybÃ­jÃ­ cÃ­vku reproduktoru, pÅ™i sestupnÃ© hranÄ›. Program, kterÃ½ nÃ¡m vyloudÃ­ frekvenci \\(500\\,\\mathrm{Hz}\\) mÅ¯Å¾e vypadat napÅ™Ã­klad takto. Perioda je \\(2\\,\\mathrm{ms}\\) . PÅ¯l periody tedy \\(1\\,\\mathrm{ms}\\) . void main ( void ) { init (); while ( 1 ) { PZ_UP ; delay_ms ( 1 ); PZ_DOWN ; delay_ms ( 1 ); } } Pokud chci jen pÃ­pnout a potÃ© nechat chvilku ticho jednoduÅ¡e nebudu cviÄit s membrÃ¡nou do nekoneÄna, ale pouze nÄ›kolikrÃ¡t ( \\(20 \\cdot 2\\,\\mathrm{ms}\\) ) a pak nechÃ¡m chvilku ticho. void main () { init (); uint16_t i ; while ( 1 ) { for ( i = 0 ; i < 20 ; ++ i ) { PZ_UP ; delay_ms ( 1 ); PZ_DOWN ; delay_ms ( 1 ); } delay_ms ( 60 ); } } Tento zpÅ¯sob prÃ¡ce je ale blokujÃ­cÃ­, protoÅ¾e se poÅ™Ã¡d jen ÄekÃ¡. Mikroprocesor vlastnÄ› poÅ™Ã¡dnÄ› nemÅ¯Å¾e dÄ›lat nic jinÃ©ho. Proto pouÅ¾ijeme multitasking 1 a stavovÃ½ automat . void main ( void ) { uint32_t timeL = 0 ; uint32_t lastTime = 0 ; uint16_t count = 0 ; enum state_of { STATE_PAUSE , STATE_UP , STATE_DOWN } state = STATE_UP ; uint32_t time = 0 ; init (); while ( 1 ) { switch ( state ) { case STATE_PAUSE : PZ_DOWN ; // v pauze dÃ¡m reprÃ¡Äek do klodovÃ©ho stavu if ( milis () - lastTime > 4321 ) { lastTime = milis (); state = STATE_UP ; } break ; case STATE_UP : PZ_UP ; if ( milis () - lastTime >= 4 ) { lastTime = milis (); state = STATE_DOWN ; } break ; case STATE_DOWN : PZ_DOWN ; if ( count >= 10 ) { count = 0 ; lastTime = milis (); state = STATE_PAUSE ; break ; } if ( milis () - lastTime >= 4 ) { lastTime = milis (); count ++ ; state = STATE_UP ; } break ; default : state = STATE_PAUSE ; } if ( milis () - timeL > 500 ) { timeL = milis (); LED_REVERSE ; } } } ZdrojovÃ© kÃ³dy KompletnÃ­ zdrojovÃ© kÃ³dy naleznete v repositÃ¡Å™i na GitHubu: https://github.com/spseol/ STM8 -zvuk-zaklad knihovna milis â†©","tags":"MITka","url":"generovani-zvuku-zaklady.html","loc":"generovani-zvuku-zaklady.html"},{"title":"ZÃ¡kladnÃ­ pouÅ¾itÃ­ ÄasovaÄe","text":"NÃ¡Å¡ STM8S208RB mÃ¡ na tÄ›le celkem ÄtyÅ™i ÄasovaÄe: TIM1 , TIM2 , TIM3 a TIM4 . TIM4 TIM4 je nejjednoduÅ¡Å¡Ã­. ÄŒÃ­taÄ je 8-bitovÃ½ a pÅ™eddÄ›liÄka umoÅ¾Åˆuje dÄ›lit kmitoÄet /1, /2, /4, /8, /16, /32, /64 a /128. Auto-reload register Å™Ã­kÃ¡ kam aÅ¾ se bude ÄÃ­tat â€“ tedy nastavuje strop ÄasovaÄe. NastavenÃ­ se dÄ›je pomocÃ­ funkce TIM4_TimeBaseInit(PRESCALER, PERIOD) , kde PRESCALER je makro, pro nastavenÃ­ dÄ›liÄky a PERIOD je 8-bitovÃ© ÄÃ­slo. TIM4_TimeBaseInit ( TIM4_PRESCALER_128 , 125 - 1 ); TakÅ¾e pokud mÃ¡me nastaven kmitoÄet na 16MHz znamenÃ¡ to Å¾e ÄÃ­taÄ ÄÃ­tÃ¡ do hodnoty 125 (respektive 124 protoÅ¾e ÄÃ­tÃ¡me od nuly) s frekvencÃ­ 16MHz/128 == 125 kHz . ZnamenÃ¡ to tedy, Å¾e kaÅ¾dou milisekundu dojde k auto-reloadu a je vyvolÃ¡no pÅ™eruÅ¡enÃ­ od ÄasovaÄe TIM4 . Aby vÅ¡e fungovalo musÃ­me: povolit TIM4 povolit pÅ™eruÅ¡enÃ­ od TIM4 globÃ¡lnÄ› povolit pÅ™eruÅ¡enÃ­ napsat tÄ›lo obsluÅ¾nÃ© rutiny pÅ™eruÅ¡enÃ­. void setup ( void ) { TIM4_Cmd ( ENABLE ); // povolÃ­ TIM4 TIM4_ITConfig ( TIM4_IT_UPDATE , ENABLE ); // povolÃ­ pÅ™eruÅ¡enÃ­ od TIM4 enableInterrupts (); // globÃ¡lnÄ› povolÃ­ pÅ™eruÅ¡enÃ­ ...... } Rutina pÅ™eruÅ¡enÃ­ se standardnÄ› nachÃ¡zÃ­ v souboru stm8_it.c . StaÄÃ­ ji najÃ­t pÅ™epsat. Pokud potÅ™ebujete v rutinÄ› pÅ™eruÅ¡enÃ­ pracovat s promÄ›nnou definovanou v main.c (coÅ¾ je myslÃ­m tÃ©mÄ›Å™ vÅ¾dy) je tÅ™eba tuto promÄ›nnou oznaÄit direktivou extern nebo rutinu pÅ™esunout pÅ™Ã­mo do souboru main.c . VÃ­ce o tom se doÄtete v postu Kompilace a knihovny . /*--- rutina obsluhy pÅ™eruÅ¡enÃ­ ---*/ INTERRUPT_HANDLER ( TIM4_UPD_OVF_IRQHandler , 23 ) { TIM4_ClearFlag ( TIM4_FLAG_UPDATE ); // vymaÅ¾u vlajku signalizujÃ­cÃ­ pÅ™eruÅ¡enÃ­ miliseconds ++ ; // udÄ›lÃ¡m co je tÅ™eba.... } VÅ¡imnÄ›te si prosÃ­m, Å¾e prvnÃ­, co se v rutinÄ› pÅ™eruÅ¡enÃ­ dÄ›lÃ¡, je, Å¾e se vymaÅ¾e vlajka , kterÃ¡ oznaÄuje, Å¾e k pÅ™eruÅ¡enÃ­ doÅ¡lo. Tento kÃ³d je napÅ™Ã­klad pouÅ¾ito v knihovnÄ› milis , kterÃ¡ umoÅ¾Åˆuje zjistit poÄet milisekund uplynulÃ½ch od \"spuÅ¡tÄ›nÃ­ programu\". TIM2 a TIM3 TIM2 a TIM3 je trochu sloÅ¾itÄ›jÅ¡Ã­, ale zde ukÃ¡Å¾eme jen jeho zÃ¡kladnÃ­ pouÅ¾itÃ­. ( PWM nechÃ¡me na samostatnÃ½ post: PouÅ¾itÃ­ ÄasovaÄe jako generÃ¡toru PWM ) TIM2 /3 je 16 bitovÃ½ â€“ mÅ¯Å¾e tedy ÄÃ­tat do 65535 a pÅ™eddÄ›liÄka umoÅ¾Åˆuje dÄ›lit /1, /2, /4, /8, /16, /32, /64, /128, /256, /512, /1024, /2048, /4096, /8192, /16384 a /32768. TakÅ¾e napÅ™Ã­klad pokud vytvÃ¡Å™Ã­me cokoli, co pracuje s Äasem a potÅ™ebujeme spustit urÄitÃ½ kÃ³d vÅ¾dy pÅ™esnÄ› v intervalu \\(1\\,\\mathrm{s}\\) , mÅ¯Å¾e inicializace ÄasovaÄe vypadat napÅ™Ã­klad takto: /*---- TIM2 setup ---------*/ TIM2_TimeBaseInit ( TIM2_PRESCALER_512 , 31250 - 1 ); // 16MHz/512/31250 == 1Hz TIM2_Cmd ( ENABLE ); // povolÃ­ TIM2 TIM2_ITConfig ( TIM2_IT_UPDATE , ENABLE ); // povolÃ­ pÅ™eruÅ¡enÃ­ od TIM2 enableInterrupts (); // globÃ¡lnÄ› povolÃ­ pÅ™eruÅ¡enÃ­ nastavenÃ­ TIM3 je analogickÃ©: /*---- TIM3 setup ---------*/ TIM3_TimeBaseInit ( TIM3_PRESCALER_16 , 12345 - 1 ); // ~81Hz TIM3_ITConfig ( TIM3_IT_UPDATE , ENABLE ); TIM3_Cmd ( ENABLE ); No a jeÅ¡tÄ› rutiny pÅ™eruÅ¡enÃ­â€¦ OpÄ›t platÃ­, Å¾e rutiny pÅ™eruÅ¡enÃ­ buÄ nechÃ¡me v souboru stm8_it.c a promÄ›nnÃ© oznaÄÃ­me pomocÃ­ direktivy extern nebo si rutiny pÅ™esuneme do modulu/souboru ve kterÃ©m je promÄ›nnÃ¡ definovÃ¡na . INTERRUPT_HANDLER ( TIM2_UPD_OVF_BRK_IRQHandler , 13 ) { TIM2_ClearFlag ( TIM2_FLAG_UPDATE ); // vymaÅ¾u vlaku signalizujÃ­cÃ­ udelam_neco_zajimaveho (); sec ++ ; a_jeste_neco_jineho (); } INTERRUPT_HANDLER ( TIM3_UPD_OVF_BRK_IRQHandler , 15 ) { TIM3_ClearFlag ( TIM3_FLAG_UPDATE ); LED_REVERSE ( G ); } ZdrojovÃ© kÃ³dy KompletnÃ­ zdrojovÃ© kÃ³dy naleznete v repositÃ¡Å™i na GitHubu: https://github.com/spseol/ STM8 - TIM23 -zaklad","tags":"MITka","url":"zakladni-pouziti-casovace.html","loc":"zakladni-pouziti-casovace.html"},{"title":"OddÄ›lenÃ¡ kompilace a vlastnÃ­ knihovny","text":"ahoj aaa aaa bbb dfjdk konec","tags":"MITka","url":"oddelena-kompilace-a-vlastni-knihovny.html","loc":"oddelena-kompilace-a-vlastni-knihovny.html"}]};