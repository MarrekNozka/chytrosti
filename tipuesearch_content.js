var tipuesearch = {"pages":[{"title":"Chyba ğŸ›","text":"NaÅ¡li jste chybu? Nebo pÅ™eklep? Budu velmi rÃ¡d, kdyÅ¾ mÄ› na to upozornÃ­te. VÅ¡echny zdrojovÃ© texty tohoto webu jsou v repositÃ¡Å™i na GitHubu . NejjednoduÅ¡Å¡Ã­ zpÅ¯sob jak nahlÃ¡sit chybu je zaloÅ¾it new issue . Pokud se vÃ¡m chce, mÅ¯Å¾eteâ€¦ forknout repositÃ¡Å™i opravit chybu udÄ›lat pull request DÃ­ky :-)","tags":"pages","url":"https://chytrosti.marrek.cz/pages/chyba.html","loc":"https://chytrosti.marrek.cz/pages/chyba.html"},{"title":"O mnÄ›","text":"NachÃ¡zÃ­te se na webovÃ½ch strÃ¡nkÃ¡ch jednoho Å¡Ã­lenÃ©ho uÄitele z VOÅ  a SPÅ E Olomouc . Tyto strÃ¡nky jsou urÄeny pro podporu mojÃ­ vÃ½uky. KaÅ¾dÃ© tÃ©ma, kterÃ© aktuÃ¡lnÄ› vyuÄuji, tady mÃ¡ svou strÃ¡nku. NÄ›kterÃ© strÃ¡nky podÃ¡vajÃ­ souhrnnÃ© informace, nÄ›kterÃ© jsou jen sbÃ­rkou odkazÅ¯ na jinÃ¡ mÃ­sta na internetu. Pokud vÃ¡m tu nÄ›co chybÃ­, napiÅ¡te mi. Pokud najdete chybu, napiÅ¡te mi. Motto Nikdo nevÄ›dÄ›l, odkud pÅ™iÅ¡li, ale najednou byli v Lese: Klokanice a KlokÃ¡nek. KdyÅ¾ se PÃº zeptal KryÅ¡tÅ¯fka Robina: â€Jak se sem dostali?\", KryÅ¡tÅ¯fek Robin Å™ekl: â€ObvyklÃ½m zpÅ¯sobem, jestli vÃ­Å¡, jak to myslÃ­m, PÃº,\" a PÃº, kterÃ½ to nevÄ›dÄ›l, Å™ekl: â€Aha!\" Pak dvakrÃ¡t kÃ½vl hlavou a Å™ekl: â€ObvyklÃ½m zpÅ¯sobem. Ach tak!\" Marek NoÅ¾ka","tags":"pages","url":"https://chytrosti.marrek.cz/pages/o-mne.html","loc":"https://chytrosti.marrek.cz/pages/o-mne.html"},{"title":"DBI","text":"Python Programujeme v jazyce Python, proto zde platÃ­ prakticky vÅ¡e, co pro PRG . Instalace knihoven Budeme potÅ™ebovat modul Flask . Jeho instalaci zajistÃ­ pip . DoporuÄuji pÅ™eÄÃ­st si celÃ½ post vÄ›novanÃ½ pipu . Ve Windows to mÅ¯Å¾e vypadat tÅ™eba takto: 1 pip install flask V Linuxu spÃ­Å¡ takto: 1 pip3 install --user flask Git Pro sdÃ­lenÃ­ prÃ¡ce a odevzdÃ¡vÃ¡nÃ­ domÃ¡cÃ­ch ÃºkolÅ¯ pouÅ¾Ã­vÃ¡me systÃ©m Git a server GitHub . StojÃ­ takÃ© za to, zmÃ­nit se o GitHub programu pro vzdÄ›lÃ¡vÃ¡nÃ­ . Gitu se vÄ›nuji v samostatnÃ©m postu . Dokumentace Python: https://docs.python.org/ Flask: https://flask.palletsprojects.com/ Quickstart Message Flashing Incoming Request Data Patterns Jinja2: https://jinja.palletsprojects.com/templates/","tags":"ProgramovÃ¡nÃ­","url":"https://chytrosti.marrek.cz/dbi.html","loc":"https://chytrosti.marrek.cz/dbi.html"},{"title":"PRG","text":"TahÃ¡k VytvoÅ™il jsem tahÃ¡k, kde je z Pythonu vÃ­ce-mÃ©nÄ› vÅ¡e, co byste mÄ›li mÃ­t v pohotovostnÃ­ vÃ½bavÄ›. Tyto texty lze ÄÃ­st buÄ na Githubu nebo nbvieweru . Instalace nÃ¡vod zde . KlÃ­ÄovÃ© je nainstalovat i pip a pÅ™idat si Python do promÄ›nnÃ© prostÅ™edÃ­ PATH : Add Python to PATH , add Python to enviroment variables . Editor ZÃ¡kladnÃ­ instalace Pythonu uÅ¾ sama v sobÄ› obsahuje jednoduchÃ© vÃ½vojovÃ© prostÅ™edÃ­ a jednoduchou interaktivnÃ­ konzolu IDLE . Toto prostÅ™edÃ­ je pomÄ›rnÄ› jednoduchÃ©, ale rozhodnÄ› se nedÃ¡ Å™Ã­ct, Å¾e by se v nÄ›m nedalo pracovat. Existuje ale celÃ¡ Å™ada hezÄÃ­ch a propracovanÄ›jÅ¡Ã­ch vÃ½vojovÃ½ch prostÅ™edÃ­ . JÃ¡ doporuÄuji VSCode/Codium . Git Pro sdÃ­lenÃ­ prÃ¡ce a odevzdÃ¡vÃ¡nÃ­ domÃ¡cÃ­ch ÃºkolÅ¯ pouÅ¾Ã­vÃ¡me systÃ©m Git a server GitHub . StojÃ­ takÃ© za to, zmÃ­nit se o GitHub programu pro vzdÄ›lÃ¡vÃ¡nÃ­ . Gitu se vÄ›nuji v samostatnÃ©m postu Git . Dokumentace Naprostou vÄ›tÅ¡inu vÅ¡ech vaÅ¡ich dotazÅ¯ vyÅ™eÅ¡Ã­ KaÄer prostÃ½m dotazem . NicmÃ©nÄ› povaÅ¾uji za dobrÃ© zmÃ­nit, Å¾e Python mÃ¡ svou vlastnÃ­ â€“ docela dobrou â€“ dokumentaci . Knihovny Knihovny se nejlÃ©pe instalujÃ­ pomocÃ­ pip . TÃ©matu se vÄ›nuji v samostatnÃ©m postu Pip .","tags":"ProgramovÃ¡nÃ­","url":"https://chytrosti.marrek.cz/prg.html","loc":"https://chytrosti.marrek.cz/prg.html"},{"title":"MIT","text":"Pro vÃ½uku mikroprocesorovÃ© techniky pouÅ¾Ã­vÃ¡me vÃ½vojovou desku Nucleo- 8S208RB s mikroprocesorem STM8S208RB . Dokumentace CelÃ¡ Å™ada STM8S pouÅ¾Ã­vÃ¡ stejnou sadu periferiÃ­. Jejich popis najdete v reference manuÃ¡lu zde . RÅ¯znÃ© Äipy pak obsahujÃ­ rÅ¯znou sadu tÄ›chto periferiÃ­. Co pÅ™esnÄ› se nachÃ¡zÃ­ na kterÃ©m Äipu (plus dalÅ¡Ã­ specifickÃ© vÄ›ci) lze najÃ­t v datasheetu: STM8S208 zde STM8S103 zde STM8S105 zde PÅ™ehled jednotlivÃ½ch ÄipÅ¯ jednotlivÃ½ch Å™ad rodiny STM8S pak najdete zde: Application Specific Line STM8S Value line STM8S103 /105 STM8S207 /208 ElektromyÅ¡ Michal Dudka pÃ­Å¡e skvÄ›lÃ½ web o programovÃ¡nÃ­ mikrokontrokÃ©rÅ¯: http://elektromys.eu . V sekci STM8 najdete spoustu pro nÃ¡s zajÃ­mavÃ½ch vÄ›cÃ­: Vstupy a vÃ½stupy 1 â€“ zÃ¡klady Vstupy a vÃ½stupy 2 â€“ tlaÄÃ­tko Vstupy a vÃ½stupy 3 â€“ logickÃ© ÃºrovnÄ› Vstupy a vÃ½stupy 4 â€“ PullUp rezistory Vstupy a vÃ½stupy 5 â€“ Open-Drain OvlÃ¡dÃ¡nÃ­ displeje s MAX7219 Clock AlfanumerickÃ© LCD Knihovna milis â€“ \"Multitasking\" StavovÃ½ automat DalÅ¡Ã­ velice cennÃ© informace nejdete v sekcÃ­ch: Elektro RÅ¯znÃ© krÃ¡tkÃ© poznÃ¡mky Ze stejnÃ© dÃ­lny pochÃ¡zÃ­ tyto pro nÃ¡s zajÃ­mavÃ© ÄlÃ¡nky: IR senzor I2C â€“ RelativnÄ› jednoduÅ¡e NÃ¡vody z tohoto weby GenerovÃ¡nÃ­ zvuku â€“ zÃ¡klady ZÃ¡kladnÃ­ pouÅ¾itÃ­ ÄasovaÄe PouÅ¾itÃ­ ÄasovaÄe jako generÃ¡toru PWM UltrazvukovÃ½ mÄ›Å™iÄ vzdÃ¡lenosti pomocÃ­ timeru TIM2 Projekty Toto by se vÃ¡m mohlo hodit: seznam na TME seznam na LaskArduno PodmÃ­nky a zadÃ¡nÃ­ najdete na Å¡kolnÃ­m drajvu . NÃ¡stroje VÃ½vojovÃ© nÃ¡stroje jsou IMHO nejvÄ›tÅ¡Ã­ slabina platformy STM8 , ale pÅ™i troÅ¡e snahy se to dÃ¡ :) . Co se ale ST povedlo, to je nÃ¡strtoj STM8CubeMX . DoporuÄuji si ho nainstalovat. NenÃ­ nijak klÃ­ÄovÃ½, ale hodÃ­ se. OpenSource nÃ¡stroje nejen pro Linux Celou problematiku jsem zpracoval v samostatnÃ©m nÃ¡vodu: VÃ½voj STM8 s OpenSource nÃ¡stroji . Ve zkratce to vypadÃ¡ takto: KompilÃ¡tor SDCC Jako vÃ½vojovÃ© prostÅ™edÃ­ doporuÄuji VSCodium StarÅ¡Ã­ anglickÃ½ nÃ¡vod s nÄ›kolika mouchama: https://github.com/hbendalibraham/stm8_started NÃ¡stroje pro Widle VÅ¡e velmi hezky zpracoval Michal Dudka na ElektromyÅ¡i . Jako vÃ½vojovÃ© prostÅ™edÃ­ leze pouÅ¾Ã­t STVD s komipilÃ¡torem Cosmic . Oba nÃ¡stroje je moÅ¾nÃ© bezplatnÄ› pouÅ¾Ã­vat, kdyÅ¾ se zaregistrujete. BohuÅ¾el nejsou ani jeden OpenSource . Å ablona pro zaloÅ¾enÃ­ projektu moje Å¡ablona pro vÃ½voj SDCC a GNU Make https://github.com/spseol/start-stm8 vzorovÃ½ projekt Michala Dudky ( STVD ) http://www.elektromys.eu/stm8s208_vzor.rar (pÅ™Ã­padnÄ› zip) http://www.elektromys.eu/stm8s105_vzor.rar (pÅ™Ã­padnÄ› zip) Odkazy http://www.fit.vutbr.cz/~martinek/clang/ http://jaknaprojekty.davidm.cz/ https://www.tutorialspoint.com/cprogramming/ Wikibook Programuje v jazyce C .","tags":"MITka","url":"https://chytrosti.marrek.cz/mit.html","loc":"https://chytrosti.marrek.cz/mit.html"},{"title":"VÃ½voj STM8 s OpenSource nÃ¡stroji","text":"VÃ½vojovÃ© nÃ¡stroje jsou asi nejvÄ›tÅ¡Ã­ slabinou celÃ©ho ekosystÃ©mu STM8 . VÃ½robce dodÃ¡vÃ¡ vÃ½vojovÃ© prostÅ™edÃ­ STVD ( nÃ¡vod zde ), kterÃ© je sice dostaÄujÃ­cÃ­, ale starÃ© a jiÅ¾ nevyvÃ­jenÃ©. NavÃ­c se obÄas stane, Å¾e na nÄ›jakÃ©m PC je problÃ©m to rozjet. KompilÃ¡tor Cosmic sice funguje, ale ta neustÃ¡lÃ¡ kontrola licence, je fakt opruz; a jeho chybovÃ¡ chybovÃ¡ hlÃ¡Å¡enÃ­ mi taky nepÅ™iÅ¡ly ÃºplnÄ› srozumitelnÃ¡. A to jsem jeÅ¡tÄ› nezmÃ­nil to hlavnÃ­: Na Linuxu to nejede! TakÅ¾e, co s tÃ­m? PouÅ¾ijeme OpenSource nÃ¡stroje! Co je potÅ™eba? VÃ½vojovÃ© prostÅ™edÃ­ KompilÃ¡tor ProgramÃ¡tor/Flasher â€“ software, kterÃ½m program do chipu nahraju Debuger KdyÅ¾ jsem to celÃ© tvoÅ™il hodnÄ› mi pomohla tato strÃ¡nka, tak se tam mÅ¯Å¾ete mrknout: https://github.com/hbendalibraham/stm8_started . VÃ½vojovÃ© prostÅ™edÃ­ Jako editor a vÃ½vojovÃ© prostÅ™edÃ­ doporuÄuji VScodium/VScode . Windows Linux Kompilace PopÃ­Å¡u tu celkem tÅ™i rÅ¯znÃ¡, mezi sebou se prolÃ­najÃ­cÃ­ Å™eÅ¡enÃ­, kterÃ© fungujÃ­ v Linuxu i we Vindows. Å patnÃ¡ zprÃ¡va je Å¾e ani jedno z nich nenÃ­ 100%. DobrÃ¡ zprÃ¡va je, Å¾e pÅ™i troÅ¡e snahy se 100% mÅ¯Å¾eme hodnÄ› pÅ™iblÃ­Å¾it. Windows Linux Flashing Windows Linux Debug Windows Linux","tags":"MITka","url":"https://chytrosti.marrek.cz/vyvoj-stm8-s-opensource-nastroji.html","loc":"https://chytrosti.marrek.cz/vyvoj-stm8-s-opensource-nastroji.html"},{"title":"Chocolatey","text":"Chocolatey je sprÃ¡vce balÃ­ÄkÅ¯ pro operaÄnÃ­ systÃ©m windows. DÃ¡ se Å™Ã­ct, Å¾e se snaÅ¾Ã­ o co nejjednoduÅ¡Å¡Ã­ instalaci software. PodobnÃ½ zpÅ¯sob instalace je znÃ¡m z linuxovÃ½ch distribucÃ­. JÃ¡ tento zpÅ¯sob instalace doporuÄuji a zatÃ­m se mi jen a jen osvÄ›dÄil. NemusÃ­te SW nikde dlouze hledat instalovat atd. NapÅ™Ã­klad instalaci VSCodia a Pythonu zajistÃ­ tyto dva pÅ™Ã­kazy: 1 2 choco install vscodium choco install python Pokud vÃ¡s zajÃ­mÃ¡ co vÅ¡echno v repositÃ¡Å™i balÃ­ÄkÅ¯ najdete kouknÄ›te se na https://community.chocolatey.org/packages . Instalace chocolatey CelÃ½ projekt na jdete na strÃ¡nce https://chocolatey.org . Pokyny jak to celÃ¡ nainstalovat potom na https://chocolatey.org/install . KdyÅ¾ to hodnÄ› zjednoduÅ¡Ã­m: PomocÃ­ Win+X a spustÃ­te PowerShell jako AdministrÃ¡tor a zadÃ¡te pÅ™Ã­kaz: 1 Set - ExecutionPolicy Bypass - Scope Process - Force ; [ System . Net . ServicePointManager ]:: SecurityProtocol = [ System . Net . ServicePointManager ]:: SecurityProtocol - bor 3072 ; iex (( New - Object System . Net . WebClient ) . DownloadString ( 'https://community.chocolatey.org/install.ps1' )) Pokud chcete nÄ›jakÃ© klikÃ¡tko tak ho doinstalujete pÅ™Ã­kazem: 1 choco install chocolateygui Python Pokud pracujete s Pythonem staÄÃ­ nainstalovat VSCodium nebo VScodeâ€¦ a Python a taky asi Git 1 2 3 4 5 choco install vscodium choco install vscode choco install python choco install git STM8 Pokud pracujete v MIT s STM8 nainstalujete VSCodium nebo VScodeâ€¦ a Git a GNU Make a OpenOCD. No a GCC a Python se taky docela hodÃ­. 1 2 3 4 5 6 7 8 choco install vscodium choco install vscode choco install git choco install make choco install openocd choco install mingw choco install python","tags":"ProgramovÃ¡nÃ­","url":"https://chytrosti.marrek.cz/chocolatey.html","loc":"https://chytrosti.marrek.cz/chocolatey.html"},{"title":"VSCode/Codium","text":"V poslednÃ­ dobÄ› se mi jako editor nejvÃ­c osvÄ›dÄil VSCode/Codium. JÃ¡ osobnÄ› sice pouÅ¾Ã­vÃ¡me VIm , ale ve vÃ½uce a se studenty pouÅ¾Ã­vÃ¡me VSCode/Codium. Visual Studio Code je brilantnÃ­ open-source editor z dÃ­lny firmy Microsoft s vestavÄ›nou podporou pro systÃ©m Git . Pokud by vÃ¡m (stejnÄ› jako mnÄ›) vadilo, Å¾e Microsoft do balÃ­Äku s VSCode zabalÃ­ i telemetrii (dÅ™Ã­v se tomu Å™Ã­kalo Å¡pehovÃ¡nÃ­), tak existuje projekt Codium , kterÃ½ tÃ­mto neduhem netrpÃ­. NejjednoduÅ¡Å¡Ã­ zpÅ¯sob instalace je pomocÃ­ chocolatey . 1 2 choco install vscodium choco install vscode Oba projekty pochÃ¡zÃ­ ze stejnÃ½ch zdrojovÃ½ch kÃ³dÅ¯. LiÅ¡Ã­ se pouze v tom, jak jsou zabaleny. Codium neobsahuje telemetrii a mÃ¡ marketplace nasmÄ›rovanÃ½ troÅ¡ku jinam . Z toho vyplÃ½vÃ¡, Å¾e mohou nastat problÃ©my pÅ™i instalaci nÄ›kterÃ½ch doplÅˆkÅ¯, protoÅ¾e na open-vsx.org nejsou vÅ¡echny doplÅˆky, kterÃ© najdete na oficiÃ¡lnÃ­m maktetplacu a naopak. Pokud se v tÃ©to situaci ocitnete a opravdu moc touÅ¾Ã­te po onom ÃºÅ¾asnÃ©m doplÅˆku, kterÃ½ na open-vsx.org prostÄ› nenÃ­, staÄÃ­ ho z oficiÃ¡lnÃ­m maktetplacu stÃ¡hnout a v Codiu ruÄnÄ› nainstalovat. Python Pokud si doinstalujete doplnÄ›k ms-python.python ( zde nebo zde ) zÃ­skÃ¡te vÃ½vojovÃ© prostÅ™edÃ­, ve kterÃ©m vÃ¡m s nejvÄ›tÅ¡Ã­ pravdÄ›podobnostÃ­ nebude nic chybÄ›t. Git Git je v Codiu jiÅ¾ integrovÃ¡n v zÃ¡kladnÃ­ podobÄ›. VÅ¡e dalÅ¡Ã­ po Äem byst mohli v tÃ©to oblasti touÅ¾it dostanete instalacÃ­ doplÅˆku Git Extension Pack pinage404.git-extension-pack . Ten v instaluje sadu doplÅˆkÅ¯: GitLens eamodio.gitlens Git Graph mhutchie.git-graph Git Project Manager felipecaputo.git-project-manager Git Web Links reduckted.vscode-gitweblinks CÃ©Äko STM8","tags":"ProgramovÃ¡nÃ­","url":"https://chytrosti.marrek.cz/vscodecodium.html","loc":"https://chytrosti.marrek.cz/vscodecodium.html"},{"title":"Git","text":"Git najdete na https://git-scm.com/ . OvlÃ¡dÃ¡ se z pÅ™Ã­kazovÃ© Å™Ã¡dky. Pokud touÅ¾Ã­te po nÄ›jakÃ©m grafickÃ©m ovlÃ¡dÃ¡nÃ­ staÄÃ­ si vybrat z dlouhÃ©ho seznamu ten, co se vÃ¡m bude zdÃ¡t nejhezÄÃ­. GitHub mÃ¡ svou vlastnÃ­ grafickou aplikaci . VynikajÃ­cÃ­m zaÄÃ¡tkem s Gitem je volnÄ› Å¡iÅ™itelnÃ¡ kniha Pro Git , ve kterÃ© najdete vÅ¡e potÅ™ebnÃ© v ÄeÅ¡tinÄ›. Lze ÄÃ­st i na webu: prvnÃ­ vydÃ¡nÃ­ â€“ celÃ© v ÄeÅ¡tinÄ› druhÃ© vydÃ¡nÃ­ â€“ nenÃ­ pÅ™eloÅ¾eno celÃ©; mÅ¯Å¾ete se tedy zapojit do pÅ™ekladu . Pro efektivnÃ­ pouÅ¾Ã­vanÃ­ tohoto skvÄ›lÃ©ho nÃ¡stroje vÃ¡m staÄÃ­ pÅ™eÄÃ­st si prvnÃ­ tÅ™i kapitoly . Nenechte se tedy odradit, stojÃ­ to jistÄ› za to. Zde je jeÅ¡tÄ› malÃ½ rychlokurs (pokud nÄ›kdo nenÃ­ spokojen s knihou): Git Instalace gitu VÄ›tvenÃ­ v Gitu IgnorovÃ¡nÃ­ souborÅ¯ SpoluprÃ¡ce a Open source SpoluprÃ¡ce a Git JeÅ¡tÄ› jedna drobnost: pokud se vÃ¡m nechce poÅ™Ã¡d dokola zadÃ¡vat pÅ™i nahrÃ¡vÃ¡nÃ­ svÃ© prÃ¡ce na GitHub uÅ¾ivatelskÃ© jmÃ©no a heslo pouÅ¾ijte ssh klÃ­Äe . K tomu se dobÅ™e hodÃ­ napÅ™Ã­klad putty . Instalace DoporuÄuji pouÅ¾Ã­t Chocolatey WebovÃ© sluÅ¾by NejznÃ¡mÄ›jÅ¡Ã­ veÅ™ejnÃ¡ ÃºloÅ¾iÅ¡tÄ› pro Git jsou asi tyto: https://github.com https://gitlab.com https://bitbucket.org KromÄ› uklÃ¡danÃ­ repositÃ¡Å™Å¯ zde naleznete i rozmÄ›r sociÃ¡lnÃ­ sÃ­tÄ›. Asi se nedÃ¡ Å™Ã­ct, Å¾e jeden je lepÅ¡Ã­ a druhÃ½ horÅ¡Ã­. KaÅ¾dÃ½ mÃ¡ svÃ¡ pro a proti. Pokusy a hraÄiÄky https://learngitbranching.js.org/ Oh my Git: https://ohmygit.org/","tags":"ProgramovÃ¡nÃ­","url":"https://chytrosti.marrek.cz/git.html","loc":"https://chytrosti.marrek.cz/git.html"},{"title":"PSK","text":"Linux ZÃ¡klady poÄÃ­taÄovÃ½ch sÃ­tÃ­","tags":"PSKÃ¡Äko","url":"https://chytrosti.marrek.cz/psk.html","loc":"https://chytrosti.marrek.cz/psk.html"},{"title":"UltrazvukovÃ½ mÄ›Å™iÄ vzdÃ¡lenosti pomocÃ­ timeru TIM2","text":"zde se Äasem objevÃ­ zajÃ­mavÃ½ text :) ZdrojovÃ© kÃ³dy KompletnÃ­ zdrojovÃ© kÃ³dy naleznete v repositÃ¡Å™i na GitHubu: zÃ¡kladnÃ­ princip â€“ vÄ›tev princip main.c Å™eÅ¡enÃ­ typu StavovÃ½ automat â€“ vÄ›tev stav_automat main.c","tags":"MITka","url":"https://chytrosti.marrek.cz/ultrazvukovy-meric-vzdalenosti-pomoci-timeru-tim2.html","loc":"https://chytrosti.marrek.cz/ultrazvukovy-meric-vzdalenosti-pomoci-timeru-tim2.html"},{"title":"PouÅ¾itÃ­ ÄasovaÄe jako generÃ¡toru PWM","text":"TIM2 a TIM3 zde se Äasem objevÃ­ zajÃ­mavÃ½ text :) ZdrojovÃ© kÃ³dy KompletnÃ­ zdrojovÃ© kÃ³dy naleznete v repositÃ¡Å™i na GitHubu: RGB LED â€“ RGB_LED main.c","tags":"MITka","url":"https://chytrosti.marrek.cz/pouziti-casovace-jako-generatoru-pwm.html","loc":"https://chytrosti.marrek.cz/pouziti-casovace-jako-generatoru-pwm.html"},{"title":"GenerovÃ¡nÃ­ zvuku â€” zÃ¡klady","text":"Zvuk je jak znÃ¡mo mechanickÃ© vlnÄ›nÃ­. Pro jeho vyloudÄ›nÃ­ tedy potÅ™ebujeme nÄ›jakÃ½ \"vlniÄ\" â€“ tedy elektro-akustickÃ½ mÄ›niÄ. NejjednoduÅ¡Å¡Ã­ je asi pouÅ¾Ã­t piezo mÄ›niÄ. Ten mÃ¡ ovÅ¡em ponÄ›kud omezenÃ½ frekvenÄnÃ­ rozsah. Jeho frekvenÄnÃ­ charakteristika mÅ¯Å¾e vypadat napÅ™Ã­klad takto: (Mimochodem prÃ½ existuje nÄ›jakÃ½ vÃ½zkum, podle kterÃ©ho optimÃ¡lnÃ­ frekvence pro budÃ­k je 100 Hz; nebo to bylo 300 Hz? ProstÄ› pomÄ›rnÄ› nÃ­zkÃ½ kmitoÄet. Ale levnÃ© bezporuchovÃ© piezo-mÄ›niÄe takto nÃ­zko prostÄ› nejdou. Tak na nÃ¡s ty budÃ­ky pÃ­skajÃ­ a pÃ­pajÃ­ a my vstÃ¡vÃ¡me potom naÅ¡tvanÃ­.) DalÅ¡Ã­ moÅ¾nostÃ­ je pouÅ¾Ã­t reproduktorek. V tomto pÅ™Ã­padÄ› je tÅ™eba posÃ­lit vÃ½stup tranzistorem. ZapojenÃ­ tedy mÅ¯Å¾e vypadat napÅ™Ã­klad takto: Tranzistor je ve spÃ­nacÃ­m reÅ¾imu a membrÃ¡na reproduktoru mÃ¡ pouze dvÄ› polohy. Tedy klidovou polohu (bez proudu) nebo vÃ½chylku odpovÃ­dajÃ­cÃ­ kladnÃ©mu proudu. Do vÃ½chylky odpovÃ­dajÃ­cÃ­ zÃ¡pornÃ©mu proudu se membrÃ¡na nedostane, protoÅ¾e proud protÃ©kÃ¡ vÅ¾dy jednÃ­m smÄ›rem. Dioda D1 vybÃ­jÃ­ cÃ­vku reproduktoru, pÅ™i sestupnÃ© hranÄ›. Program, kterÃ½ nÃ¡m vyloudÃ­ frekvenci \\(500\\,\\mathrm{Hz}\\) mÅ¯Å¾e vypadat napÅ™Ã­klad takto. Perioda je \\(2\\,\\mathrm{ms}\\) . PÅ¯l periody tedy \\(1\\,\\mathrm{ms}\\) . 1 2 3 4 5 6 7 8 9 10 11 void main ( void ) { init (); while ( 1 ) { PZ_UP ; delay_ms ( 1 ); PZ_DOWN ; delay_ms ( 1 ); } } Pokud chci jen pÃ­pnout a potÃ© nechat chvilku ticho jednoduÅ¡e nebudu cviÄit s membrÃ¡nou do nekoneÄna, ale pouze nÄ›kolikrÃ¡t ( \\(20 \\cdot 2\\,\\mathrm{ms}\\) ) a pak nechÃ¡m chvilku ticho. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 void main () { init (); uint16_t i ; while ( 1 ) { for ( i = 0 ; i < 20 ; ++ i ) { PZ_UP ; delay_ms ( 1 ); PZ_DOWN ; delay_ms ( 1 ); } delay_ms ( 60 ); } } Tento zpÅ¯sob prÃ¡ce je ale blokujÃ­cÃ­, protoÅ¾e se poÅ™Ã¡d jen ÄekÃ¡. Mikroprocesor vlastnÄ› poÅ™Ã¡dnÄ› nemÅ¯Å¾e dÄ›lat nic jinÃ©ho. Proto pouÅ¾ijeme multitasking 1 a stavovÃ½ automat . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 void main ( void ) { uint32_t timeL = 0 ; uint32_t lastTime = 0 ; uint16_t count = 0 ; enum state_of { STATE_PAUSE , STATE_UP , STATE_DOWN } state = STATE_UP ; uint32_t time = 0 ; init (); while ( 1 ) { switch ( state ) { case STATE_PAUSE : PZ_DOWN ; // v pauze dÃ¡m reprÃ¡Äek do klodovÃ©ho stavu if ( milis () - lastTime > 4321 ) { lastTime = milis (); state = STATE_UP ; } break ; case STATE_UP : PZ_UP ; if ( milis () - lastTime >= 4 ) { lastTime = milis (); state = STATE_DOWN ; } break ; case STATE_DOWN : PZ_DOWN ; if ( count >= 10 ) { count = 0 ; lastTime = milis (); state = STATE_PAUSE ; break ; } if ( milis () - lastTime >= 4 ) { lastTime = milis (); count ++ ; state = STATE_UP ; } break ; default : state = STATE_PAUSE ; } if ( milis () - timeL > 500 ) { timeL = milis (); LED_REVERSE ; } } } ZdrojovÃ© kÃ³dy KompletnÃ­ zdrojovÃ© kÃ³dy naleznete v repositÃ¡Å™i na GitHubu: https://github.com/spseol/ STM8 -zvuk-zaklad knihovna milis â†©","tags":"MITka","url":"https://chytrosti.marrek.cz/generovani-zvuku-zaklady.html","loc":"https://chytrosti.marrek.cz/generovani-zvuku-zaklady.html"},{"title":"ZÃ¡kladnÃ­ pouÅ¾itÃ­ ÄasovaÄe","text":"NÃ¡Å¡ STM8S208RB mÃ¡ na tÄ›le celkem ÄtyÅ™i ÄasovaÄe: TIM1 , TIM2 , TIM3 a TIM4 . TIM4 TIM4 je nejjednoduÅ¡Å¡Ã­. ÄŒÃ­taÄ je 8-bitovÃ½ a pÅ™eddÄ›liÄka umoÅ¾Åˆuje dÄ›lit kmitoÄet /1, /2, /4, /8, /16, /32, /64 a /128. Auto-reload register Å™Ã­kÃ¡ kam aÅ¾ se bude ÄÃ­tat â€“ tedy nastavuje strop ÄasovaÄe. NastavenÃ­ se dÄ›je pomocÃ­ funkce TIM4_TimeBaseInit(PRESCALER, PERIOD) , kde PRESCALER je makro, pro nastavenÃ­ dÄ›liÄky a PERIOD je 8-bitovÃ© ÄÃ­slo. 1 TIM4_TimeBaseInit ( TIM4_PRESCALER_128 , 125 - 1 ); TakÅ¾e pokud mÃ¡me nastaven kmitoÄet na 16MHz znamenÃ¡ to Å¾e ÄÃ­taÄ ÄÃ­tÃ¡ do hodnoty 125 (respektive 124 protoÅ¾e ÄÃ­tÃ¡me od nuly) s frekvencÃ­ 16MHz/128 == 125 kHz . ZnamenÃ¡ to tedy, Å¾e kaÅ¾dou milisekundu dojde k auto-reloadu a je vyvolÃ¡no pÅ™eruÅ¡enÃ­ od ÄasovaÄe TIM4 . Aby vÅ¡e fungovalo musÃ­me: povolit TIM4 povolit pÅ™eruÅ¡enÃ­ od TIM4 globÃ¡lnÄ› povolit pÅ™eruÅ¡enÃ­ napsat tÄ›lo obsluÅ¾nÃ© rutiny pÅ™eruÅ¡enÃ­. 1 2 3 4 5 6 void setup ( void ) { TIM4_Cmd ( ENABLE ); // povolÃ­ TIM4 TIM4_ITConfig ( TIM4_IT_UPDATE , ENABLE ); // povolÃ­ pÅ™eruÅ¡enÃ­ od TIM4 enableInterrupts (); // globÃ¡lnÄ› povolÃ­ pÅ™eruÅ¡enÃ­ ...... } Rutina pÅ™eruÅ¡enÃ­ se standardnÄ› nachÃ¡zÃ­ v souboru stm8_it.c . StaÄÃ­ ji najÃ­t pÅ™epsat. Pokud potÅ™ebujete v rutinÄ› pÅ™eruÅ¡enÃ­ pracovat s promÄ›nnou definovanou v main.c (coÅ¾ je myslÃ­m tÃ©mÄ›Å™ vÅ¾dy) je tÅ™eba tuto promÄ›nnou oznaÄit direktivou extern nebo rutinu pÅ™esunout pÅ™Ã­mo do souboru main.c . VÃ­ce o tom se doÄtete v postu Kompilace a knihovny . 1 2 3 4 5 6 /*--- rutina obsluhy pÅ™eruÅ¡enÃ­ ---*/ INTERRUPT_HANDLER ( TIM4_UPD_OVF_IRQHandler , 23 ) { TIM4_ClearFlag ( TIM4_FLAG_UPDATE ); // vymaÅ¾u vlajku signalizujÃ­cÃ­ pÅ™eruÅ¡enÃ­ miliseconds ++ ; // udÄ›lÃ¡m co je tÅ™eba.... } VÅ¡imnÄ›te si prosÃ­m, Å¾e prvnÃ­, co se v rutinÄ› pÅ™eruÅ¡enÃ­ dÄ›lÃ¡, je, Å¾e se vymaÅ¾e vlajka , kterÃ¡ oznaÄuje, Å¾e k pÅ™eruÅ¡enÃ­ doÅ¡lo. Tento kÃ³d je napÅ™Ã­klad pouÅ¾ito v knihovnÄ› milis , kterÃ¡ umoÅ¾Åˆuje zjistit poÄet milisekund uplynulÃ½ch od \"spuÅ¡tÄ›nÃ­ programu\". TIM2 a TIM3 TIM2 a TIM3 je trochu sloÅ¾itÄ›jÅ¡Ã­, ale zde ukÃ¡Å¾eme jen jeho zÃ¡kladnÃ­ pouÅ¾itÃ­. ( PWM nechÃ¡me na samostatnÃ½ post: PouÅ¾itÃ­ ÄasovaÄe jako generÃ¡toru PWM ) TIM2 /3 je 16 bitovÃ½ â€“ mÅ¯Å¾e tedy ÄÃ­tat do 65535 a pÅ™eddÄ›liÄka umoÅ¾Åˆuje dÄ›lit /1, /2, /4, /8, /16, /32, /64, /128, /256, /512, /1024, /2048, /4096, /8192, /16384 a /32768. TakÅ¾e napÅ™Ã­klad pokud vytvÃ¡Å™Ã­me cokoli, co pracuje s Äasem a potÅ™ebujeme spustit urÄitÃ½ kÃ³d vÅ¾dy pÅ™esnÄ› v intervalu \\(1\\,\\mathrm{s}\\) , mÅ¯Å¾e inicializace ÄasovaÄe vypadat napÅ™Ã­klad takto: 1 2 3 4 5 /*---- TIM2 setup ---------*/ TIM2_TimeBaseInit ( TIM2_PRESCALER_512 , 31250 - 1 ); // 16MHz/512/31250 == 1Hz TIM2_Cmd ( ENABLE ); // povolÃ­ TIM2 TIM2_ITConfig ( TIM2_IT_UPDATE , ENABLE ); // povolÃ­ pÅ™eruÅ¡enÃ­ od TIM2 enableInterrupts (); // globÃ¡lnÄ› povolÃ­ pÅ™eruÅ¡enÃ­ nastavenÃ­ TIM3 je analogickÃ©: 1 2 3 4 /*---- TIM3 setup ---------*/ TIM3_TimeBaseInit ( TIM3_PRESCALER_16 , 12345 - 1 ); // ~81Hz TIM3_ITConfig ( TIM3_IT_UPDATE , ENABLE ); TIM3_Cmd ( ENABLE ); No a jeÅ¡tÄ› rutiny pÅ™eruÅ¡enÃ­â€¦ OpÄ›t platÃ­, Å¾e rutiny pÅ™eruÅ¡enÃ­ buÄ nechÃ¡me v souboru stm8_it.c a promÄ›nnÃ© oznaÄÃ­me pomocÃ­ direktivy extern nebo si rutiny pÅ™esuneme do modulu/souboru ve kterÃ©m je promÄ›nnÃ¡ definovÃ¡na . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 INTERRUPT_HANDLER ( TIM2_UPD_OVF_BRK_IRQHandler , 13 ) { TIM2_ClearFlag ( TIM2_FLAG_UPDATE ); // vymaÅ¾u vlaku signalizujÃ­cÃ­ udelam_neco_zajimaveho (); sec ++ ; a_jeste_neco_jineho (); } INTERRUPT_HANDLER ( TIM3_UPD_OVF_BRK_IRQHandler , 15 ) { TIM3_ClearFlag ( TIM3_FLAG_UPDATE ); LED_REVERSE ( G ); } ZdrojovÃ© kÃ³dy KompletnÃ­ zdrojovÃ© kÃ³dy naleznete v repositÃ¡Å™i na GitHubu: https://github.com/spseol/ STM8 - TIM23 -zaklad","tags":"MITka","url":"https://chytrosti.marrek.cz/zakladni-pouziti-casovace.html","loc":"https://chytrosti.marrek.cz/zakladni-pouziti-casovace.html"},{"title":"OddÄ›lenÃ¡ kompilace a vlastnÃ­ knihovny","text":"ahoj aaa aaa bbb dfjdk konec","tags":"MITka","url":"https://chytrosti.marrek.cz/oddelena-kompilace-a-vlastni-knihovny.html","loc":"https://chytrosti.marrek.cz/oddelena-kompilace-a-vlastni-knihovny.html"},{"title":"SIT","text":"Totot tuje","tags":"SÃTÄ›","url":"https://chytrosti.marrek.cz/sit.html","loc":"https://chytrosti.marrek.cz/sit.html"}]};