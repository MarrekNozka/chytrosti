<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Chytrosti - Marrek Nožka</title><link href="https://chytrosti.marrek.cz/" rel="alternate"></link><link href="https://chytrosti.marrek.cz/feeds/marrek-nozka.atom.xml" rel="self"></link><id>https://chytrosti.marrek.cz/</id><updated>2022-10-20T17:44:15+02:00</updated><entry><title>Sítě</title><link href="https://chytrosti.marrek.cz/site.html" rel="alternate"></link><published>2022-10-20T17:44:15+02:00</published><updated>2022-10-20T17:44:15+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2022-10-20:/site.html</id><content type="html">&lt;h2 id="pracovni-listy"&gt;Pracovní listy&lt;a class="headerlink" href="#pracovni-listy" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Všechny pracovní listy v jediném souboru: 
&lt;a href="https://chytrosti.marrek.cz/sit/vse.pdf"&gt;&lt;img alt="pdf" src="https://chytrosti.marrek.cz/images/ico/pdf.png" title="PDF"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/vse.pdf"&gt;vse.pdf&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="nastaveni-site-linuxovem-shell"&gt;Nastavení sítě (Linuxovém shell):&lt;a class="headerlink" href="#nastaveni-site-linuxovem-shell" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://chytrosti.marrek.cz/sit/010-prikazy.pdf"&gt;&lt;img alt="PDF" src="https://chytrosti.marrek.cz/sit/010-prikazy.png"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/010-prikazy.pdf"&gt;&lt;img alt="pdf" src="https://chytrosti.marrek.cz/images/ico/pdf.png" title="PDF"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/010-prikazy.odt"&gt;&lt;img alt="oo" src="https://chytrosti.marrek.cz/images/ico/OO.png" title="LibreOffice"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="pripojeni-do-site"&gt;Připojení do sítě:&lt;a class="headerlink" href="#pripojeni-do-site" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://chytrosti.marrek.cz/sit/020-pripojeni.pdf"&gt;&lt;img alt="PDF" src="https://chytrosti.marrek.cz/sit/020-pripojeni.png"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/020-pripojeni.pdf"&gt;&lt;img alt="pdf" src="https://chytrosti.marrek.cz/images/ico/pdf.png" title="PDF"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/020-pripojeni.svg"&gt;&lt;img alt="svg" src="https://chytrosti.marrek.cz/images/ico/svg.png" title="SVG"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="smerovani"&gt;Směrování:&lt;a class="headerlink" href="#smerovani" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://chytrosti.marrek.cz/sit/030-smerovani.pdf"&gt;&lt;img alt="PDF" src="https://chytrosti.marrek.cz/sit/030-smerovani.png"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/030-smerovani.pdf"&gt;&lt;img alt="pdf" src="https://chytrosti.marrek.cz/images/ico/pdf.png" title="PDF"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/030-smerovani.svg"&gt;&lt;img alt="svg" src="https://chytrosti.marrek.cz/images/ico/svg.png" title="SVG"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="smerovani-bez-prikazu"&gt;Směrování (bez příkazů):&lt;a class="headerlink" href="#smerovani-bez-prikazu" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://chytrosti.marrek.cz/sit/032-smerovani_.pdf"&gt;&lt;img alt="PDF" src="https://chytrosti.marrek.cz/sit/032-smerovani_.png"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/032-smerovani_.pdf"&gt;&lt;img alt="pdf" src="https://chytrosti.marrek.cz/images/ico/pdf.png" title="PDF"&gt;&lt;/a&gt;
&lt;a href="https://chytrosti.marrek.cz/sit/032-smerovani_.svg"&gt;&lt;img alt="svg" src="https://chytrosti.marrek.cz/images/ico/svg.png" title="SVG"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="videa"&gt;Videa&lt;a class="headerlink" href="#videa" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;</content><category term="SÍTě"></category><category term="SIT"></category></entry><entry><title>DBI</title><link href="https://chytrosti.marrek.cz/dbi.html" rel="alternate"></link><published>2022-10-20T06:59:37+02:00</published><updated>2022-10-20T06:59:37+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2022-10-20:/dbi.html</id><summary type="html">
&lt;h2 id="python"&gt;Python&lt;a class="headerlink" href="#python" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Programujeme v jazyce Python, proto zde platí prakticky vše,
co pro &lt;a href="https://chytrosti.marrek.cz/prg.html"&gt;&lt;span class="caps"&gt;PRG&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="instalace-knihoven"&gt;Instalace knihoven&lt;a class="headerlink" href="#instalace-knihoven" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Budeme potřebovat modul &lt;a href="https://flask.palletsprojects.com/"&gt;Flask&lt;/a&gt;. Jeho instalaci 
zajistí &lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt;. Doporučuji přečíst si celý 
&lt;a href="https://chytrosti.marrek.cz/pip-a-venv.html"&gt;post věnovaný pipu a virtuálnímu prostředí&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ve Windows to může vypadat třeba takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install flask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;V Linuxu spíš takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip3 install --user …&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">
&lt;h2 id="python"&gt;Python&lt;a class="headerlink" href="#python" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Programujeme v jazyce Python, proto zde platí prakticky vše,
co pro &lt;a href="https://chytrosti.marrek.cz/prg.html"&gt;&lt;span class="caps"&gt;PRG&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="instalace-knihoven"&gt;Instalace knihoven&lt;a class="headerlink" href="#instalace-knihoven" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Budeme potřebovat modul &lt;a href="https://flask.palletsprojects.com/"&gt;Flask&lt;/a&gt;. Jeho instalaci 
zajistí &lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt;. Doporučuji přečíst si celý 
&lt;a href="https://chytrosti.marrek.cz/pip-a-venv.html"&gt;post věnovaný pipu a virtuálnímu prostředí&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ve Windows to může vypadat třeba takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install flask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;V Linuxu spíš takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip3 install --user flask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="video-jak-to-rozjet-na-windows"&gt;Video – jak to rozjet na Windows&lt;a class="headerlink" href="#video-jak-to-rozjet-na-windows" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a class="video-preview" href="https://youtu.be/QMW7LSf4uBg"&gt;&lt;img alt="Jak rozjet Flask na Windows" data-frames="16" src="https://chytrosti.marrek.cz/dbi/img/flask-run_preview.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="git"&gt;Git&lt;a class="headerlink" href="#git" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Pro sdílení práce a odevzdávání domácích úkolů používáme systém
&lt;a href="https://git-scm.org"&gt;Git&lt;/a&gt; a server &lt;a href="https://github.com"&gt;GitHub&lt;/a&gt;.
Stojí také za to, zmínit se 
o &lt;a href="https://education.github.com/"&gt;GitHub programu pro vzdělávání&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Gitu se věnuji v &lt;a href="https://chytrosti.marrek.cz/git.html"&gt;samostatném postu&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="dokumentace"&gt;Dokumentace&lt;a class="headerlink" href="#dokumentace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Krátkou českou dokumentaci najdete na adrese
&lt;a href="http://spseol.github.io/CzechFlaskDoc/"&gt;http://spseol.github.io/CzechFlaskDoc/&lt;/a&gt;. Dále poslouží oficiální dokumentace:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Python: &lt;a href="https://docs.python.org/"&gt;https://docs.python.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Flask: &lt;a href="https://flask.palletsprojects.com/"&gt;https://flask.palletsprojects.com/&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://flask.palletsprojects.com/quickstart/"&gt;Quickstart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://flask.palletsprojects.com/patterns/flashing/"&gt;Message Flashing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://flask.palletsprojects.com/en/1.1.x/api/#incoming-request-data"&gt;Incoming Request Data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://flask.palletsprojects.com/patterns/"&gt;Patterns&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Jinja2: &lt;a href="https://jinja.palletsprojects.com/templates/"&gt;https://jinja.palletsprojects.com/templates/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Velmi užitečná je i best practices kniha &lt;a href="http://exploreflask.com/"&gt;Explore Flask&lt;/a&gt;
a &lt;a href="https://docs.python-guide.org"&gt;Stopařův průvodce Pythontem&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="sqlite"&gt;SQLite&lt;a class="headerlink" href="#sqlite" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;klikátko: &lt;a href="https://sqlitebrowser.org/dl/"&gt;https://sqlitebrowser.org/dl/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;textový auto-completion client: &lt;a href="https://litecli.com"&gt;https://litecli.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="repositare-nejen-z-vyuky"&gt;Repositáře nejen z výuky&lt;a class="headerlink" href="#repositare-nejen-z-vyuky" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/spseol?q=DBI-&amp;amp;type=all&amp;amp;language=&amp;amp;sort="&gt;https://github.com/spseol?q=&lt;span class="caps"&gt;DBI&lt;/span&gt;-&amp;amp;type=all&amp;amp;language=&amp;amp;sort=&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Programování"></category><category term="Python"></category><category term="programování"></category><category term="web"></category><category term="databáze"></category><category term="Flask"></category></entry><entry><title>PRG</title><link href="https://chytrosti.marrek.cz/prg.html" rel="alternate"></link><published>2022-10-20T06:56:05+02:00</published><updated>2022-10-20T06:56:05+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2022-10-20:/prg.html</id><summary type="html">
&lt;h2 id="tahak"&gt;Tahák&lt;a class="headerlink" href="#tahak" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Vytvořil jsem tahák, kde je z Pythonu více-méně vše, co byste měli mít v pohotovostní
výbavě. Tyto texty lze číst buď na 
&lt;a href="https://github.com/spseol/PRG-No/blob/master/README.md"&gt;Githubu&lt;/a&gt;
nebo 
&lt;a href="http://nbviewer.jupyter.org/github/spseol/PRG-NO/blob/master/README.ipynb"&gt;nbvieweru&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="instalace"&gt;Instalace&lt;a class="headerlink" href="#instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;návod &lt;a href="https://nbviewer.org/github/spseol/PRG-NO/blob/master/instalace.ipynb"&gt;zde&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Klíčové je nainstalovat i &lt;a href="https://chytrosti.marrek.cz/pip-a-venv.html"&gt;pip&lt;/a&gt; a přidat si Python do 
proměnné prostředí &lt;code&gt;PATH&lt;/code&gt;: &lt;code&gt;Add Python to PATH&lt;/code&gt;, &lt;code&gt;add Python to enviroment …&lt;/code&gt;&lt;/p&gt;</summary><content type="html">
&lt;h2 id="tahak"&gt;Tahák&lt;a class="headerlink" href="#tahak" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Vytvořil jsem tahák, kde je z Pythonu více-méně vše, co byste měli mít v pohotovostní
výbavě. Tyto texty lze číst buď na 
&lt;a href="https://github.com/spseol/PRG-No/blob/master/README.md"&gt;Githubu&lt;/a&gt;
nebo 
&lt;a href="http://nbviewer.jupyter.org/github/spseol/PRG-NO/blob/master/README.ipynb"&gt;nbvieweru&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="instalace"&gt;Instalace&lt;a class="headerlink" href="#instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;návod &lt;a href="https://nbviewer.org/github/spseol/PRG-NO/blob/master/instalace.ipynb"&gt;zde&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Klíčové je nainstalovat i &lt;a href="https://chytrosti.marrek.cz/pip-a-venv.html"&gt;pip&lt;/a&gt; a přidat si Python do 
proměnné prostředí &lt;code&gt;PATH&lt;/code&gt;: &lt;code&gt;Add Python to PATH&lt;/code&gt;, &lt;code&gt;add Python to enviroment variables&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="editor"&gt;Editor&lt;a class="headerlink" href="#editor" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Základní instalace Pythonu už sama v sobě obsahuje jednoduché vývojové
prostředí a jednoduchou interaktivní konzolu &lt;span class="caps"&gt;IDLE&lt;/span&gt;. Toto prostředí je poměrně
jednoduché, ale rozhodně se nedá říct, že by se v něm nedalo pracovat. Existuje
ale celá řada hezčích a propracovanějších 
&lt;a href="https://wiki.python.org/moin/IntegratedDevelopmentEnvironments"&gt;vývojových prostředí&lt;/a&gt;.
Já doporučuji &lt;a href="https://chytrosti.marrek.cz/vscodecodium.html"&gt;VSCode/Codium&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="git"&gt;Git&lt;a class="headerlink" href="#git" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Pro sdílení práce a odevzdávání domácích úkolů používáme systém
&lt;a href="https://git-scm.org"&gt;Git&lt;/a&gt; a server &lt;a href="https://github.com"&gt;GitHub&lt;/a&gt;.
Stojí také za to, zmínit se 
o &lt;a href="https://education.github.com/"&gt;GitHub programu pro vzdělávání&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Gitu se věnuji v &lt;a href="https://chytrosti.marrek.cz/git.html"&gt;samostatném postu Git&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="dokumentace"&gt;Dokumentace&lt;a class="headerlink" href="#dokumentace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Naprostou většinu všech vašich dotazů vyřeší vyhledávač
&lt;a href="https://search.brave.com/search?q=how+to+python"&gt;prostým dotazem&lt;/a&gt;. Nicméně považuji
za dobré zmínit, že Python má svou vlastní – docela dobrou – 
&lt;a href="https://doc.python.org/"&gt;dokumentaci&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Velmi užitečná je i best practices kniha 
&lt;a href="https://docs.python-guide.org"&gt;Stopařův průvodce Pythontem&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="knihovny"&gt;Knihovny&lt;a class="headerlink" href="#knihovny" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Knihovny se nejlépe instalují pomocí &lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt;. Tématu se věnuji
v &lt;a href="https://chytrosti.marrek.cz/pip-a-venv.html"&gt;samostatném postu Pip&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="interaktivni-interpret-shell"&gt;Interaktivní interpret shell&lt;a class="headerlink" href="#interaktivni-interpret-shell" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Pro různé zkoušení a testování se se hodí Python v režimu interaktivním režimu
(&lt;a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop"&gt;&lt;span class="caps"&gt;REPL&lt;/span&gt;&lt;/a&gt;).
Nejjednodušší je napsat do příkazové řádky příkaz &lt;code&gt;python&lt;/code&gt; nebo &lt;code&gt;python3&lt;/code&gt;.
Tento shell je ale poměrně chudý a nepohodlný. Pokud chcete trochu více
pohodlíčka doporučuji jeden z následujících.&lt;/p&gt;
&lt;h3 id="ptpython"&gt;ptpython&lt;a class="headerlink" href="#ptpython" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/prompt-toolkit/ptpython"&gt;ptpython&lt;/a&gt; se instaluje se přes
&lt;a href="https://chytrosti.marrek.cz/pip-a-venv.html"&gt;pip&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install ptpython
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;a spouští se příkazem &lt;code&gt;ptpython&lt;/code&gt; případně (viz níže) &lt;code&gt;ptipython&lt;/code&gt;.
Vše z příkazové řádky. (Ve Windows ❖Win+X, PowerShell)&lt;/p&gt;
&lt;h3 id="ipython"&gt;IPython&lt;a class="headerlink" href="#ipython" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://ipython.org/"&gt;IPython&lt;/a&gt; se instaluje také pomocí
&lt;a href="https://chytrosti.marrek.cz/pip-a-venv.html"&gt;pip&lt;/a&gt; buď přímo nebo jako součást balíčku
&lt;a href="https://jupyter.org"&gt;Jupyter&lt;/a&gt;. V Linuxu můžete místo &lt;code&gt;pip&lt;/code&gt; s výhodou použít
balíčkovací systém.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install ptpython ipython
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Interpret se spouští příkazem &lt;code&gt;ptipython&lt;/code&gt; nebo &lt;code&gt;ipython&lt;/code&gt;. Někdy (na Windows
člověk nikdy neví) si musíte dát práci a najít spustitelný soubor &lt;code&gt;ipython.exe&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id="jupyter-qtconsole"&gt;Jupyter (Qt)Console&lt;a class="headerlink" href="#jupyter-qtconsole" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;V Linuxu můžete opět použít balíčkovací systém. Jinak opět &lt;a href="https://chytrosti.marrek.cz/pip-a-venv.html"&gt;pip&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pokud vám stačí rozhraní příkazového řádku:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install jupyter-console
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pokud požadujete myšovaté grafické rozhraní:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install qtconsole pyqt5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Samotné spuštění se děje zavolání příkazu &lt;code&gt;jupyter-console&lt;/code&gt; nebo
&lt;code&gt;jupyter-qtconsole&lt;/code&gt;.&lt;/p&gt;</content><category term="Programování"></category><category term="Python"></category><category term="programování"></category></entry><entry><title>MIT</title><link href="https://chytrosti.marrek.cz/mit.html" rel="alternate"></link><published>2022-10-16T20:24:17+02:00</published><updated>2022-10-16T20:24:17+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2022-10-16:/mit.html</id><summary type="html">
&lt;p&gt;Pro výuku mikroprocesorové techniky používáme v současné době mikroprocesory řady 
&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s-series.html"&gt;&lt;span class="caps"&gt;STM8S&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="navody"&gt;Návody&lt;a class="headerlink" href="#navody" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Michal Dudka píše skvělý web o programování mikrokontrokérů:
&lt;a href="http://elektromys.eu"&gt;http://elektromys.eu&lt;/a&gt;. V sekci &lt;a href="http://elektromys.eu/stm8.php"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt;&lt;/a&gt;
najdete spoustu pro nás zajímavých věcí:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_0_stvp/clanek.html"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt; Programátory a Debuggery&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_3_gpio1/clanek.html"&gt;Vstupy a výstupy 1 – základy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_4_gpio2/clanek.html"&gt;Vstupy a výstupy 2 – tlačítko&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_5_gpio3/clanek.html"&gt;Vstupy a výstupy 3 …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">
&lt;p&gt;Pro výuku mikroprocesorové techniky používáme v současné době mikroprocesory řady 
&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s-series.html"&gt;&lt;span class="caps"&gt;STM8S&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="navody"&gt;Návody&lt;a class="headerlink" href="#navody" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Michal Dudka píše skvělý web o programování mikrokontrokérů:
&lt;a href="http://elektromys.eu"&gt;http://elektromys.eu&lt;/a&gt;. V sekci &lt;a href="http://elektromys.eu/stm8.php"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt;&lt;/a&gt;
najdete spoustu pro nás zajímavých věcí:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_0_stvp/clanek.html"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt; Programátory a Debuggery&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_3_gpio1/clanek.html"&gt;Vstupy a výstupy 1 – základy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_4_gpio2/clanek.html"&gt;Vstupy a výstupy 2 – tlačítko&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_5_gpio3/clanek.html"&gt;Vstupy a výstupy 3 – logické úrovně&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_6_gpio4/clanek.html"&gt;Vstupy a výstupy 4 – PullUp rezistory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_7_gpio5/clanek.html"&gt;Vstupy a výstupy 5 – Open-Drain&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_8_max7219/clanek.html"&gt;Ovládání displeje s &lt;span class="caps"&gt;MAX7219&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_9_clock/clanek.html"&gt;Clock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_10_lcd/clanek.html"&gt;Alfanumerické &lt;span class="caps"&gt;LCD&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_11_milis/clanek.html"&gt;Knihovna milis – “Multitasking”&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_12_automat/clanek.html"&gt;Stavový automat&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_13_chargepump/clanek.html"&gt;Nábojová pumpa&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="Buzení 7segmentového displeje"&gt;Buzení 7segmentového displeje&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/stm8_15_adc1/clanek.html"&gt;&lt;span class="caps"&gt;AD&lt;/span&gt; převodník&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Honza Vykydal pak napsal:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://gitlab.com/wykys/stm8-xikon/-/tree/main/exti"&gt;Externí přerušení - &lt;span class="caps"&gt;EXTI&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gitlab.com/wykys/stm8-xikon/-/tree/main/tim"&gt;Čítače / Časovače&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pro potřeby svojí výuky jsem sestavil následující:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://chytrosti.marrek.cz/generovani-zvuku-zaklady.html"&gt;Generování zvuku – základy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://chytrosti.marrek.cz/zakladni-pouziti-casovace.html"&gt;Základní použití časovače&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://chytrosti.marrek.cz/pouziti-casovace-jako-generatoru-pwm.html"&gt;Použití časovače jako generátoru &lt;span class="caps"&gt;PWM&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://chytrosti.marrek.cz/ultrazvukovy-meric-vzdalenosti-pomoci-timeru-tim2.html"&gt;Ultrazvukový měřič vzdálenosti pomocí timeru &lt;span class="caps"&gt;TIM2&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ze dílny Michala Dudky pochází tyto pro nás zajímavé články:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/clanky/avr1_adc2/clanek.html"&gt;&lt;span class="caps"&gt;IR&lt;/span&gt; senzor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.tajned.cz/2016/10/i2c-relativne-jednoduse/"&gt;&lt;span class="caps"&gt;I2C&lt;/span&gt; – Relativně jednoduše&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Další velice cenné informace nejdete v sekcích:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/elektro.php"&gt;Elektro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elektromys.eu/kratke.php"&gt;Různé krátké poznámky&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="dokumentace"&gt;Dokumentace&lt;a class="headerlink" href="#dokumentace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Celá řada &lt;span class="caps"&gt;STM8S&lt;/span&gt; používá stejnou sadu periferií. Jejich popis najdete
v &lt;a href="https://duckduckgo.com/?q=STM8S+reference+manual"&gt;reference manuálu&lt;/a&gt;
&lt;a href="https://www.st.com/content/ccc/resource/technical/document/reference_manual/9a/1b/85/07/ca/eb/4f/dd/CD00190271.pdf/files/CD00190271.pdf/jcr:content/translations/en.CD00190271.pdf"&gt;zde&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Různé čipy pak obsahují různou sadu těchto periferií. Co přesně se nachází na
kterém čipu (plus další specifické věci) lze najít v datasheetu:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://search.brave.com/search?q=STM8S208+datasheet"&gt;&lt;span class="caps"&gt;STM8S208&lt;/span&gt;&lt;/a&gt;
&lt;a href="https://www.st.com/resource/en/datasheet/stm8s207mb.pdf"&gt;zde&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://search.brave.com/search?q=STM8S103+datasheet"&gt;&lt;span class="caps"&gt;STM8S103&lt;/span&gt;&lt;/a&gt;
&lt;a href="https://www.st.com/resource/en/datasheet/stm8s103f2.pdf"&gt;zde&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://search.brave.com/search?q=STM8S105+datasheet"&gt;&lt;span class="caps"&gt;STM8S105&lt;/span&gt;&lt;/a&gt;
&lt;a href="https://www.st.com/resource/en/datasheet/stm8s105c4.pdf"&gt;zde&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="103/105 line" src="https://www.st.com/content/ccc/fragment/product_related/line_information/line_level_diagram/9b/96/4a/79/08/65/40/b6/STM8S103105_line_LN754.jpg/files/STM8S103105_line_LN754.jpg/_jcr_content/translations/en.STM8S103105_line_LN754.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;Přehled jednotlivých čipů jednotlivých řad
&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s-series.html"&gt;rodiny &lt;span class="caps"&gt;STM8S&lt;/span&gt;&lt;/a&gt;
pak najdete zde:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s-application-specific-line.html"&gt; Application Specific Line&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s-value-line.html"&gt;&lt;span class="caps"&gt;STM8S&lt;/span&gt; Value line&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s103-105.html"&gt;&lt;span class="caps"&gt;STM8S103&lt;/span&gt;/105&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s207-208.html"&gt;&lt;span class="caps"&gt;STM8S207&lt;/span&gt;/208&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="hardware"&gt;Hardware&lt;a class="headerlink" href="#hardware" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="nucleo-8s208rb"&gt;Nucleo-&lt;span class="caps"&gt;8S208RB&lt;/span&gt;&lt;a class="headerlink" href="#nucleo-8s208rb" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Ve výuce používáme vývojovou desku
&lt;a href="https://www.st.com/en/evaluation-tools/nucleo-8s208rb.html"&gt;Nucleo-&lt;span class="caps"&gt;8S208RB&lt;/span&gt;&lt;/a&gt;
s mikroprocesorem
&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s208rb.html"&gt;&lt;span class="caps"&gt;STM8S208RB&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Nucleo-8S208RB pinout %%" src="https://chytrosti.marrek.cz/mit/img/Nucleo-S208RB.png"/&gt;&lt;/p&gt;
&lt;p&gt;Tato deska je (ale nemusí být) napájena z &lt;span class="caps"&gt;USB&lt;/span&gt;. Obsahuje programátor s &lt;span class="caps"&gt;HW&lt;/span&gt;
debugerem a &lt;span class="caps"&gt;USB2UART&lt;/span&gt; bridge. Můžete si zvolit pinout, který je
Arduino-kompatibilní nebo plnohodnotný pinout, který sedí na univerzální &lt;span class="caps"&gt;PCB&lt;/span&gt;.
Je tu tedy vše, co pro začátek potřebujete. Vyčerpávající popis najdete v
článku &lt;a href="http://elektromys.eu/clanky/stm8_1_nucleo/clanek.html"&gt;&lt;span class="caps"&gt;STM8S208&lt;/span&gt; Nucleo&lt;/a&gt;
nebo v &lt;a href="https://www.st.com/resource/en/user_manual/dm00477617-stm8s208rbt6-nucleo64-board-stmicroelectronics.pdf"&gt;uživatelském manuálu&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="stm8s-discovery"&gt;&lt;span class="caps"&gt;STM8S&lt;/span&gt; Discovery&lt;a class="headerlink" href="#stm8s-discovery" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Dalším zajímavým vývojovým kitem je
&lt;a href="https://www.st.com/en/evaluation-tools/stm8s-discovery.html"&gt;&lt;span class="caps"&gt;STM8S&lt;/span&gt; &lt;span class="caps"&gt;DISCOVERY&lt;/span&gt;&lt;/a&gt;
s procesorem 
&lt;a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s105c6.html"&gt;&lt;span class="caps"&gt;STM8S105C6&lt;/span&gt;&lt;/a&gt;.
Kit obsahuje i maličkou bastl desku a programátor lze použít k programování
libovolného procesoru &lt;span class="caps"&gt;STM8S&lt;/span&gt;. Více opět 
v &lt;a href="https://www.st.com/resource/en/user_manual/cd00250600-stm8s-discovery-stmicroelectronics.pdf"&gt;uživatelském manuálu&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="STM8S Discovery kit %%" src="https://chytrosti.marrek.cz/mit/img/STM8S-Discovery-kit.jpg"/&gt;&lt;/p&gt;
&lt;h3 id="standalone-programator"&gt;Standalone programátor&lt;a class="headerlink" href="#standalone-programator" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Při řešení samostatných projektů budeme postupně přecházíme k vlastnímu
hardware, který by už neměl být na nepájivém poli, ale spíše na desce plošných
spojů. V těchto případech budeme potřebovat μprocesor, který bude přímo v
aplikaci a standalone programátor-debuger, pomocí kterého bude možné program
ladit a nahrát. Možností je vícero – moc hezky to má &lt;a href="http://elektromys.eu/clanky/stm8_0_stvp/clanek.html"&gt;popsáno
Michal&lt;/a&gt;. Doporučuji přečíst!&lt;/p&gt;
&lt;p&gt;(Jen bych doplním, že existuje ještě jeden klon &lt;span class="caps"&gt;ST&lt;/span&gt;-Linku, který se mně osobně
osvědčil: &lt;a href="https://www.aliexpress.com/wholesale?SearchText=ST-LINK+V2+STM8+emulator+download+super+procection"&gt;mini &lt;span class="caps"&gt;ST&lt;/span&gt;-&lt;span class="caps"&gt;LINK&lt;/span&gt;/V2 &lt;span class="caps"&gt;STM8&lt;/span&gt; &lt;span class="caps"&gt;STM32&lt;/span&gt; emulator download super protection&lt;/a&gt;)&lt;/p&gt;
&lt;h3 id="deroboard"&gt;DeroBoard&lt;a class="headerlink" href="#deroboard" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img alt="DeroBoard photo %%" src="https://chytrosti.marrek.cz/mit/img/deroboard-photo.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;V rámci dílenské praxe si ubastlíte vývojovou desku &lt;a href="https://gitlab.com/wykys/stm8s-dero-board"&gt;&lt;span class="caps"&gt;STM8S&lt;/span&gt; Dero
Board&lt;/a&gt;. Tuto desku můžete použít i
pro svoje samostatné projekty. Je osazena procesorem &lt;span class="caps"&gt;STM8S103F3&lt;/span&gt;. K dispozici
máte všechny &lt;a href="https://gitlab.com/wykys/stm8s-dero-board/-/tree/main/design"&gt;zdrojové soubory pro
KiCad&lt;/a&gt; a 
hezkou &lt;a href="https://wykys.gitlab.io/stm8s-dero-board/ibom.html"&gt;rozpisku součástek&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id="nebo"&gt;Nebo…&lt;a class="headerlink" href="#nebo" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Něco podobného, se stejným procesorem lze zakoupit i od čínských výrobců:
&lt;a href="https://www.aliexpress.com/wholesale?SearchText=STM8S103F3P6+development+board"&gt;&lt;span class="caps"&gt;STM8S103F3P6&lt;/span&gt; development
board&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="STM8S103F3P6 photo %%" src="https://chytrosti.marrek.cz/mit/img/STM8S103F3P6.jpeg"/&gt;&lt;/p&gt;
&lt;p&gt;Pokud poptáváte vybavenější procesor existuje podobná vývojová deska:
&lt;a href="https://www.aliexpress.com/wholesale?SearchText=STM8S105K4T6+Developmen+Board"&gt;&lt;span class="caps"&gt;STM8S105K4T6&lt;/span&gt; Developmen
Board&lt;/a&gt;.
Ta vám může posloužit podobně jako oficiální &lt;a href="https://www.st.com/en/evaluation-tools/stm8s-discovery.html"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt;
Discovery&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="STM8S105K4T6 photo %%" src="https://chytrosti.marrek.cz/mit/img/STM8S105K4T6.jpg"/&gt;&lt;/p&gt;
&lt;h3 id="usb-to-uart-bridge"&gt;&lt;span class="caps"&gt;USB&lt;/span&gt; to &lt;span class="caps"&gt;UART&lt;/span&gt; Bridge&lt;a class="headerlink" href="#usb-to-uart-bridge" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Pokud plánujete projekt, kde μprocesor komunikuje s PCčkem, bude se vám hodit
&lt;a href="https://www.aliexpress.com/wholesale?SearchText=USB+TTL+UART+convertor"&gt;převodník &lt;span class="caps"&gt;USB&lt;/span&gt; &lt;span class="caps"&gt;TTL&lt;/span&gt;
&lt;span class="caps"&gt;UART&lt;/span&gt;&lt;/a&gt;.
Dá se běžně zakoupit i na českých e-shopech. Ještě je dobré upozornit, že ne
každý operační systém automaticky komunikuje s každým čipem, proto je dobré
věnovat pozornost tomu, jakým čipem, je osazen převodník, který hodláte
zakoupit a zda se váš &lt;span class="caps"&gt;OS&lt;/span&gt; s tímto čipem kamarádí.&lt;/p&gt;
&lt;p&gt;&lt;img alt="USB to TTL UART photo %%" src="https://chytrosti.marrek.cz/mit/img/USB2UART.jpg"/&gt;&lt;/p&gt;
&lt;h3 id="univerzalni-pcb"&gt;Univerzální &lt;span class="caps"&gt;PCB&lt;/span&gt;&lt;a class="headerlink" href="#univerzalni-pcb" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Na projektové prototypování můžete s výhodou využít &lt;a href="https://electronics.stackexchange.com/questions/55236/how-to-make-traces-on-an-universal-pcb"&gt;univerzální (prototypovou)
desku&lt;/a&gt;.
Existuje celá řada variant a vzorů (třeba 
&lt;a href="https://www.tme.eu/cz/katalog/univerzalni-plosne-spoje_100110/?s_field=1000014&amp;amp;s_order=asc&amp;amp;limit=40&amp;amp;currency=CZK&amp;amp;page=1"&gt;tu&lt;/a&gt;
nebo &lt;a href="https://www.aliexpress.com/wholesale?SearchText=universal+prototipe+PCB+board"&gt;tam&lt;/a&gt;)
universálních bastl-desek; zde bych rád upozornil na některé – pro nás zajímavé:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;řady po třech: 
  &lt;a href="https://www.tme.eu/cz/details/rad-790-1/univerzalni-plosne-spoje/rademacher/790-1/"&gt;1&lt;/a&gt;
&lt;a href="https://www.aliexpress.com/item/1005002838248764.html"&gt;2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;jen body:
  &lt;a href="https://www.tme.eu/cz/details/rad-811-6/univerzalni-plosne-spoje/rademacher/811-6/"&gt;1&lt;/a&gt;
&lt;a href="https://www.aliexpress.com/item/1005002838214518.html"&gt;2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;s rozvodem napájení:
  &lt;a href="https://www.tme.eu/cz/details/pc-12/univerzalni-plosne-spoje/sci/"&gt;1&lt;/a&gt;
&lt;a href="https://www.aliexpress.com/item/32947164794.html"&gt;2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;s roztečí Arduino shield:
  &lt;a href="https://www.tme.eu/cz/details/a000080/reseni-arduino/arduino/shield-mega-proto-pcb-rev3/"&gt;1&lt;/a&gt;
&lt;a href="https://www.aliexpress.com/wholesale?SearchText=arduino+prototipe+PCB+board"&gt;2&lt;/a&gt;
&lt;a href="https://www.aliexpress.com/item/32841354009.html"&gt;3&lt;/a&gt;
&lt;a href="https://www.aliexpress.com/item/32814326060.html?"&gt;4&lt;/a&gt;.
  Tuto desku můžete použít s Nucleo-kitem Nucleo-&lt;span class="caps"&gt;8S208RB&lt;/span&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="admonition tip"&gt;
&lt;p class="admonition-title"&gt;Dutinkové a kolíkové lišty&lt;/p&gt;
&lt;p&gt;K univerzálním deskám se vám budou hodit &lt;a href="https://www.tme.eu/cz/katalog/?search=ZL262&amp;amp;s_field=1000011&amp;amp;s_order=desc"&gt;dutinkové
lišty&lt;/a&gt;
a &lt;a href="https://www.tme.eu/cz/katalog/?search=ZL201&amp;amp;s_field=1000011&amp;amp;s_order=desc"&gt;pinové
řady&lt;/a&gt;,
(&lt;a href="https://www.tme.eu/cz/katalog/?search=ZL211&amp;amp;s_field=1000011&amp;amp;s_order=desc"&gt;také zde&lt;/a&gt;)
s jejichž pomocí můžete svou univerzální desku posadit na
&lt;a href="#nucleo-8s208rb"&gt;Nucleo-&lt;span class="caps"&gt;8S208RB&lt;/span&gt;&lt;/a&gt; nebo &lt;a href="#stm8s-discovery"&gt;&lt;span class="caps"&gt;STM8S&lt;/span&gt; Discovery&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 id="dalsi-soucastky-a-hotove-moduly"&gt;Další součástky a hotové moduly&lt;a class="headerlink" href="#dalsi-soucastky-a-hotove-moduly" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Je ještě spousta dalších udělátek, které stojí za to zmínit. Omezím se jen na nákupní
seznamy. Je asi jasné, že mi nejde o konkrétní obchod, ale spíše o zboží, které
se jistě dá zakoupit i někde jinde.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.tme.eu/cz/parking/c9f279be1feb850079cc8bdf88943222467af88d.html"&gt;seznam na &lt;span class="caps"&gt;TME&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.laskakit.cz/oblibene/89af72c11f9e5e738f3074e7aa8a0bba4200e647"&gt;seznam na LaskKit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.aliexpress.com/p/wishlist/shareReflux.html?groupId=dGW2uj4YNVGDbjN2VCLzOJhU39eDkEz4y9Z4CGz2UIM%3D"&gt;seznam na AliExpressu&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="nastroje"&gt;Nástroje&lt;a class="headerlink" href="#nastroje" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Vývojové nástroje jsou &lt;span class="caps"&gt;IMHO&lt;/span&gt; největší slabina platformy &lt;span class="caps"&gt;STM8&lt;/span&gt;,
ale při troše snahy se to dá &lt;code&gt;:)&lt;/code&gt;. Co se ale &lt;span class="caps"&gt;ST&lt;/span&gt; povedlo, to je nástrtoj
&lt;a href="https://www.st.com/en/development-tools/stm8cubemx.html"&gt;STM8CubeMX&lt;/a&gt;.
Doporučuji si ho nainstalovat. Není nijak klíčový, ale hodí se.&lt;/p&gt;
&lt;h3 id="opensource-nastroje-nejen-pro-linux"&gt;OpenSource nástroje nejen pro Linux&lt;a class="headerlink" href="#opensource-nastroje-nejen-pro-linux" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Celou problematiku jsem zpracoval v samostatném návodu: 
&lt;strong&gt;&lt;a href="https://chytrosti.marrek.cz/stm8oss.html"&gt;Vývoj &lt;span class="caps"&gt;STM8&lt;/span&gt; s OpenSource nástroji&lt;/a&gt;&lt;/strong&gt;. 
Ve zkratce to vypadá takto: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kompilátor &lt;a href="http://sdcc.sourceforge.net/"&gt;&lt;span class="caps"&gt;SDCC&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Jako vývojové prostředí doporučuji &lt;a href="https://vscodium.com/"&gt;VSCodium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Moje šablona pro vývoj &lt;span class="caps"&gt;SDCC&lt;/span&gt; a &lt;span class="caps"&gt;GNU&lt;/span&gt; Make &lt;a href="https://github.com/spseol/start-stm8"&gt;https://github.com/spseol/start-stm8&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Starší anglický návod s několika mouchama: &lt;a href="https://github.com/hbendalibraham/stm8_started"&gt;https://github.com/hbendalibraham/stm8_started&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="cosmic-stm8eclipse-balicek-pro-linux"&gt;Cosmic &lt;span class="caps"&gt;STM8&lt;/span&gt;+Eclipse balíček pro Linux&lt;a class="headerlink" href="#cosmic-stm8eclipse-balicek-pro-linux" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Zatím je vše ve fázi testování. Zveřejněno v lednu 2022:
&lt;a href="https://www.cosmicsoftware.com/download_stm8_eclipse.php"&gt;https://www.cosmicsoftware.com/download_stm8_eclipse.php&lt;/a&gt;
Projekt vypadá velmi slibně.&lt;/p&gt;
&lt;h3 id="nastroje-pro-m-windows"&gt;Nástroje pro M$ Windows&lt;a class="headerlink" href="#nastroje-pro-m-windows" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Vše velmi hezky zpracoval 
  &lt;a href="http://elektromys.eu/clanky/stm8_2_stvd/clanek.html"&gt;Michal Dudka na Elektromyši&lt;/a&gt;.
  Součástí je i vzorový projekt s knihovnami pro &lt;span class="caps"&gt;STM8S103&lt;/span&gt;, &lt;span class="caps"&gt;STM8S105&lt;/span&gt; a &lt;span class="caps"&gt;STM8S208&lt;/span&gt;.&lt;/li&gt;
&lt;li&gt;Jako vývojové prostředí leze použít
  &lt;a href="https://www.st.com/en/development-tools/stvd-stm8.html"&gt;&lt;span class="caps"&gt;STVD&lt;/span&gt;&lt;/a&gt;
  s komipilátorem
  &lt;a href="https://www.cosmicsoftware.com/download_stm8_free.php"&gt;Cosmic&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Oba nástroje je možné bezplatně používat, když se zaregistrujete. Bohužel
  nejsou ani jeden 
  &lt;a href="https://cs.wikipedia.org/wiki/Otevřený_software"&gt;OpenSource&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="odkazy"&gt;Odkazy&lt;a class="headerlink" href="#odkazy" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.fit.vutbr.cz/~martinek/clang/"&gt;http://www.fit.vutbr.cz/~martinek/clang/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://jaknaprojekty.davidm.cz/"&gt;http://jaknaprojekty.davidm.cz/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.tutorialspoint.com/cprogramming/"&gt;https://www.tutorialspoint.com/cprogramming/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Wikibook &lt;a href="https://cs.wikipedia.org/wiki/C_(programovací_jazyk)"&gt;Programuje v jazyce C&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;</content><category term="MITka"></category><category term="Céčko"></category><category term="STM8"></category><category term="programování"></category></entry><entry><title>Git</title><link href="https://chytrosti.marrek.cz/git.html" rel="alternate"></link><published>2022-09-14T21:07:29+02:00</published><updated>2022-09-14T21:07:29+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2022-09-14:/git.html</id><summary type="html">
&lt;p&gt;Git najdete na &lt;a href="https://git-scm.com/"&gt;https://git-scm.com/&lt;/a&gt;. Ovládá se z příkazové řádky. Pokud
toužíte po nějakém grafickém ovládání stačí si vybrat 
z &lt;a href="https://git-scm.com/downloads/guis/"&gt;dlouhého seznamu&lt;/a&gt; ten,
co se vám bude zdát nejhezčí. GitHub má svou vlastní grafickou
&lt;a href="https://desktop.github.com"&gt;aplikaci&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Vynikajícím začátkem s Gitem je volně šiřitelná kniha &lt;a href="https://knihy.nic.cz/#ProGit"&gt;Pro Git&lt;/a&gt;,
ve které najdete vše …&lt;/p&gt;</summary><content type="html">
&lt;p&gt;Git najdete na &lt;a href="https://git-scm.com/"&gt;https://git-scm.com/&lt;/a&gt;. Ovládá se z příkazové řádky. Pokud
toužíte po nějakém grafickém ovládání stačí si vybrat 
z &lt;a href="https://git-scm.com/downloads/guis/"&gt;dlouhého seznamu&lt;/a&gt; ten,
co se vám bude zdát nejhezčí. GitHub má svou vlastní grafickou
&lt;a href="https://desktop.github.com"&gt;aplikaci&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Vynikajícím začátkem s Gitem je volně šiřitelná kniha &lt;a href="https://knihy.nic.cz/#ProGit"&gt;Pro Git&lt;/a&gt;,
ve které najdete vše potřebné v češtině. Lze číst i na webu: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://git-scm.com/book/cs/v1"&gt;první vydání&lt;/a&gt; – celé v češtině&lt;/li&gt;
&lt;li&gt;&lt;a href="https://git-scm.com/book/cs/v2"&gt;druhé vydání&lt;/a&gt; – není přeloženo celé;
    můžete se tedy &lt;a href="https://github.com/pepr/progit2-cs"&gt;zapojit do překladu&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pro efektivní používaní tohoto skvělého nástroje vám stačí přečíst si &lt;strong&gt;první tři
kapitoly&lt;/strong&gt;. Nenechte se tedy odradit, stojí to jistě za to.&lt;/p&gt;
&lt;p&gt;Zde je ještě malý rychlokurs (pokud někdo není spokojen s knihou):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://naucse.python.cz/lessons/git/basics/"&gt;Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://naucse.python.cz/lessons/git/install/"&gt;Instalace gitu&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://naucse.python.cz/lessons/git/branching/"&gt;Větvení v Gitu&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://naucse.python.cz/lessons/git/ignoring/"&gt;Ignorování souborů&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://naucse.python.cz/lessons/git/collaboration/"&gt;Spolupráce a Open source&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://naucse.python.cz/lessons/git/git-collaboration-2in1/"&gt;Spolupráce a Git&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;ul&gt;
&lt;li&gt;… nebo jeden &lt;a href="https://gitlab.com/wykys/stm8-xikon/-/tree/main/git"&gt;stručný návod&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Zde referenční příručka: &lt;a href="https://git-scm.com/docs"&gt;https://git-scm.com/docs&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="videa"&gt;Videa&lt;a class="headerlink" href="#videa" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a class="video-preview" href="https://youtu.be/BzrRey7McSk"&gt;&lt;img alt="Základy systému Git" data-frames="16" src="https://chytrosti.marrek.cz/images/git-zaklad_preview.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="video-preview" href="https://youtu.be/uk_5dGlWLnQ"&gt;&lt;img alt="Git a GitHub" data-frames="16" src="https://chytrosti.marrek.cz/images/git-github-2_preview.jpg"/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="instalace"&gt;Instalace&lt;a class="headerlink" href="#instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Ve Windows doporučuji použít &lt;a href="https://chytrosti.marrek.cz/chocolatey.html"&gt;Chocolatey&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="pocatecni-nastaveni"&gt;Počáteční nastavení&lt;a class="headerlink" href="#pocatecni-nastaveni" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Než budete Git používat, je třeba nakonfigurovat vaše jméno a e-mail. Je to proto,
jméno a e-mail autora je součástí každého snímku – commitu.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git config --global user.name &lt;span class="s2"&gt;"John Doe"&lt;/span&gt;
git config --global user.email john@doe.name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Parametr &lt;code&gt;--global&lt;/code&gt; říká, že je to nastavení pro celý uživatelský účet. Pokud ho 
nepoužijete, bude se nastavení týkat jen toho repositáře, ve kterém příkaz spustíte.&lt;/p&gt;
&lt;h2 id="ssh"&gt;&lt;span class="caps"&gt;SSH&lt;/span&gt;&lt;a class="headerlink" href="#ssh" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Pokud chcete (ano chcete) používat nějaké vzdálené úložiště (např. &lt;a href="https://cs.wikipedia.org/wiki/GitHub"&gt;GitHub&lt;/a&gt;
nebo &lt;a href="https://cs.wikipedia.org/wiki/GitLab"&gt;GitLab&lt;/a&gt;), je &lt;a href="https://cs.wikipedia.org/wiki/SSH"&gt;&lt;span class="caps"&gt;SSH&lt;/span&gt;&lt;/a&gt; jeden se způsobů jak (pohodlně) přenášet data mezi
lokálním a vzdáleným repositářem. Nejprve je třeba si vygenerovat 
&lt;a href="https://cs.wikipedia.org/wiki/Asymetrick%C3%A1_kryptografie"&gt;key-pair&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ssh-keygen
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;nebo&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ssh-keygen -t ed25519
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Během generování budete dotazování na passphrase. Pokud tuto doplňkovou ochranu
nechcete použít a stačí vám utajení klíče, který bude ležet na vašem disku,
dejte jen dvakrát Enter. Já passphrase zadávám a používám 
&lt;a href="https://en.wikipedia.org/wiki/Ssh-agent"&gt;&lt;span class="caps"&gt;SSH&lt;/span&gt; agenta&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pozorně sledujte kam se klíče uloží. Třeba v Linuxu je to
&lt;code&gt;~/.ssh/id_ed25519&lt;/code&gt; pro tajný/privátní klíč a &lt;code&gt;~/.ssh/id_ed25519.pub&lt;/code&gt; pro veřejný klíč.&lt;/p&gt;
&lt;p&gt;Celá akce končí tím, že svůj veřejný klíč – tedy obsah souboru s příponou &lt;code&gt;.pub&lt;/code&gt;,
uložíte do svého profilu na GitHub/GitLab: &lt;code&gt;Settings -&amp;gt; SSH and GPG keys&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Další detaily naleznete například v &lt;a href="https://www.abclinuxu.cz/clanky/bezpecnost/openssh-bezpecne-a-pohodlne"&gt;tomto článku na AbcLinuxu&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="https"&gt;&lt;span class="caps"&gt;HTTPS&lt;/span&gt;&lt;a class="headerlink" href="#https" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Druhým, alternativním způsobem přenosu dat je protokol &lt;span class="caps"&gt;HTTPS&lt;/span&gt;. Zde je třeba při
každém přenosu &lt;a href="https://git-scm.com/docs/gitcredentials"&gt;zadávat&lt;/a&gt; jméno a
heslo. Pokud používáte nějakou klíčenku pro ukládání hesel můžete to Gitu říct takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git config --global credential.helper klicenka_cmd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pokud klíčenku nepoužíváte nebo chcete, aby vaše přihlašovací údaje uchovával
přímo Git v &lt;a href="https://git-scm.com/docs/git-credential-store"&gt;nešifrované podobě&lt;/a&gt;, je
to tento příkaz:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git config --global credential.helper store
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Git se vás pak na vaše přihlašovací údaje zeptá jen jednou a uloží se je do souboru 
&lt;code&gt;~/.git-credentials&lt;/code&gt;. Ten může vypadat třeba takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;https://jmeno:personal_token@github.com
https://jmeno:heslo_nebo_token@gitlab.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pokud si má Git přihlašovací údaje pamatovat jen dočasně 
&lt;a href="https://git-scm.com/docs/git-credential-cache"&gt;nastaví se&lt;/a&gt; &lt;code&gt;.helper&lt;/code&gt; na &lt;code&gt;cache&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Je ještě dobré podotknout, že GitHub neumožňuje přihlášení pomocí hesla: je nutné si
vygenerovat &lt;a href="https://github.com/settings/tokens"&gt;Personal access token&lt;/a&gt;.
(Až ho budete generovat, tak v právech odfajfkujte &lt;code&gt;workflow&lt;/code&gt;.)
Návod &lt;a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token"&gt;zde&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="verejna-webova-uloziste"&gt;Veřejná (webová) úložiště&lt;a class="headerlink" href="#verejna-webova-uloziste" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Nejznámější veřejná úložiště pro Git jsou asi tyto:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com"&gt;https://github.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gitlab.com"&gt;https://gitlab.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bitbucket.org"&gt;https://bitbucket.org&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kromě ukládaní repositářů zde naleznete i rozměr sociální sítě.
Asi se nedá říct, že jeden je lepší a druhý horší. Každý má svá pro a proti.&lt;/p&gt;
&lt;h2 id="pokusy-a-hracicky"&gt;Pokusy a hračičky&lt;a class="headerlink" href="#pokusy-a-hracicky" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://learngitbranching.js.org/"&gt;https://learngitbranching.js.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Oh my Git: &lt;a href="https://ohmygit.org/"&gt;https://ohmygit.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Programování"></category><category term="programování"></category><category term="Git"></category><category term="Céčko"></category></entry><entry><title>PSK</title><link href="https://chytrosti.marrek.cz/psk.html" rel="alternate"></link><published>2022-09-13T22:12:20+02:00</published><updated>2022-09-13T22:12:20+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2022-09-13:/psk.html</id><summary type="html">&lt;p&gt;Vše, co se týká &lt;span class="caps"&gt;PSK&lt;/span&gt; najdete zatím ma mém starším webu
&lt;a href="https://mamut.spseol.cz/nozka/psk"&gt;https://mamut.spseol.cz/nozka/psk&lt;/a&gt;. Snad se mi podaří tento obsah v nějaké 
dohledné době aktualizovat a přesunout&amp;nbsp;sem.&lt;/p&gt;
&lt;h2 id="linux"&gt;Linux&lt;a class="headerlink" href="#linux" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img alt="blik :-O" src="https://chytrosti.marrek.cz/images/matrix.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Mnou vytvořené studijní materiály o příkazovém řádku najdete zde:
&lt;a href="https://mamut.spseol.cz/nozka/psk/#_3"&gt;https://mamut.spseol.cz/nozka/psk/#_3&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="zaklady-pocitacovych-siti"&gt;Základy počítačových …&lt;/h2&gt;</summary><content type="html">&lt;p&gt;Vše, co se týká &lt;span class="caps"&gt;PSK&lt;/span&gt; najdete zatím ma mém starším webu
&lt;a href="https://mamut.spseol.cz/nozka/psk"&gt;https://mamut.spseol.cz/nozka/psk&lt;/a&gt;. Snad se mi podaří tento obsah v nějaké 
dohledné době aktualizovat a přesunout&amp;nbsp;sem.&lt;/p&gt;
&lt;h2 id="linux"&gt;Linux&lt;a class="headerlink" href="#linux" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img alt="blik :-O" src="https://chytrosti.marrek.cz/images/matrix.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Mnou vytvořené studijní materiály o příkazovém řádku najdete zde:
&lt;a href="https://mamut.spseol.cz/nozka/psk/#_3"&gt;https://mamut.spseol.cz/nozka/psk/#_3&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="zaklady-pocitacovych-siti"&gt;Základy počítačových sítí&lt;a class="headerlink" href="#zaklady-pocitacovych-siti" title="Permanent link"&gt;&amp;para;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Mnou vytvořené studijní materiály o počítačových sítí najdete zde:
&lt;a href="https://mamut.spseol.cz/nozka/psk/#_2"&gt;https://mamut.spseol.cz/nozka/psk/#_2&lt;/a&gt;&lt;/p&gt;</content><category term="PSKáčko"></category><category term="PSK"></category><category term="Linux"></category></entry><entry><title>Vývoj STM8 s OpenSource nástroji</title><link href="https://chytrosti.marrek.cz/stm8oss.html" rel="alternate"></link><published>2022-03-12T09:31:24+01:00</published><updated>2022-03-12T09:31:24+01:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2022-03-12:/stm8oss.html</id><summary type="html">
&lt;p&gt;Vývojové nástroje jsou asi největší slabinou celého ekosystému &lt;span class="caps"&gt;STM8&lt;/span&gt;. Výrobce
dodává vývojové prostředí &lt;span class="caps"&gt;STVD&lt;/span&gt; 
(&lt;a href="http://elektromys.eu/clanky/stm8_2_stvd/clanek.html"&gt;návod zde&lt;/a&gt;),
které je sice dostačující, ale staré a již nevyvíjené. Navíc se občas stane, že
na nějakém &lt;span class="caps"&gt;PC&lt;/span&gt; je problém to rozjet. Kompilátor Cosmic sice funguje, ale ta neustálá
kontrola licence, je fakt opruz; … a …&lt;/p&gt;</summary><content type="html">
&lt;p&gt;Vývojové nástroje jsou asi největší slabinou celého ekosystému &lt;span class="caps"&gt;STM8&lt;/span&gt;. Výrobce
dodává vývojové prostředí &lt;span class="caps"&gt;STVD&lt;/span&gt; 
(&lt;a href="http://elektromys.eu/clanky/stm8_2_stvd/clanek.html"&gt;návod zde&lt;/a&gt;),
které je sice dostačující, ale staré a již nevyvíjené. Navíc se občas stane, že
na nějakém &lt;span class="caps"&gt;PC&lt;/span&gt; je problém to rozjet. Kompilátor Cosmic sice funguje, ale ta neustálá
kontrola licence, je fakt opruz; … a jeho chybová hlášení mi taky
nepřišly úplně srozumitelná.  &lt;br/&gt;
A to jsem ještě nezmínil to hlavní: &lt;strong&gt;Na Linuxu to nejede!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="tools %%" src="https://chytrosti.marrek.cz/mit/img/tools.jpg"/&gt;&lt;/p&gt;
&lt;p&gt;Takže, co s tím? Použijeme
&lt;a href="https://cs.wikipedia.org/wiki/Otev%C5%99en%C3%BD_software"&gt;OpenSource&lt;/a&gt;
nástroje! Co je potřeba?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Vývojové prostředí&lt;/li&gt;
&lt;li&gt;Kompilátor&lt;/li&gt;
&lt;li&gt;Programátor/Flasher – software, kterým program do čipu nahraju&lt;/li&gt;
&lt;li&gt;Debuger&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Když jsem to celé tvořil hodně mi pomohla tato stránka, tak se tam můžete
mrknout: &lt;a href="https://github.com/hbendalibraham/stm8_started"&gt;https://github.com/hbendalibraham/stm8_started&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="predpripravena-instalace"&gt;Předpřipravená instalace&lt;a class="headerlink" href="#predpripravena-instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Připravil jsem pro vás výukovou image systému &lt;a href="https://devuan.org/"&gt;Devuan Linux&lt;/a&gt;,
kde je vše již nastaveno a nainstalováno. Nemusíte tedy vše ručně instalovat, stačí 
nainstalovat &lt;a href="https://www.virtualbox.org/"&gt;VirtualBox&lt;/a&gt; – včetně 
&lt;a href="https://www.virtualbox.org/wiki/Downloads"&gt;Extension Pack&lt;/a&gt;
a stáhnout si image:
&lt;a href="https://mamut.spseol.cz/nozka/public/site+VirtuaBox/000-obrazy-OVA/Devuan-X-MIT.ova"&gt;Devuan-X-&lt;span class="caps"&gt;MIT&lt;/span&gt;.ova&lt;/a&gt;.
I tak si ale přečtěte následující text ať víte, jak to máte použít.&lt;/p&gt;
&lt;p class="center"&gt;&lt;a href="https://mamut.spseol.cz/nozka/public/site+VirtuaBox/000-obrazy-OVA/Devuan-X-MIT.ova"&gt;https://mamut.spseol.cz/nozka/public/site+VirtuaBox/000-obrazy-&lt;span class="caps"&gt;OVA&lt;/span&gt;/Devuan-X-&lt;span class="caps"&gt;MIT&lt;/span&gt;.ova&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="rychla-instalace"&gt;Rychlá instalace&lt;a class="headerlink" href="#rychla-instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Dále v textu jsou popsány detaily. Zde je na jednom místě sepsána rychlá instalace
nástrojů, které budete potřebovat.&lt;/p&gt;
&lt;h3 id="windows"&gt;Windows&lt;a class="headerlink" href="#windows" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Nejprve nainstalujte &lt;a href="https://chytrosti.marrek.cz/chocolatey.html"&gt;Chocolatye&lt;/a&gt;. Tedy:&lt;/p&gt;
&lt;p&gt;Pomocí &lt;code&gt;Win+X&lt;/code&gt; a spustíte PowerShell jako Administrátor
a zadáte příkaz:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ExecutionPolicy&lt;/span&gt; &lt;span class="n"&gt;Bypass&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Scope&lt;/span&gt; &lt;span class="n"&gt;Process&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Force&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ServicePointManager&lt;/span&gt;&lt;span class="p"&gt;]::&lt;/span&gt;&lt;span class="n"&gt;SecurityProtocol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ServicePointManager&lt;/span&gt;&lt;span class="p"&gt;]::&lt;/span&gt;&lt;span class="n"&gt;SecurityProtocol&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bor&lt;/span&gt; &lt;span class="mi"&gt;3072&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;iex&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;New&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb nb-Type"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WebClient&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DownloadString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'https://community.chocolatey.org/install.ps1'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Potom doinstalujte další potřebné nástroje:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install vscodium git make mingw openocd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pokud ještě nemáte Python, můžete i Python:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Instalace &lt;span class="caps"&gt;SDCC&lt;/span&gt; se musí naklikat. Instalátor stáhnete zde:
&lt;a href="https://sourceforge.net/projects/sdcc/files/sdcc-win64/"&gt;https://sourceforge.net/projects/sdcc/files/sdcc-win64/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="linux"&gt;Linux&lt;a class="headerlink" href="#linux" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo apt install sdcc sdcc-libraries git make openocd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="startovaci-toolchain"&gt;Startovací toolchain&lt;a class="headerlink" href="#startovaci-toolchain" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Připravil jsem startovací &lt;em&gt;strom zdrojových kódů&lt;/em&gt; a 
&lt;a href="https://cs.wikipedia.org/wiki/Make"&gt;Makefile&lt;/a&gt;.&lt;/p&gt;
&lt;p class="center"&gt;&lt;a href="https://github.com/spseol/STM8-start-toolchain"&gt;https://github.com/spseol/&lt;span class="caps"&gt;STM8&lt;/span&gt;-start-toolchain&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tento toolchain se dá použít jak v Linuxu tak ve Windows. Stačí nainstalovat 
&lt;a href="https://cs.wikipedia.org/wiki/Make"&gt;Make&lt;/a&gt;,
&lt;a href="https://cs.wikipedia.org/wiki/Bash"&gt;Bash&lt;/a&gt; a/také &lt;a href="https://chytrosti.marrek.cz/git.html"&gt;Git&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id="instalace"&gt;Instalace&lt;a class="headerlink" href="#instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;V Linuxu zavoláte něco jako:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;apt install make git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ve Windows je nejsnadnější instalovat pomocí &lt;a href="https://chytrosti.marrek.cz/chocolatey.html"&gt;Chocolatye&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install make git 
choco install openocd
choco install python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Bash je součásti balíčku Git. Ve Windows ještě stojí za to malinko si Bash připravit,
aby fungoval dobře s &lt;code&gt;make&lt;/code&gt;. Proto si si nakopírujte konfiguraci s &lt;code&gt;.make/bashrc&lt;/code&gt; do
domovského adresáře.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cp .make/bashrc ~/.bashrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="projekty-a-knihovna-spl"&gt;Projekty a knihovna &lt;span class="caps"&gt;SPL&lt;/span&gt;&lt;a class="headerlink" href="#projekty-a-knihovna-spl" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Adresářová struktura jednotlivých projektů vypadá takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;MIT
├── Projekt-1
│   ├── inc
│   ├── lib
│   └── src
├── Projekt-2
│   ├── inc
│   ├── lib
│   └── src
├── SPL
│   ├── inc
│   └── src
├── SPL-STM8S103
│   ├── inc
│   └── src
├── SPL-STM8S105
│   ├── inc
│   └── src
└── SPL-STM8S208
    ├── inc
    └── src
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Udělejte si adresář, kde budou všechny vaše projekty – v uvedeném příkladu je
to &lt;code&gt;MIT&lt;/code&gt;. V tom stejném adresáři budou i adresáře nazvané &lt;code&gt;SPL&lt;/code&gt;. V &lt;code&gt;SPL&lt;/code&gt;
adresářích je &lt;em&gt;Standard peripheral library&lt;/em&gt; od firmy &lt;a href="https://st.com/"&gt;&lt;span class="caps"&gt;ST&lt;/span&gt;&lt;/a&gt;.
Tato knihovna má dost divnou licenci a proto vám ji nemůžu jen tak dát. Měli
byste si ji
&lt;a href="https://duckduckgo.com/?q=stm8S+Standard+peripheral+library&amp;amp;t=vivaldi&amp;amp;ia=software"&gt;najít&lt;/a&gt;
a &lt;a href="https://www.st.com/en/embedded-software/stsw-stm8069.html"&gt;stáhnout&lt;/a&gt;. Pak je
třeba ještě aplikovat &lt;a href="https://github.com/gicking/STM8-SPL_SDCC_patch"&gt;patch&lt;/a&gt;,
který knihovnu předělá tak, aby se dala použít s naším &lt;em&gt;&lt;span class="caps"&gt;SDCC&lt;/span&gt;&lt;/em&gt; kompilátorem. Celé je
to docela pracné, ale zkuste napsat &lt;code&gt;make spl&lt;/code&gt; třeba se to zařídí samo.&lt;/p&gt;
&lt;h4 id="pouziti"&gt;Použití&lt;a class="headerlink" href="#pouziti" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;make spl&lt;/code&gt; – stáhne a nachystá knihovny&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make&lt;/code&gt; – provede kompilaci&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make flash&lt;/code&gt; – nahraje program do chipu&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make clean&lt;/code&gt; – smaže všechno, co nakompiloval&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make rebuild&lt;/code&gt; – smaže vše a znovu zkompiluje&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make openocd&lt;/code&gt; – spustí &lt;code&gt;openocd&lt;/code&gt; pro debug&lt;/li&gt;
&lt;li&gt;&lt;code&gt;make debug&lt;/code&gt; – spustí &lt;span class="caps"&gt;STM8&lt;/span&gt;-gdb&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="konkurence"&gt;Konkurence :)&lt;a class="headerlink" href="#konkurence" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Ještě bych měl zmínit, že kolega &lt;strong&gt;Wykys&lt;/strong&gt; vytvořil také toolchain, který je o dost
jednodušší a tím pádem i přehlednější:&lt;/p&gt;
&lt;p class="center"&gt;&lt;a href="https://gitlab.com/wykys/stm8-tools"&gt;https://gitlab.com/wykys/stm8-tools&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="vyvojove-prostredi"&gt;Vývojové prostředí&lt;a class="headerlink" href="#vyvojove-prostredi" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Jako editor a vývojové prostředí doporučuji 
&lt;a href="https://chytrosti.marrek.cz/vscodecodium.html"&gt;VScodium/VScode&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Instalace je popsána &lt;a href="https://chytrosti.marrek.cz/vscodecodium.html#instalace"&gt;zde&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="kompilace"&gt;Kompilace&lt;a class="headerlink" href="#kompilace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Popíšu tu celkem tři různá, mezi sebou se prolínající řešení. Špatná zpráva je,
že ani jedno z nich není 100%. Dobrá zpráva je, že při troše snahy se těm 100%
můžeme hodně přiblížit. Mezi jednotlivými řešeními se můžete snadno přepnout.&lt;/p&gt;
&lt;p&gt;K dispozici jsou tedy celkem tři &lt;code&gt;Makefile&lt;/code&gt; v adresáři 
&lt;a href="https://github.com/spseol/STM8-start-toolchain/tree/main/.make"&gt;&lt;code&gt;.make&lt;/code&gt;&lt;/a&gt;.
Přepnutí jen realizováno jako symlink &lt;code&gt;Makefile&lt;/code&gt; do root-adresáře projektu.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;$ ls -l
lrwx &lt;span class="m"&gt;1&lt;/span&gt; mar &lt;span class="m"&gt;23&lt;/span&gt; &lt;span class="m"&gt;14&lt;/span&gt;. led &lt;span class="m"&gt;21&lt;/span&gt;.14 Makefile -&amp;gt; .make/Makefile-sdcc-gas
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Na divných systémech, které symlink neumí (například Windows) se natvrdo kopíruje,
takže tato operace může být ztrátová. V &lt;em&gt;Makefile&lt;/em&gt; je vše připraveno, takže
stačí volat &lt;code&gt;make&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    make switch-sdcc      &lt;span class="c1"&gt;# respektive&lt;/span&gt;
    make switch-sdccrm    &lt;span class="c1"&gt;# respektive&lt;/span&gt;
    make switch-sdcc-gas  &lt;span class="c1"&gt;# respektive&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="reseni-1-sdcc"&gt;Řešení 1: &lt;span class="caps"&gt;SDCC&lt;/span&gt;&lt;a class="headerlink" href="#reseni-1-sdcc" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://sdcc.sourceforge.net/"&gt;&lt;span class="caps"&gt;SDCC&lt;/span&gt; - Small Device C Compiler&lt;/a&gt; je kompilátor
pro různé, více či méně známé 8-bitové architektury. Z hlediska &lt;span class="caps"&gt;STM8&lt;/span&gt; má jednu
zásadní nevýhodu: &lt;strong&gt;nedokáže odstranit nepoužívaný kód&lt;/strong&gt;. Co to znamená? No…
pokud si všechno píšete sami, tak to prakticky neznamená nic. Pokud ovšem
použijete nějakou knihovnu (jako například &lt;em&gt;&lt;span class="caps"&gt;SPL&lt;/span&gt;&lt;/em&gt;), tak už vám to začne hodně
vadit, protože výsledný strojový kód obsahuje spoustu funkcí, které jste
kompilovali jen proto, že byli součástí knihovny a ne proto, že jste je chtěli
použít. Tyto funkce nejsou nikde volány a proto by je měl 
&lt;a href="https://cs.wikipedia.org/wiki/Linker"&gt;linker&lt;/a&gt; odstranit. No a to je přesně to, co
se nestane &lt;code&gt;:-(&lt;/code&gt;.
Ve výsledku program, který by mohl mít cca 2-3 kB má 30 kB.&lt;/p&gt;
&lt;p&gt;Jediné skutečné řešení tohoto problému je použít níže uvedené 
&lt;a href="#reseni-2-sdccrm"&gt;sdccrm&lt;/a&gt; nebo
&lt;a href="#reseni-3-sdcc-gas"&gt;&lt;span class="caps"&gt;SDCC&lt;/span&gt;-gas&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pokud zůstanete u &lt;span class="caps"&gt;SDCC&lt;/span&gt; dá se tento problém částečně obejít tím, že budete
kompilovat jen ty části &lt;em&gt;&lt;span class="caps"&gt;SPL&lt;/span&gt;&lt;/em&gt;, které právě v tomto projektu potřebujete.
Velikost výsledného binárního souboru se tak rapidně zmenší, ale pokud budete
pracovat s čipem, který má jen 8 kB paměti programu, obávám se, že to
nemusí stačit….&lt;/p&gt;
&lt;p&gt;V &lt;em&gt;Makefile&lt;/em&gt; někde kolem řádku 77 najdete toto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;SPL_SOURCE&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; stm8s_gpio.c stm8s_clk.c stm8s_tim4.c stm8s_itc.c 
&lt;span class="c"&gt;#SPL_SOURCE += stm8s_uart1.c&lt;/span&gt;
&lt;span class="nv"&gt;SPL_SOURCE&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; stm8s_adc2.c
&lt;span class="c"&gt;#SPL_SOURCE += stm8s_flash.c&lt;/span&gt;
&lt;span class="c"&gt;#SPL_SOURCE += stm8s_tim1.c&lt;/span&gt;
&lt;span class="c"&gt;#SPL_SOURCE += stm8s_tim2.c&lt;/span&gt;
&lt;span class="c"&gt;#SPL_SOURCE += stm8s_tim3.c&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;… měli byste zakomentovat to, co nepotřebujete a odkomentovat jen to, co potřebujete.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Instalace &lt;span class="caps"&gt;SDCC&lt;/span&gt; v Linuxu&lt;/strong&gt; je poměrně snadná, protože &lt;span class="caps"&gt;SDCC&lt;/span&gt; je součásti většiny
Linuxových distribucí; takže zavoláte něco jako:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;apt install sdcc sdcc-libraries
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Ve Windows&lt;/strong&gt; si &lt;a href="https://sourceforge.net/projects/sdcc/files/"&gt;stáhnete
instalátor&lt;/a&gt; a pokračujte, ve
Windows oblíbeným klikáním.&lt;/p&gt;
&lt;h3 id="reseni-2-sdccrm"&gt;Řešení 2: sdccrm&lt;a class="headerlink" href="#reseni-2-sdccrm" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sdccrm&lt;/code&gt; je nástroj pro optimalizaci mrtvého kódu pro port stm8 &lt;span class="caps"&gt;SDCC&lt;/span&gt;, který
odstraňuje nepoužívané funkce.&lt;/p&gt;
&lt;p class="center"&gt;&lt;a href="https://github.com/XaviDCR92/sdccrm"&gt;https://github.com/XaviDCR92/sdccrm&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Jak to funguje?: Kód se nejprve zkompiluje do assembleru klasickým
&lt;a href="#reseni-1-sdcc"&gt;&lt;span class="caps"&gt;SDCC&lt;/span&gt;&lt;/a&gt;, poté se pomocí &lt;code&gt;sdccrm&lt;/code&gt; vymaže kód, který se nepoužívá,
celý proces se dokončí a kód se převede z assembleru do strojového kódu.&lt;/p&gt;
&lt;p&gt;Je to řešení tak nějak na půl cesty: Funguje, strojový kód je opravdu menší,
ale tato možnost &lt;strong&gt;&lt;a href="https://github.com/XaviDCR92/sdccrm#known-issues"&gt;vylučuje použití
debugeru&lt;/a&gt;&lt;/strong&gt;. To někdy, někomu
vadit může, jindy jinému to vadit nemusí.&lt;/p&gt;
&lt;p&gt;Dále je nutné &lt;strong&gt;ručně zadat&lt;/strong&gt; funkce, které nechcete “optimalizovat” – tedy vyhodit.
Proto je třeba sledovat chybová hlášení a název chybějící funkce zadat do
souboru &lt;code&gt;exclude_reference&lt;/code&gt; uvnitř projektového adresáře.&lt;/p&gt;
&lt;h4 id="instalace_1"&gt;Instalace&lt;a class="headerlink" href="#instalace_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;sdccrm&lt;/code&gt; si musíte buildnout ze zdrojových kódů. Jde o celkem malý program bez
závislostí, takže jde jednoduše kompilovat v Linuxu i ve Windows –
nicméně pro jistotu je Windows binárka součástí &lt;a href="#startovaci-toolchain"&gt;startovacího
toolsetu&lt;/a&gt; a je v souboru &lt;code&gt;.make/sdccrm.exe&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Ve Windows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;choco&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;mingw&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;nebo v Linuxu:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;apt install gcc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;a pak jen:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; sdccrm
make
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="reseni-3-sdcc-gas"&gt;Řešení 3: &lt;span class="caps"&gt;SDCC&lt;/span&gt;-gas&lt;a class="headerlink" href="#reseni-3-sdcc-gas" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p class="center"&gt;&lt;a href="https://github.com/XaviDCR92/sdcc-gas"&gt;https://github.com/XaviDCR92/sdcc-gas&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Toto je asi nejlepší řešení optimalizace (vyhození) mrtvého kódu. Vzniklo
přidáním podpory &lt;a href="https://cs.wikipedia.org/wiki/GNU_Assembler"&gt;&lt;span class="caps"&gt;GNU&lt;/span&gt; Assembleru&lt;/a&gt;
tedy &lt;em&gt;gas&lt;/em&gt; do &lt;span class="caps"&gt;SDCC&lt;/span&gt; 3.9.0. &lt;a href="https://codedocs.org/what-is/gnu-assembler"&gt;gas&lt;/a&gt; je
výhodou i nevýhodou tohoto řešení. Na jednu stranu to znamená, že můžeme
používat klasické nástroje z &lt;a href="https://cs.wikipedia.org/wiki/GNU_binutils"&gt;&lt;span class="caps"&gt;GNU&lt;/span&gt;
binutils&lt;/a&gt;, na druhou stranu to
znamená, že nelze použít ty části &lt;code&gt;sdcc-libraries&lt;/code&gt;, které jsou napsané v &lt;span class="caps"&gt;STM8&lt;/span&gt;
assembleru a je nutné použít méně optimální kód napsaný v C nebo &lt;span class="caps"&gt;STM8&lt;/span&gt; assembler
přepsat do &lt;span class="caps"&gt;GNU&lt;/span&gt; assembleru. …no a zřídka se stane, že nějaká vnitřní
funkcionalita (například násobení 64-bitových integerů) je napsaná jen v &lt;span class="caps"&gt;STM8&lt;/span&gt;
assembleru a vám nezbude, než to nějak obejít nebo danou funkci přepsat do &lt;span class="caps"&gt;GNU&lt;/span&gt; assembleru.&lt;/p&gt;
&lt;p&gt;Pokud vás to zajímá více můžete si počíst
&lt;a href="https://github.com/XaviDCR92/stm8-dce-example/issues/4#issuecomment-785013397"&gt;zde&lt;/a&gt;
a 
&lt;a href="https://github.com/XaviDCR92/stm8-dce-example/issues/2#issuecomment-700907460"&gt;zde&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Toto je důvod proč v &lt;em&gt;Makefile&lt;/em&gt; sdcc-gas jsou tyto řádky:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;SDCC_LIB_SRC_DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /usr/local/stow/sdcc-gas/share/sdcc/lib/src/
&lt;span class="nv"&gt;SDCC_LIB_SOURCE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; _mullong.c _divulong.c _mulint.c _modsint.c
&lt;span class="c"&gt;#SDCC_LIB_SOURCE  = $(notdir $(wildcard /usr/local/stow/sdcc-gas/share/sdcc/lib/src/_*.c))&lt;/span&gt;
&lt;span class="nv"&gt;SDCC_LIB_OBJECTS&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;addprefix &lt;span class="k"&gt;$(&lt;/span&gt;OUTPUT_DIR&lt;span class="k"&gt;)&lt;/span&gt;/, &lt;span class="k"&gt;$(&lt;/span&gt;SDCC_LIB_SOURCE:.c&lt;span class="o"&gt;=&lt;/span&gt;.o&lt;span class="k"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Případné problémy chybějících funkcí lze tedy vyřešit doplněním jména souboru
do proměnné &lt;code&gt;SDCC_LIB_SOURCE&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Aby vše fungovalo musíte si &lt;a href="https://github.com/XaviDCR92/sdcc-gas"&gt;stáhnout&lt;/a&gt;
výše zmíněné zdrojové kódy a buildnout je. Já to dělám takto (používám
&lt;a href="https://packages.debian.org/stable/stow"&gt;stow&lt;/a&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo apt install stow
sudo apt build-dep sdcc

&lt;span class="nb"&gt;cd&lt;/span&gt; sdcc-gas
./configure --prefix&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/stow/sdcc-gas
make
sudo make install

&lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/stow
sudo stow sdcc-gas
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podobný postup použijete pro 
&lt;a href="https://stm8-binutils-gdb.sourceforge.io/"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt; port&lt;/a&gt; &lt;span class="caps"&gt;GNU&lt;/span&gt; binutils, který 
je potřeba pro &lt;a href="https://cs.wikipedia.org/wiki/Linker"&gt;linkování&lt;/a&gt; a 
&lt;a href="https://cs.wikipedia.org/wiki/GNU_Debugger"&gt;debug&lt;/a&gt;.:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;tar xzf stm8-binutils-gdb-sources-2021-07-18.tar.gz
&lt;span class="nb"&gt;cd&lt;/span&gt; stm8-binutils-gdb-sources
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/stow/stm8-binutils-gdb
./patch_binutils.sh
&lt;span class="nb"&gt;cd&lt;/span&gt; binutils-2.30
make
sudo make install

&lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/stow
sudo stow  stm8-binutils-gdb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Tato výše popsaná kompilace ze zdrojových kódů je teoreticky možná i na Windows,
pomocí projektu &lt;a href="https://www.cygwin.com/"&gt;Cygwin&lt;/a&gt;. Prakticky jsem to nikdy
nezkoušel. Osobně bych šel (tedy pokud by mě někdo donutil používat Widows)
spíše cestou
&lt;a href="https://cs.wikipedia.org/wiki/Windows_Subsystem_for_Linux"&gt;Windows Subsystem for 
Linux&lt;/a&gt;.
Instalace &lt;span class="caps"&gt;WSL&lt;/span&gt; 2 je 
&lt;a href="https://docs.microsoft.com/en-us/windows/wsl/install"&gt;velice jednoduchá&lt;/a&gt;.
Bohužel do &lt;span class="caps"&gt;WSL&lt;/span&gt; se nativně nedá připojit &lt;span class="caps"&gt;USB&lt;/span&gt; – ale dá se to
&lt;a href="https://devblogs.microsoft.com/commandline/connecting-usb-devices-to-wsl/"&gt;řešit&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="flashing"&gt;Flashing&lt;a class="headerlink" href="#flashing" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id="openocd"&gt;OpenOCD&lt;a class="headerlink" href="#openocd" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://openocd.org"&gt;Open On-Chip Debugger&lt;/a&gt; je nástroj pro debug a krokování
programu přímo na čipu. &lt;code&gt;openocd&lt;/code&gt; umí i nahrát program do paměti zařízení.&lt;/p&gt;
&lt;p&gt;Instalaci zajistí na Linuxu jednoduchý příkaz:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo apt install openocd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;na Windows je to díky &lt;a href="https://chytrosti.marrek.cz/chocolatey.html"&gt;Chocolatye&lt;/a&gt; podobně jednoduché.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install openodc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Zdá se, že
&lt;a href="https://community.chocolatey.org/packages?q=openocd"&gt;Chocolatye už nabízí&lt;/a&gt;
verzi 0.11. Dříve to bylo jen 0.10. Tyto verze používají trochu jiné názvy
souborů, proto i příkaz vypadá jinak.   &lt;br/&gt;
Verze 0.10: &lt;code&gt;openocd  -f interface/stlink.cfg -f target/stm8s.cfg&lt;/code&gt; &lt;br/&gt;
Verze 0.11: &lt;code&gt;openocd  -f interface/stlink-dap.cfg -f target/stm8s.cfg&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;Toto se řeší v &lt;em&gt;Makefile&lt;/em&gt; pomocí proměnné &lt;code&gt;OPENOCD&lt;/code&gt;, takže si ji případně upravte.&lt;/p&gt;
&lt;p&gt;Aby &lt;code&gt;openodc&lt;/code&gt; umělo i pouhé flashování, je třeba přidat 
&lt;a href="https://gist.github.com/fabiovila/cbcf073928c0eb8036d2d2da023629d0"&gt;skript&lt;/a&gt;,
který to umí. Ten je buď součástí
&lt;a href="#startovaci-toolchain"&gt;startovacího toolsetu&lt;/a&gt; nebo ho můžete přidat
na konec konfiguračního souboru &lt;code&gt;stm8s.cfg&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;proc&lt;/span&gt; &lt;span class="nv"&gt;program_device&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;filename&lt;/span&gt; &lt;span class="nv"&gt;flashstart&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
  &lt;span class="nf"&gt;halt&lt;/span&gt;
  &lt;span class="nf"&gt;wait_halt&lt;/span&gt;
  &lt;span class="nf"&gt;load_image&lt;/span&gt; &lt;span class="kc"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;filename&lt;/span&gt; &lt;span class="kc"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;flashstart&lt;/span&gt;
  &lt;span class="nf"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
  &lt;span class="nf"&gt;reset&lt;/span&gt; &lt;span class="nv"&gt;halt&lt;/span&gt;
  &lt;span class="nf"&gt;resume&lt;/span&gt;
  &lt;span class="nf"&gt;sleep&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
  &lt;span class="nf"&gt;shutdown&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;V Linuxu by celá cesta mohla vypadat takto: &lt;code&gt;/usr/share/openocd/scripts/target/stm8s.cfg&lt;/code&gt;. 
Pokud jste do Windows instalovali pomocí Chocolatye, bude to nejspíš tato cesta:
&lt;code&gt;C:\ProgramData\chocolatey\lib\openocd\tools\OpenOCD-20190828-0.10.0\share\openocd\scripts\target\stm8s.cfg&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id="stm8flash"&gt;stm8flash&lt;a class="headerlink" href="#stm8flash" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Druhá možnost je program &lt;code&gt;stm8flash&lt;/code&gt;. Ve většině linuxových distribucí je třeba
ho ručně buildnout.&lt;/p&gt;
&lt;p class="center"&gt;&lt;a href="https://github.com/vdudouyt/stm8flash"&gt;https://github.com/vdudouyt/stm8flash&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="debuging-ladeni"&gt;Debuging – Ladění&lt;a class="headerlink" href="#debuging-ladeni" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img alt="GDB maskot &amp;gt;&amp;gt;" src="https://sourceware.org/gdb/images/archer.svg"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;GDB&lt;/span&gt; (&lt;a href="https://cs.wikipedia.org/wiki/GNU_Debugger"&gt;&lt;span class="caps"&gt;GNU&lt;/span&gt; Debugger&lt;/a&gt;) je standardní
nástroj na hledání chyb v software. Pokud budeme chtít program krokovat a  za
běhu se dívat do proměnných budeme potřebovat právě upravený 
&lt;a href="https://stm8-binutils-gdb.sourceforge.io/"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt;-&lt;span class="caps"&gt;GDB&lt;/span&gt;&lt;/a&gt;
z &lt;a href="https://cs.wikipedia.org/wiki/GNU_binutils"&gt;&lt;span class="caps"&gt;GNU&lt;/span&gt; binutils&lt;/a&gt;
a &lt;a href="#openocd"&gt;OpenOCD&lt;/a&gt; (Open On Chip Debuger).&lt;/p&gt;
&lt;h3 id="stm8-gdb"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt;-&lt;span class="caps"&gt;GDB&lt;/span&gt;&lt;a class="headerlink" href="#stm8-gdb" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt;-&lt;span class="caps"&gt;GDB&lt;/span&gt; je součástí &lt;span class="caps"&gt;GNU&lt;/span&gt; binutils. Instalaci jsem popsal výše. Pro přehlednost
ještě jednou:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;tar xzf stm8-binutils-gdb-sources-2021-07-18.tar.gz
&lt;span class="nb"&gt;cd&lt;/span&gt; stm8-binutils-gdb-sources
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/stow/stm8-binutils-gdb
./patch_binutils.sh
&lt;span class="nb"&gt;cd&lt;/span&gt; binutils-2.30
make
sudo make install

&lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/stow
sudo stow  stm8-binutils-gdb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No a teď samotný postup ladění:&lt;/p&gt;
&lt;h4 id="openocd_1"&gt;OpenOCD&lt;a class="headerlink" href="#openocd_1" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Nejprve je třeba pustit komunikaci s &lt;span class="caps"&gt;STM8&lt;/span&gt; čipem pomocí &lt;code&gt;openocd&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;openocd -f interface/stlink-dap.cfg -f target/stm8s.cfg -c "init" -c "reset halt"
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nebojte nemusíte to vždy znovu vypisovat. Je to napsané v &lt;em&gt;Makefile&lt;/em&gt;, takže
stačí zavolat&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;make openocd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id="gdb"&gt;&lt;span class="caps"&gt;GDB&lt;/span&gt;&lt;a class="headerlink" href="#gdb" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;…. a teď v dalším terminálu otevřeme &lt;code&gt;gdb&lt;/code&gt; a dáme se do ladění. &lt;strong&gt;Než
provedete toto, ujistěte se, že &lt;a href="#openocd_1"&gt;openocd&lt;/a&gt; již běží&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;stm8-gdb --tui build-STM8S208/out-STM8S208.elf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;opět stačí zavolat &lt;code&gt;make&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;make debug
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ano, je to textové rozhraní, žádná klikátka ani pouťové efekty. Pouze &lt;a href="https://sourceware.org/gdb/onlinedocs/gdb/Continuing-and-Stepping.html"&gt;textové
příkazy&lt;/a&gt;.&lt;/p&gt;
&lt;h4 id="rychlokurz-stm8-gdb"&gt;Rychlokurz &lt;span class="caps"&gt;STM8&lt;/span&gt;-&lt;span class="caps"&gt;GDB&lt;/span&gt;&lt;a class="headerlink" href="#rychlokurz-stm8-gdb" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;V programu funguje &lt;strong&gt;tabulátor&lt;/strong&gt;. To znamená, že při stisku klávesy &lt;code&gt;TAB&lt;/code&gt; se
&lt;span class="caps"&gt;GDB&lt;/span&gt; pokusí uhodnout, co chcete napsat a doplní slova tak, aby byla smysluplná.&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;code&gt;b main&lt;/code&gt;, &lt;code&gt;break main&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;nastaví breakpoint na vstup do funkce &lt;code&gt;main&lt;/code&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;b 48&lt;/code&gt;, &lt;code&gt;break 48&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;nastaví breakpoint na řádek 48&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;b milis.c:48&lt;/code&gt;, &lt;code&gt;break milis.c:48&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;nastaví breakpoint na řádek 48 v souboru &lt;code&gt;milis.c&lt;/code&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;info b&lt;/code&gt;, &lt;code&gt;info breakpoints&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;vypíše informace o breakpointech&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;info sources&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;vypíše seznam zdrojových souborů&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;d 2&lt;/code&gt;. &lt;code&gt;delete 2&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;vymaže breakpoint 2&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;r&lt;/code&gt;, &lt;code&gt;run&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;spustí program&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;interrupt&lt;/code&gt;, Ctrl+C&lt;/dt&gt;
&lt;dd&gt;přeruší program, program se zastaví tam, kde zrovna teď je&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;n&lt;/code&gt;, &lt;code&gt;next&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;vykoná jeden řádek zdrojového kódu&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;fin&lt;/code&gt;, &lt;code&gt;finish&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;dokončí funkci, ve které se program právě nachází (pokud v ní není další breakpoint)&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;c&lt;/code&gt;, &lt;code&gt;cont&lt;/code&gt;, &lt;code&gt;continue&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;pokračuje v běhu programu, dokud nenarazí na breakpoint&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;p time&lt;/code&gt;, &lt;code&gt;print time&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;vypíše obsah proměnné &lt;code&gt;time&lt;/code&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;p time&lt;/code&gt;, &lt;code&gt;print time&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;vypíše obsah proměnné &lt;code&gt;time&lt;/code&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;display time&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;vypíše obsah proměnné &lt;code&gt;time&lt;/code&gt; pokaždé, když se program zastaví&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;undisplay 2&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;už nebude vypisovat řádek 2, když se program zastaví&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Zde něco málo více k příkazům 
&lt;a href="https://visualgdb.com/gdbreference/commands/print"&gt;print&lt;/a&gt;
a &lt;a href="https://visualgdb.com/gdbreference/commands/display"&gt;display&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="GDB %%" src="https://chytrosti.marrek.cz/mit/img/gdb.png"/&gt;&lt;/p&gt;
&lt;h3 id="stm8-debugger-for-vscodecodium"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt; Debugger for vsCode/Codium&lt;a class="headerlink" href="#stm8-debugger-for-vscodecodium" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p class="center"&gt;&lt;a href="https://marketplace.visualstudio.com/items?itemName=CL.stm8-debug"&gt;https://marketplace.visualstudio.com/items?itemName=&lt;span class="caps"&gt;CL&lt;/span&gt;.stm8-debug&lt;/a&gt;&lt;/p&gt;</content><category term="MITka"></category><category term="STM8"></category><category term="programování"></category><category term="Céčko"></category></entry><entry><title>VSCode/Codium</title><link href="https://chytrosti.marrek.cz/vscodecodium.html" rel="alternate"></link><published>2021-11-20T16:48:54+01:00</published><updated>2021-11-20T16:48:54+01:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2021-11-20:/vscodecodium.html</id><summary type="html">
&lt;p&gt;V poslední době se mi jako editor nejvíc osvědčil VSCode/Codium. Já osobně sice
používáme &lt;a href="https://cs.wikipedia.org/wiki/Vim"&gt;VIm&lt;/a&gt;, ale ve výuce a se studenty
používáme VSCode/Codium. &lt;/p&gt;
&lt;p&gt;&lt;a href="https://code.visualstudio.com"&gt;Visual Studio Code&lt;/a&gt; je brilantní open-source
editor z dílny firmy Microsoft s vestavěnou podporou pro systém
&lt;a href="https://chytrosti.marrek.cz/git.html"&gt;Git&lt;/a&gt;. Editor je multiplatformní, takže je jedno jestli
používáte …&lt;/p&gt;</summary><content type="html">
&lt;p&gt;V poslední době se mi jako editor nejvíc osvědčil VSCode/Codium. Já osobně sice
používáme &lt;a href="https://cs.wikipedia.org/wiki/Vim"&gt;VIm&lt;/a&gt;, ale ve výuce a se studenty
používáme VSCode/Codium. &lt;/p&gt;
&lt;p&gt;&lt;a href="https://code.visualstudio.com"&gt;Visual Studio Code&lt;/a&gt; je brilantní open-source
editor z dílny firmy Microsoft s vestavěnou podporou pro systém
&lt;a href="https://chytrosti.marrek.cz/git.html"&gt;Git&lt;/a&gt;. Editor je multiplatformní, takže je jedno jestli
používáte MacOS, Linux nebo (nechápu proč by to někdo nělal…) Windows.&lt;/p&gt;
&lt;p&gt;Pokud by vám (stejně jako mně) vadilo, že Microsoft do balíčku s VSCode zabalí
i telemetrii (dřív se tomu říkalo špehování), tak existuje projekt
&lt;a href="https://vscodium.com/"&gt;Codium&lt;/a&gt;, který tímto neduhem netrpí.&lt;/p&gt;
&lt;p&gt;Oba projekty pochází ze stejných zdrojových kódů. Liší se pouze v tom, jak jsou
zabaleny. &lt;a href="https://vscodium.com/"&gt;Codium&lt;/a&gt; neobsahuje telemetrii a má marketplace nasměrovaný trošku
&lt;a href="https://open-vsx.org/extension/ms-python/python"&gt;jinam&lt;/a&gt;. Z toho vyplývá, že 
mohou nastat problémy při instalaci některých doplňků, protože
na &lt;a href="https://open-vsx.org/"&gt;open-vsx.org&lt;/a&gt; nejsou všechny doplňky, které najdete
na &lt;a href="https://marketplace.visualstudio.com/vscode"&gt;oficiálním maktetplacu&lt;/a&gt; a naopak.
Pokud se v této situaci ocitnete a opravdu moc toužíte po onom úžasném doplňku, který
na &lt;a href="https://open-vsx.org/"&gt;open-vsx.org&lt;/a&gt; prostě není, stačí ho 
z  &lt;a href="https://marketplace.visualstudio.com/vscode"&gt;oficiálním maktetplacu&lt;/a&gt; stáhnout
a v Codiu ručně nainstalovat.&lt;/p&gt;
&lt;p&gt;&lt;img alt="cliknu na download" src="https://chytrosti.marrek.cz/images/vscode_marketplace.png"/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="a potom na ..." src="https://chytrosti.marrek.cz/images/install-VSIX.png"/&gt;&lt;/p&gt;
&lt;h2 id="instalace"&gt;Instalace&lt;a class="headerlink" href="#instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;V Linuxu&lt;/strong&gt; závisí instalace hodně na konkrétní distribuci. Například na Ubuntu
se to prý dělá takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo apt install snapd
sudo snap install codium --classic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nebo můžete použít například 
&lt;a href="https://gitlab.com/paulcarroty/vscodium-deb-rpm-repo"&gt;vscodium-deb-rpm-repo&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;… a nebo všechno udělat &lt;a href="https://github.com/VSCodium/vscodium/releases"&gt;růčo&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Nejjednodušší způsob instalace &lt;strong&gt;ve Windows&lt;/strong&gt; je pomocí
&lt;a href="https://chytrosti.marrek.cz/chocolatey.html"&gt;Chocolatey&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install vscodium
choco install vscode
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="python"&gt;Python&lt;a class="headerlink" href="#python" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Pokud si doinstalujete doplněk 
&lt;code&gt;ms-python.python&lt;/code&gt;
(&lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python"&gt;zde&lt;/a&gt; nebo
&lt;a href="https://open-vsx.org/extension/ms-python/python"&gt;zde&lt;/a&gt;)
získáte vývojové prostředí, ve kterém vám s největší pravděpodobností nebude nic chybět.&lt;/p&gt;
&lt;p&gt;&lt;img alt="do vyhledávacího políčka zadám Python" src="https://chytrosti.marrek.cz/images/ms-python.png"/&gt;&lt;/p&gt;
&lt;h3 id="flaskjinaja2"&gt;Flask/Jinaja2&lt;a class="headerlink" href="#flaskjinaja2" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Dalším užitečným doplňkem je Better Jinja (
  &lt;a href="https://marketplace.visualstudio.com/items?itemName=samuelcolvin.jinjahtml"&gt;samuelcolvin.jinjahtml&lt;/a&gt; respektive 
  &lt;a href="https://open-vsx.org/extension/samuelcolvin/jinjahtml"&gt;samuelcolvin.jinjahtml&lt;/a&gt; ).&lt;/p&gt;
&lt;p&gt;Zde je dobré ještě říct, že když používáte šablony Jinja pro web, chcete většinou, aby 
vám fungovalo napovídání jak &lt;span class="caps"&gt;HTML&lt;/span&gt;, tak Jinja. Toho docílíte tak, že v nastavení si
přidáte do &lt;code&gt;Include Languages&lt;/code&gt;: &lt;code&gt;"jinja-html": "html"&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Include Languages %%" src="https://chytrosti.marrek.cz/images/inc_lan.png"/&gt;&lt;/p&gt;
&lt;h2 id="git"&gt;Git&lt;a class="headerlink" href="#git" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Git je v Codiu již integrován v základní podobě. Vše další po čem byste mohli
v této oblasti toužit dostanete instalací doplňku 
Git Extension Pack &lt;a href="https://open-vsx.org/extension/pinage404/git-extension-pack"&gt;pinage404.git-extension-pack&lt;/a&gt;. 
Ten v instaluje sadu doplňků:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GitLens &lt;a href="https://open-vsx.org/extension/eamodio/gitlens"&gt;eamodio.gitlens&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Git Graph &lt;a href="https://open-vsx.org/extension/mhutchie/git-graph"&gt;mhutchie.git-graph&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Git Project Manager &lt;a href="https://open-vsx.org/extension/felipecaputo/git-project-manager"&gt;felipecaputo.git-project-manager&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Git Web Links &lt;a href="https://open-vsx.org/extension/reduckted/vscode-gitweblinks"&gt;reduckted.vscode-gitweblinks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="cecko"&gt;Céčko&lt;a class="headerlink" href="#cecko" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;V souvislosti s jazykem C stojí za zmínku alespoň tyto dva doplňky:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;C/C++ for Visual Studio Code 
  &lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools"&gt;ms-vscode.cpptools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;clangd &lt;a href="https://marketplace.visualstudio.com/items?itemName=llvm-vs-code-extensions.vscode-clangd"&gt;llvm-vs-code-extensions.vscode-clangd&lt;/a&gt; respektive 
  &lt;a href="https://open-vsx.org/extension/llvm-vs-code-extensions/vscode-clangd"&gt;llvm-vs-code-extensions.vscode-clangd&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Já používám ten druhý, ale možná si budete chtít vyzkoušet a nastavit ten první…&lt;/p&gt;
&lt;h2 id="stm8"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt;&lt;a class="headerlink" href="#stm8" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Opět stojí za zmínku dva doplňky. Já mám zkušenost s tímto:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt; Debugger &lt;a href="https://marketplace.visualstudio.com/items?itemName=CL.stm8-debug"&gt;&lt;span class="caps"&gt;CL&lt;/span&gt;.stm8-debug&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;… ale jistě stojí za zmínku i toto:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.em-ide.com/#/en-us/"&gt;Embedded &lt;span class="caps"&gt;IDE&lt;/span&gt;&lt;/a&gt;
&lt;a href="https://open-vsx.org/extension/CL/eide"&gt;&lt;span class="caps"&gt;CL&lt;/span&gt;.eide&lt;/a&gt;
  respektive &lt;a href="https://marketplace.visualstudio.com/items?itemName=CL.eide"&gt;&lt;span class="caps"&gt;CL&lt;/span&gt;.eide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Programování"></category><category term="programování"></category><category term="Git"></category><category term="Python"></category><category term="Céčko"></category><category term="STM8"></category></entry><entry><title>Chocolatey</title><link href="https://chytrosti.marrek.cz/chocolatey.html" rel="alternate"></link><published>2021-11-17T21:17:37+01:00</published><updated>2021-11-17T21:17:37+01:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2021-11-17:/chocolatey.html</id><summary type="html">
&lt;p&gt;Chocolatey je správce balíčků pro operační systém windows. Dá se říct, že se snaží
o co nejjednodušší instalaci software. Podobný způsob instalace je znám z linuxových distribucí.&lt;/p&gt;
&lt;p&gt;Já tento způsob instalace doporučuji a zatím se mi jen a jen osvědčil. Nemusíte &lt;span class="caps"&gt;SW&lt;/span&gt; nikde
dlouze hledat instalovat atd. 
Například instalaci VSCodia …&lt;/p&gt;</summary><content type="html">
&lt;p&gt;Chocolatey je správce balíčků pro operační systém windows. Dá se říct, že se snaží
o co nejjednodušší instalaci software. Podobný způsob instalace je znám z linuxových distribucí.&lt;/p&gt;
&lt;p&gt;Já tento způsob instalace doporučuji a zatím se mi jen a jen osvědčil. Nemusíte &lt;span class="caps"&gt;SW&lt;/span&gt; nikde
dlouze hledat instalovat atd. 
Například instalaci VSCodia a Pythonu zajistí tyto dva příkazy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install vscodium
choco install python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pokud vás zajímá co všechno v repositáři balíčků najdete koukněte se na 
&lt;a href="https://community.chocolatey.org/packages"&gt;https://community.chocolatey.org/packages&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="instalace-chocolatey"&gt;Instalace chocolatey&lt;a class="headerlink" href="#instalace-chocolatey" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Celý projekt na jdete na stránce &lt;a href="https://chocolatey.org"&gt;https://chocolatey.org&lt;/a&gt;. Pokyny 
jak to celá nainstalovat potom na &lt;a href="https://chocolatey.org/install"&gt;https://chocolatey.org/install&lt;/a&gt;.
Když to hodně zjednoduším:&lt;/p&gt;
&lt;p&gt;Pomocí &lt;code&gt;Win+X&lt;/code&gt; a spustíte PowerShell jako Administrátor
a zadáte příkaz:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ExecutionPolicy&lt;/span&gt; &lt;span class="n"&gt;Bypass&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Scope&lt;/span&gt; &lt;span class="n"&gt;Process&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Force&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ServicePointManager&lt;/span&gt;&lt;span class="p"&gt;]::&lt;/span&gt;&lt;span class="n"&gt;SecurityProtocol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ServicePointManager&lt;/span&gt;&lt;span class="p"&gt;]::&lt;/span&gt;&lt;span class="n"&gt;SecurityProtocol&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bor&lt;/span&gt; &lt;span class="mi"&gt;3072&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;iex&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;New&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb nb-Type"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Net&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WebClient&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DownloadString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'https://community.chocolatey.org/install.ps1'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pokud chcete nějaké klikátko tak ho doinstalujete příkazem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install chocolateygui
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="python"&gt;Python&lt;a class="headerlink" href="#python" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Pokud pracujete s &lt;a href="https://chytrosti.marrek.cz/prg.html"&gt;Pythonem&lt;/a&gt; stačí nainstalovat VSCodium
&lt;a href="https://chytrosti.marrek.cz/vscodecodium.html"&gt;nebo&lt;/a&gt; VScode… a Python a taky asi Git&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install vscodium
choco install vscode

choco install python
choco install git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="stm8"&gt;&lt;span class="caps"&gt;STM8&lt;/span&gt;&lt;a class="headerlink" href="#stm8" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Pokud pracujete v &lt;a href="https://chytrosti.marrek.cz/mit.html"&gt;&lt;span class="caps"&gt;MIT&lt;/span&gt;&lt;/a&gt; s &lt;span class="caps"&gt;STM8&lt;/span&gt; nainstalujete VSCodium
&lt;a href="https://chytrosti.marrek.cz/vscodecodium.html"&gt;nebo&lt;/a&gt; VScode… a Git a &lt;span class="caps"&gt;GNU&lt;/span&gt; Make a OpenOCD. No a &lt;span class="caps"&gt;GCC&lt;/span&gt; a Python
se taky docela hodí.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;choco install vscodium
choco install vscode

choco install git
choco install make
choco install openocd
choco install mingw
choco install python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Programování"></category><category term="programování"></category><category term="Git"></category><category term="Python"></category><category term="STM8"></category></entry><entry><title>pip a venv</title><link href="https://chytrosti.marrek.cz/pip-a-venv.html" rel="alternate"></link><published>2021-11-17T15:35:00+01:00</published><updated>2022-10-20T06:38:20+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2021-11-17:/pip-a-venv.html</id><summary type="html">
&lt;p&gt;&lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt; je instalátor balíčků pro Python. Kromě toho, že umí
nainstalovat balíček, tak umí nainstalovat i všechny jeho závislosti a umí tyto balíčky 
spravovat. To znamená, že kromě akce &lt;code&gt;install&lt;/code&gt; existuje i akce &lt;code&gt;unistall&lt;/code&gt; nebo 
&lt;code&gt;list&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Někdy se stane, že při zadání příkazu &lt;code&gt;pip&lt;/code&gt; obdržíte pouze hlášení, že příkaz
neexistuje …&lt;/p&gt;</summary><content type="html">
&lt;p&gt;&lt;a href="https://pip.pypa.io"&gt;pip&lt;/a&gt; je instalátor balíčků pro Python. Kromě toho, že umí
nainstalovat balíček, tak umí nainstalovat i všechny jeho závislosti a umí tyto balíčky 
spravovat. To znamená, že kromě akce &lt;code&gt;install&lt;/code&gt; existuje i akce &lt;code&gt;unistall&lt;/code&gt; nebo 
&lt;code&gt;list&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Někdy se stane, že při zadání příkazu &lt;code&gt;pip&lt;/code&gt; obdržíte pouze hlášení, že příkaz
neexistuje. Buď jste při instalaci nezadali, že se má nainstalovat, nebo 
nejsou příslušné cesty obsaženy v proměnné &lt;code&gt;PATH&lt;/code&gt;. V obou dvou případech doporučuji
znovu &lt;a href="https://github.com/spseol/PRG-No/blob/master/instalace.md"&gt;spustit instalátor&lt;/a&gt;
a zaškrtnou příslušná políčka.&lt;/p&gt;
&lt;p&gt;V Linuxu potom stačí něco jako: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;apt install python3-pip python3-venv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;p class="admonition-title"&gt;Malá poznámka k Linuxu&lt;/p&gt;
&lt;p&gt;V Linuxových distribucích bývá Python
většinou už nainstalován – a to dokonce dvakrát. Příkazem &lt;code&gt;python&lt;/code&gt;
spustíte &lt;strong&gt;Python2&lt;/strong&gt; a příkazem &lt;code&gt;python3&lt;/code&gt; spustíte &lt;strong&gt;Python3&lt;/strong&gt;. Obdobně
to platí pro příkaz &lt;code&gt;pip&lt;/code&gt; a &lt;code&gt;pip3&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Také se může stát, že modul pip nainstalován je, ale příkaz &lt;code&gt;pip&lt;/code&gt; ne.
Pro tyto případy a také pro vysvětlení některých nejasností: místo příkazu &lt;code&gt;pip&lt;/code&gt;
můžete zadat delší příkaz&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;python -m pip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;případně…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;python3 -m pip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;celý příkaz může tedy vypadat například takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;python3 -m pip install -U --user flask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;namísto…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install -U --user flask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr/&gt;
&lt;p&gt;Ještě než se dáte do instalace zvažte zda instalovat pro celý systém, virtuální
prostředí nebo jen pro jednoho uživatele? &lt;/p&gt;
&lt;p&gt;Dále je dobré si všímat žlutých varovných hlášení a řídit se jejich radou:&lt;/p&gt;
&lt;div class="admonition warning"&gt;
&lt;p class="admonition-title"&gt;Warning&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;WARNING&lt;/span&gt;: You are using pip version 21.2.4; however, version 21.3.1 is available.
You should consider upgrading via the ‘/usr/bin/python3.9 -m pip install 
–upgrade pip’ command.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Hodně zásadní je chybové hlášení, které může vypadat například takto:&lt;/p&gt;
&lt;div class="admonition warning"&gt;
&lt;p class="admonition-title"&gt;Warning&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;WARNING&lt;/span&gt;: The scripts pip, pip3 and pip3.9 are installed in
‘/home/marek/.local/bin’ which is not on &lt;span class="caps"&gt;PATH&lt;/span&gt;. Consider adding this directory
to &lt;span class="caps"&gt;PATH&lt;/span&gt; or, if you prefer to suppress this warning, use –no-warn-script-location.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Spustitelný skript se nainstaloval tam, kde ho váš shell nenajde. Je třeba toto místo
přidat do proměnné &lt;code&gt;PATH&lt;/code&gt;. Ve Windows to musíte naklikat, v Linuxu je to soubor
&lt;code&gt;~/.profile&lt;/code&gt; nebo &lt;code&gt;~/.zprofile&lt;/code&gt; (podle toho, jaký používáte shell).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;PATH=~.local/bin:$PATH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="globalni-instalace"&gt;Globální instalace&lt;a class="headerlink" href="#globalni-instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Pokud budete balíček instalovat globálně pro celý systém potřebujete
administrátorská práva. Je třeba se ujistit, že si tím nepokazíte něco, co už
nainstalované máte. Mohlo by se stát, že máte nainstalovanou nějakou aplikaci,
která potřebuje knihovnu verze &lt;code&gt;x.y&lt;/code&gt; a vy nyní nainstalujete tu stejnou
knihovnu verze &lt;code&gt;y.z&lt;/code&gt;. Na Windows toto většinou (někdy tedy ano) řešit nemusíte,
na Linuxu typicky ano. (Na druhou stranu v Linuxu můžete spoustu knihoven
nainstalovat i bez &lt;code&gt;pip&lt;/code&gt;u z repositářů vaší distribuce: &lt;code&gt;apt install
pytho3-flask&lt;/code&gt;.)&lt;/p&gt;
&lt;p&gt;Takže spustíte si příkazový řádek a jako superuživatel a zadáte něco jako:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install flask
pip install pyglet
pip install jmeno_balicku
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="uzivatelska-instalace"&gt;Uživatelská instalace&lt;a class="headerlink" href="#uzivatelska-instalace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;K uživatelské instalaci nepotřebujete administrátorská práva, protože balíčky se
instalují do vašeho domovského adresáře (profilu). Na Linuxu je to typicky adresář
&lt;code&gt;~/.local/lib/python3.X&lt;/code&gt; pro balíčky a &lt;code&gt;~/.local/bin&lt;/code&gt; pro spustitelné skripty.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install --user flask 
pip install --user pyglet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pokud už je daný balíček nainstalován v systému a vy chcete novější verzi jen
do uživatelského profilu, je třeba to vynutit parametrem &lt;code&gt;-U&lt;/code&gt;, který říká, že má
balíček povýšit/instalovat na nejnovější dostupnou verzi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install -U --user flask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="virtualni-prostredi-venv"&gt;Virtuální prostředí? venv&lt;a class="headerlink" href="#virtualni-prostredi-venv" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments"&gt;Virtuální prostředí&lt;/a&gt;
umožňuje mít instalaci Pythonu (jakoby) oddělenou od instalace
v systému. Pro každý projekt si vytvoříte vlastní virtuální prostředí a do něj
instalujete potřebné balíčky v potřebné verzi. Ostatní systém a ostatní balíčky si
toho vůbec nevšimnou.&lt;/p&gt;
&lt;h3 id="vytvoreni"&gt;Vytvoření&lt;a class="headerlink" href="#vytvoreni" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Nejprve je třeba virtuální prostředí vytvořit. Např. do adresáře &lt;code&gt;.venv-projekt1&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;python3 -m venv .venv-projekt1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="aktivace"&gt;Aktivace&lt;a class="headerlink" href="#aktivace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Před začátkem práce je třeba vždy prostředí aktivovat.&lt;/p&gt;
&lt;p&gt;V Linuxu:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;source .venv-projekt1/bin/activate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ve Windows&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="na"&gt;.venv-projekt1&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="no"&gt;Scripts&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="no"&gt;activate.bat&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="prace"&gt;Práce&lt;a class="headerlink" href="#prace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Prostředí je aktivováno a pokud tu pustíte Python bude vidět jen to, co je
zahrnuto v tomto virtuálním prostředí. Pokud pustíte &lt;code&gt;pip&lt;/code&gt;, bude instalovat do
tohoto prostředí.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install -U pip
pip install flask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id="deaktivace"&gt;Deaktivace&lt;a class="headerlink" href="#deaktivace" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;deactivate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="aktualizace-balicku"&gt;Aktualizace Balíčků&lt;a class="headerlink" href="#aktualizace-balicku" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Aktualizace balíčků na nejnovější dostupnou verzi provedete parametrem &lt;code&gt;-U&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install -U pip
pip install -U flask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;nebo &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip install --user -U pip
pip install --user -U pyglet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Programování"></category><category term="Python"></category><category term="programování"></category></entry><entry><title>Ultrazvukový měřič vzdálenosti pomocí timeru TIM2</title><link href="https://chytrosti.marrek.cz/ultrazvukovy-meric-vzdalenosti-pomoci-timeru-tim2.html" rel="alternate"></link><published>2021-05-07T12:34:30+02:00</published><updated>2021-05-07T12:34:30+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2021-05-07:/ultrazvukovy-meric-vzdalenosti-pomoci-timeru-tim2.html</id><content type="html">
&lt;p&gt;zde se časem objeví zajímavý text :)&lt;/p&gt;
&lt;h2 id="zdrojove-kody"&gt;Zdrojové kódy&lt;a class="headerlink" href="#zdrojove-kody" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Kompletní zdrojové kódy naleznete v 
&lt;a href="https://github.com/spseol/STM8-TIM2-ultrasonic"&gt;repositáři&lt;/a&gt; na GitHubu:   &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;základní princip – 
  &lt;a href="https://github.com/spseol/STM8-TIM2-ultrasonic/tree/princip"&gt;větev princip&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/spseol/STM8-TIM2-ultrasonic/blob/princip/src/main.c"&gt;main.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;řešení typu Stavový automat – &lt;a href="https://github.com/spseol/STM8-TIM2-ultrasonic/tree/stav_automat"&gt;větev stav_automat&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/spseol/STM8-TIM2-ultrasonic/blob/stav_automat/src/main.c"&gt;main.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</content><category term="MITka"></category><category term="Céčko"></category><category term="STM8"></category><category term="timer"></category><category term="senzor"></category></entry><entry><title>Použití časovače jako generátoru PWM</title><link href="https://chytrosti.marrek.cz/pouziti-casovace-jako-generatoru-pwm.html" rel="alternate"></link><published>2021-05-07T12:30:25+02:00</published><updated>2021-05-07T12:30:25+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2021-05-07:/pouziti-casovace-jako-generatoru-pwm.html</id><content type="html">
&lt;h2 id="tim2-a-tim3"&gt;&lt;span class="caps"&gt;TIM2&lt;/span&gt; a &lt;span class="caps"&gt;TIM3&lt;/span&gt;&lt;a class="headerlink" href="#tim2-a-tim3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;zde se časem objeví zajímavý text :)&lt;/p&gt;
&lt;h2 id="zdrojove-kody"&gt;Zdrojové kódy&lt;a class="headerlink" href="#zdrojove-kody" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Kompletní zdrojové kódy naleznete v 
&lt;a href="https://github.com/spseol/STM8-TIM2-PWM/"&gt;repositáři&lt;/a&gt; na GitHubu:    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span class="caps"&gt;RGB&lt;/span&gt; &lt;span class="caps"&gt;LED&lt;/span&gt; – &lt;a href="https://github.com/spseol/STM8-TIM2-PWM/tree/RGB_LED"&gt;RGB_LED&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/spseol/STM8-TIM2-PWM/blob/RGB_LED/src/main.c"&gt;main.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</content><category term="MITka"></category><category term="Céčko"></category><category term="STM8"></category><category term="timer"></category><category term="pwm"></category></entry><entry><title>Generování zvuku — základy</title><link href="https://chytrosti.marrek.cz/generovani-zvuku-zaklady.html" rel="alternate"></link><published>2021-05-07T11:37:15+02:00</published><updated>2021-05-07T11:37:15+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2021-05-07:/generovani-zvuku-zaklady.html</id><summary type="html">
&lt;p&gt;&lt;a href="https://cs.wikipedia.org/wiki/Zvuk"&gt;Zvuk&lt;/a&gt; je jak známo mechanické vlnění.
Pro jeho vyloudění tedy potřebujeme nějaký “vlnič” – tedy elektro-akustický měnič. &lt;/p&gt;
&lt;p&gt;&lt;img alt="&amp;gt;&amp;gt;" src="https://chytrosti.marrek.cz/mit/img/piezo_obr.png"/&gt;&lt;/p&gt;
&lt;p&gt;Nejjednodušší je asi použít piezo měnič. Ten má ovšem poněkud omezený
frekvenční rozsah. Jeho frekvenční charakteristika může vypadat například takto:&lt;/p&gt;
&lt;p&gt;&lt;img alt="|=|" src="https://chytrosti.marrek.cz/mit/img/piezo_f_ch.png"/&gt;&lt;/p&gt;
&lt;p&gt;(Mimochodem prý existuje nějaký výzkum, podle kterého optimální frekvence pro
budík je 100 Hz …&lt;/p&gt;</summary><content type="html">
&lt;p&gt;&lt;a href="https://cs.wikipedia.org/wiki/Zvuk"&gt;Zvuk&lt;/a&gt; je jak známo mechanické vlnění.
Pro jeho vyloudění tedy potřebujeme nějaký “vlnič” – tedy elektro-akustický měnič. &lt;/p&gt;
&lt;p&gt;&lt;img alt="&amp;gt;&amp;gt;" src="https://chytrosti.marrek.cz/mit/img/piezo_obr.png"/&gt;&lt;/p&gt;
&lt;p&gt;Nejjednodušší je asi použít piezo měnič. Ten má ovšem poněkud omezený
frekvenční rozsah. Jeho frekvenční charakteristika může vypadat například takto:&lt;/p&gt;
&lt;p&gt;&lt;img alt="|=|" src="https://chytrosti.marrek.cz/mit/img/piezo_f_ch.png"/&gt;&lt;/p&gt;
&lt;p&gt;(Mimochodem prý existuje nějaký výzkum, podle kterého optimální frekvence pro
budík je 100 Hz; nebo to bylo 300 Hz? Prostě poměrně nízký kmitočet. Ale levné
bezporuchové piezo-měniče takto nízko prostě nejdou. Tak na nás ty budíky
pískají a pípají a my vstáváme potom naštvaní.)&lt;/p&gt;
&lt;p&gt;Další možností je použít reproduktorek. V tomto případě je třeba posílit výstup
tranzistorem. Zapojení tedy může vypadat například takto: &lt;/p&gt;
&lt;p&gt;&lt;img alt="micro-controller, piezo, repro" src="https://chytrosti.marrek.cz/mit/img/stm8-zvuk-1.png"/&gt;&lt;/p&gt;
&lt;p&gt;Tranzistor je ve spínacím režimu a membrána reproduktoru má pouze dvě polohy.
Tedy klidovou polohu (bez proudu) nebo výchylku odpovídající kladnému proudu.
Do výchylky odpovídající zápornému proudu se membrána nedostane, protože proud
protéká vždy jedním směrem. Dioda D1 vybíjí cívku reproduktoru, při sestupné hraně.&lt;/p&gt;
&lt;p&gt;Program, který nám vyloudí frekvenci &lt;span class="math"&gt;\(500\,\mathrm{Hz}\)&lt;/span&gt; může vypadat například takto. 
Perioda je &lt;span class="math"&gt;\(2\,\mathrm{ms}\)&lt;/span&gt;. Půl periody tedy &lt;span class="math"&gt;\(1\,\mathrm{ms}\)&lt;/span&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;PZ_UP&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;PZ_DOWN&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img alt="obdélníkový časový průběh %%" src="https://chytrosti.marrek.cz/mit/img/obdelnik.png"/&gt;&lt;/p&gt;
&lt;p&gt;Pokud chci jen pípnout a poté nechat chvilku ticho jednoduše nebudu cvičit s
membránou do nekonečna, ale pouze několikrát (&lt;span class="math"&gt;\(20 \cdot 2\,\mathrm{ms}\)&lt;/span&gt;) a pak nechám chvilku ticho.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;uint16_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;PZ_UP&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;PZ_DOWN&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img alt="Pípání %%" src="https://chytrosti.marrek.cz/mit/img/pipani.png"/&gt;&lt;/p&gt;
&lt;p&gt;Tento způsob práce je ale blokující, protože se pořád jen čeká. Mikroprocesor
vlastně pořádně nemůže dělat nic jiného. Proto použijeme 
&lt;a href="http://elektromys.eu/clanky/stm8_11_milis/clanek.html"&gt;multitasking&lt;/a&gt; &lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt; a &lt;a href="http://elektromys.eu/clanky/stm8_12_automat/clanek.html"&gt;stavový automat&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;uint32_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;timeL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;uint32_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lastTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;uint16_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;enum&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;state_of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;STATE_PAUSE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;STATE_UP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;STATE_DOWN&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STATE_UP&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;uint32_t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;STATE_PAUSE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;PZ_DOWN&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="c1"&gt;// v pauze dám repráček do klodového stavu&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lastTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4321&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;lastTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STATE_UP&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;STATE_UP&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;PZ_UP&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lastTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;lastTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STATE_DOWN&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;STATE_DOWN&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;PZ_DOWN&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;lastTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STATE_PAUSE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lastTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;lastTime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STATE_UP&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STATE_PAUSE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;timeL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;timeL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;milis&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;LED_REVERSE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="zdrojove-kody"&gt;Zdrojové kódy&lt;a class="headerlink" href="#zdrojove-kody" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Kompletní zdrojové kódy naleznete v repositáři na GitHubu: &lt;br/&gt;
&lt;a href="https://github.com/spseol/STM8-zvuk-zaklad"&gt;https://github.com/spseol/&lt;span class="caps"&gt;STM8&lt;/span&gt;-zvuk-zaklad&lt;/a&gt;&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr/&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;a href="https://github.com/spseol/start-stm8/blob/main/src/milis.c"&gt;knihovna milis&lt;/a&gt; &lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;↩&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="MITka"></category><category term="Céčko"></category><category term="STM8"></category><category term="zvuk"></category></entry><entry><title>Základní použití časovače</title><link href="https://chytrosti.marrek.cz/zakladni-pouziti-casovace.html" rel="alternate"></link><published>2021-05-07T11:36:34+02:00</published><updated>2021-05-07T11:36:34+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2021-05-07:/zakladni-pouziti-casovace.html</id><summary type="html">
&lt;p&gt;Náš &lt;span class="caps"&gt;STM8S208RB&lt;/span&gt; má na těle celkem čtyři časovače: &lt;span class="caps"&gt;TIM1&lt;/span&gt;, &lt;span class="caps"&gt;TIM2&lt;/span&gt;, &lt;span class="caps"&gt;TIM3&lt;/span&gt; a &lt;span class="caps"&gt;TIM4&lt;/span&gt;.&lt;/p&gt;
&lt;h2 id="tim4"&gt;&lt;span class="caps"&gt;TIM4&lt;/span&gt;&lt;a class="headerlink" href="#tim4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;TIM4&lt;/span&gt; je nejjednodušší. Čítač je 8-bitový a předdělička umožňuje dělit kmitočet
/1, /2, /4, /8, /16, /32, /64 a /128. Auto-reload register říká kam až se bude 
čítat – tedy nastavuje strop časovače.&lt;/p&gt;
&lt;p&gt;&lt;img alt="TIM4" src="https://chytrosti.marrek.cz/mit/img/tim4.png"/&gt;&lt;/p&gt;
&lt;p&gt;Nastavení se děje pomocí …&lt;/p&gt;</summary><content type="html">
&lt;p&gt;Náš &lt;span class="caps"&gt;STM8S208RB&lt;/span&gt; má na těle celkem čtyři časovače: &lt;span class="caps"&gt;TIM1&lt;/span&gt;, &lt;span class="caps"&gt;TIM2&lt;/span&gt;, &lt;span class="caps"&gt;TIM3&lt;/span&gt; a &lt;span class="caps"&gt;TIM4&lt;/span&gt;.&lt;/p&gt;
&lt;h2 id="tim4"&gt;&lt;span class="caps"&gt;TIM4&lt;/span&gt;&lt;a class="headerlink" href="#tim4" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;TIM4&lt;/span&gt; je nejjednodušší. Čítač je 8-bitový a předdělička umožňuje dělit kmitočet
/1, /2, /4, /8, /16, /32, /64 a /128. Auto-reload register říká kam až se bude 
čítat – tedy nastavuje strop časovače.&lt;/p&gt;
&lt;p&gt;&lt;img alt="TIM4" src="https://chytrosti.marrek.cz/mit/img/tim4.png"/&gt;&lt;/p&gt;
&lt;p&gt;Nastavení se děje pomocí funkce &lt;code&gt;TIM4_TimeBaseInit(PRESCALER, PERIOD)&lt;/code&gt;, kde
&lt;code&gt;PRESCALER&lt;/code&gt; je makro, pro nastavení děličky a &lt;code&gt;PERIOD&lt;/code&gt; je 8-bitové číslo.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;TIM4_TimeBaseInit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM4_PRESCALER_128&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;125&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Takže pokud máme nastaven kmitočet na 16MHz znamená to že čítač čítá do hodnoty
125 (respektive 124 protože čítáme od nuly) s frekvencí &lt;code&gt;16MHz/128 == 125 kHz&lt;/code&gt;.
Znamená to tedy, že každou milisekundu dojde k auto-reloadu a je vyvoláno
přerušení od časovače &lt;span class="caps"&gt;TIM4&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Aby vše fungovalo musíme:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;povolit &lt;span class="caps"&gt;TIM4&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;povolit přerušení od &lt;span class="caps"&gt;TIM4&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;globálně povolit přerušení&lt;/li&gt;
&lt;li&gt;napsat tělo obslužné rutiny přerušení.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TIM4_Cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ENABLE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;                       &lt;/span&gt;&lt;span class="c1"&gt;// povolí TIM4&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;TIM4_ITConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM4_IT_UPDATE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ENABLE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// povolí přerušení od TIM4&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;enableInterrupts&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;                     &lt;/span&gt;&lt;span class="c1"&gt;// globálně povolí přerušení&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;......&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Rutina přerušení se standardně nachází v souboru &lt;code&gt;stm8_it.c&lt;/code&gt;. Stačí ji najít
přepsat. Pokud potřebujete v rutině přerušení pracovat s proměnnou definovanou
v &lt;code&gt;main.c&lt;/code&gt; (což je myslím téměř vždy) je třeba tuto proměnnou označit
direktivou &lt;code&gt;extern&lt;/code&gt; nebo rutinu přesunout přímo do souboru &lt;code&gt;main.c&lt;/code&gt;.
Více o tom se dočtete v postu
&lt;a href="https://chytrosti.marrek.cz/oddelena-kompilace-a-vlastni-knihovny.html"&gt;Kompilace a knihovny&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cm"&gt;/*---        rutina obsluhy přerušení         ---*/&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;INTERRUPT_HANDLER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM4_UPD_OVF_IRQHandler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;TIM4_ClearFlag&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM4_FLAG_UPDATE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// vymažu vlajku signalizující přerušení&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;miliseconds&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="c1"&gt;// udělám co je třeba....&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Všimněte si prosím, že první, co se v rutině přerušení dělá, je, že se &lt;strong&gt;vymaže
vlajka&lt;/strong&gt;, která označuje, že k přerušení došlo.&lt;/p&gt;
&lt;p&gt;Tento kód je například použito v knihovně
&lt;a href="https://github.com/spseol/start-stm8/blob/main/src/milis.c"&gt;milis&lt;/a&gt;,
která umožňuje zjistit počet milisekund uplynulých od “spuštění programu”.&lt;/p&gt;
&lt;h2 id="tim2-a-tim3"&gt;&lt;span class="caps"&gt;TIM2&lt;/span&gt; a &lt;span class="caps"&gt;TIM3&lt;/span&gt;&lt;a class="headerlink" href="#tim2-a-tim3" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;TIM2&lt;/span&gt; a &lt;span class="caps"&gt;TIM3&lt;/span&gt; je trochu složitější, ale zde ukážeme jen jeho základní použití.
(&lt;a href="https://cs.wikipedia.org/wiki/Pulzn%C4%9B_%C5%A1%C3%AD%C5%99kov%C3%A1_modulace"&gt;&lt;span class="caps"&gt;PWM&lt;/span&gt;&lt;/a&gt; necháme na samostatný post: 
&lt;a href="https://chytrosti.marrek.cz/pouziti-casovace-jako-generatoru-pwm.html"&gt;Použití časovače jako generátoru &lt;span class="caps"&gt;PWM&lt;/span&gt;&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;TIM2&lt;/span&gt;/3 je 16 bitový – může tedy čítat do 65535 a předdělička umožňuje dělit
/1, /2, /4, /8, /16, /32, /64, /128, /256, /512, /1024, /2048, /4096, /8192,
/16384 a /32768.&lt;/p&gt;
&lt;p&gt;Takže například pokud vytváříme cokoli, co pracuje s časem a potřebujeme
spustit určitý kód vždy přesně v intervalu &lt;span class="math"&gt;\(1\,\mathrm{s}\)&lt;/span&gt;, může inicializace
časovače vypadat například takto:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cm"&gt;/*----           TIM2 setup           ---------*/&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;TIM2_TimeBaseInit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM2_PRESCALER_512&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;31250&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// 16MHz/512/31250 == 1Hz&lt;/span&gt;
&lt;span class="n"&gt;TIM2_Cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ENABLE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;                       &lt;/span&gt;&lt;span class="c1"&gt;// povolí TIM2&lt;/span&gt;
&lt;span class="n"&gt;TIM2_ITConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM2_IT_UPDATE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ENABLE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// povolí přerušení od TIM2&lt;/span&gt;
&lt;span class="n"&gt;enableInterrupts&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;                     &lt;/span&gt;&lt;span class="c1"&gt;// globálně povolí přerušení&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;nastavení &lt;span class="caps"&gt;TIM3&lt;/span&gt; je analogické:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="cm"&gt;/*----           TIM3 setup           ---------*/&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;TIM3_TimeBaseInit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM3_PRESCALER_16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;12345&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// ~81Hz&lt;/span&gt;
&lt;span class="n"&gt;TIM3_ITConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM3_IT_UPDATE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ENABLE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;TIM3_Cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ENABLE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No a ještě rutiny přerušení… Opět platí, že &lt;strong&gt;rutiny přerušení buď necháme v souboru
&lt;code&gt;stm8_it.c&lt;/code&gt; a proměnné označíme pomocí direktivy &lt;code&gt;extern&lt;/code&gt; nebo si rutiny
přesuneme do modulu/souboru ve kterém je proměnná definována&lt;/strong&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;INTERRUPT_HANDLER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM2_UPD_OVF_BRK_IRQHandler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;TIM2_ClearFlag&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM2_FLAG_UPDATE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="c1"&gt;// vymažu vlaku signalizující &lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;udelam_neco_zajimaveho&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;a_jeste_neco_jineho&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="n"&gt;INTERRUPT_HANDLER&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM3_UPD_OVF_BRK_IRQHandler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;TIM3_ClearFlag&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIM3_FLAG_UPDATE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;LED_REVERSE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="zdrojove-kody"&gt;Zdrojové kódy&lt;a class="headerlink" href="#zdrojove-kody" title="Permanent link"&gt;¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Kompletní zdrojové kódy naleznete v repositáři na GitHubu: &lt;br/&gt;
&lt;a href="https://github.com/spseol/STM8-TIM23-zaklad"&gt;https://github.com/spseol/&lt;span class="caps"&gt;STM8&lt;/span&gt;-&lt;span class="caps"&gt;TIM23&lt;/span&gt;-zaklad&lt;/a&gt;&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="MITka"></category><category term="Céčko"></category><category term="STM8"></category><category term="timer"></category></entry><entry><title>Oddělená kompilace a vlastní knihovny</title><link href="https://chytrosti.marrek.cz/oddelena-kompilace-a-vlastni-knihovny.html" rel="alternate"></link><published>2021-04-23T07:44:00+02:00</published><updated>2021-05-12T19:49:26+02:00</updated><author><name>Marrek Nožka</name></author><id>tag:chytrosti.marrek.cz,2021-04-23:/oddelena-kompilace-a-vlastni-knihovny.html</id><summary type="html">&lt;p&gt;Zde se pokusím&amp;nbsp;ukázatttt&lt;/p&gt;</summary><content type="html">&lt;p&gt;ahoj aaa
aaa&amp;nbsp;bbb&lt;/p&gt;
&lt;p&gt;dfjdk&lt;/p&gt;
&lt;p&gt;konec&lt;/p&gt;</content><category term="MITka"></category><category term="Céčko"></category><category term="STM8"></category></entry></feed>